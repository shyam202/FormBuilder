{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _vanillaTextMask = require(\"@formio/vanilla-text-mask\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _tooltip = _interopRequireDefault(require(\"tooltip.js\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _ismobilejs = _interopRequireDefault(require(\"ismobilejs\"));\n\nvar _Formio = _interopRequireDefault(require(\"../../../Formio\"));\n\nvar FormioUtils = _interopRequireWildcard(require(\"../../../utils/utils\"));\n\nvar _Validator = _interopRequireDefault(require(\"../../../validator/Validator\"));\n\nvar _Templates = _interopRequireDefault(require(\"../../../templates/Templates\"));\n\nvar _Element2 = _interopRequireDefault(require(\"../../../Element\"));\n\nvar _ComponentModal = _interopRequireDefault(require(\"../componentModal/ComponentModal\"));\n\nvar _widgets = _interopRequireDefault(require(\"../../../widgets\"));\n\nvar _uploadAdapter = require(\"../../../providers/storage/uploadAdapter\");\n\nvar _en = _interopRequireDefault(require(\"../../../translations/en\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar isIEBrowser = FormioUtils.getBrowserInfo().ie;\nvar CKEDITOR_URL = isIEBrowser ? 'https://cdn.ckeditor.com/4.14.1/standard/ckeditor.js' : 'https://cdn.form.io/ckeditor/19.0.0/ckeditor.js';\nvar QUILL_URL = isIEBrowser ? 'https://cdn.quilljs.com/1.3.7' : 'https://cdn.quilljs.com/2.0.0-dev.3';\nvar QUILL_TABLE_URL = 'https://cdn.form.io/quill/quill-table.js';\nvar ACE_URL = 'https://cdn.form.io/ace/1.4.10/ace.js';\n/**\n * This is the Component class\n which all elements within the FormioForm derive from.\n */\n\nvar Component = /*#__PURE__*/function (_Element) {\n  _inherits(Component, _Element);\n\n  var _super = _createSuper(Component);\n  /* eslint-enable no-unused-vars */\n\n  /**\n   * Initialize a new Component.\n   *\n   * @param {Object} component - The component JSON you wish to initialize.\n   * @param {Object} options - The options for this component.\n   * @param {Object} data - The global data submission object this component will belong.\n   */\n\n  /* eslint-disable max-statements */\n\n\n  function Component(component, options, data) {\n    var _this;\n\n    _classCallCheck(this, Component);\n\n    _this = _super.call(this, Object.assign({\n      renderMode: 'form',\n      attachMode: 'full'\n    }, options || {})); // Restore the component id.\n\n    if (component && component.id) {\n      _this.id = component.id;\n    }\n    /**\n     * Determines if this component has a condition assigned to it.\n     * @type {null}\n     * @private\n     */\n\n\n    _this._hasCondition = null;\n    /**\n     * References to dom elements\n     */\n\n    _this.refs = {}; // Allow global override for any component JSON.\n\n    if (component && _this.options.components && _this.options.components[component.type]) {\n      _lodash.default.merge(component, _this.options.components[component.type]);\n    }\n    /**\n     * Set the validator instance.\n     */\n\n\n    _this.validator = _Validator.default;\n    /**\n     * The data path to this specific component instance.\n     *\n     * @type {string}\n     */\n\n    _this.path = '';\n    /**\n     * The Form.io component JSON schema.\n     * @type {*}\n     */\n\n    _this.component = _this.mergeSchema(component || {}); // Add the id to the component.\n\n    _this.component.id = _this.id; // Save off the original component to be used in logic.\n\n    _this.originalComponent = (0, FormioUtils.fastCloneDeep)(_this.component);\n    /**\n     * If the component has been attached\n     */\n\n    _this.attached = false;\n    /**\n     * If the component has been rendered\n     */\n\n    _this.rendered = false;\n    /**\n     * The data object in which this component resides.\n     * @type {*}\n     */\n\n    _this._data = data || {};\n    /**\n     * The existing error that this component has.\n     * @type {string}\n     */\n\n    _this.error = '';\n    /**\n     * Tool tip text after processing\n     * @type {string}\n     */\n\n    _this.tooltip = '';\n    /**\n     * The row path of this component.\n     * @type {number}\n     */\n\n    _this.row = _this.options.row;\n    /**\n     * Determines if this component is disabled, or not.\n     *\n     * @type {boolean}\n     */\n\n    _this._disabled = (0, FormioUtils.boolValue)(_this.component.disabled) ? _this.component.disabled : false;\n    /**\n     * Points to the root component, usually the FormComponent.\n     *\n     * @type {Component}\n     */\n\n    _this.root = _this.options.root;\n    _this.localRoot = _this.options.localRoot;\n    /**\n     * If this input has been input and provided value.\n     *\n     * @type {boolean}\n     */\n\n    _this.pristine = true;\n    /**\n     * Points to the parent component.\n     *\n     * @type {Component}\n     */\n\n    _this.parent = _this.options.parent;\n    _this.options.name = _this.options.name || 'data';\n    /**\n     * The validators that are assigned to this component.\n     * @type {[string]}\n     */\n\n    _this.validators = ['required', 'minLength', 'maxLength', 'minWords', 'maxWords', 'custom', 'pattern', 'json', 'mask'];\n    _this._path = ''; // Nested forms don't have parents so we need to pass their path in.\n\n    _this._parentPath = _this.options.parentPath || '';\n    /**\n     * Determines if this component is visible, or not.\n     */\n\n    _this._parentVisible = _this.options.hasOwnProperty('parentVisible') ? _this.options.parentVisible : true;\n    _this._visible = _this._parentVisible && _this.conditionallyVisible(null, data);\n    _this._parentDisabled = false;\n    /**\n     * Used to trigger a new change in this component.\n     * @type {function} - Call to trigger a change in this component.\n     */\n\n    var changes = [];\n    var lastChanged = null;\n    var triggerArgs = [];\n\n    var _triggerChange = _lodash.default.debounce(function () {\n      var _this2;\n\n      if (_this.root) {\n        _this.root.changing = false;\n      }\n\n      triggerArgs = [];\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (!args[1] && lastChanged) {\n        // Set the changed component if one isn't provided.\n        args[1] = lastChanged;\n      }\n\n      if (_lodash.default.isEmpty(args[0]) && lastChanged) {\n        // Set the flags if it is empty and lastChanged exists.\n        args[0] = lastChanged.flags;\n      }\n\n      lastChanged = null;\n      args[3] = changes;\n\n      var retVal = (_this2 = _this).onChange.apply(_this2, args);\n\n      changes = [];\n      return retVal;\n    }, 100);\n\n    _this.triggerChange = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      if (args[1]) {\n        // Make sure that during the debounce that we always track lastChanged component, even if they\n        // don't provide one later.\n        lastChanged = args[1];\n        changes.push(lastChanged);\n      }\n\n      if (_this.root) {\n        _this.root.changing = true;\n      }\n\n      if (args.length) {\n        triggerArgs = args;\n      }\n\n      return _triggerChange.apply(void 0, _toConsumableArray(triggerArgs));\n    };\n    /**\n     * Used to trigger a redraw event within this component.\n     *\n     * @type {Function}\n     */\n\n\n    _this.triggerRedraw = _lodash.default.debounce(_this.redraw.bind(_assertThisInitialized(_this)), 100);\n    /**\n     * list of attached tooltips\n     * @type {Array}\n     */\n\n    _this.tooltips = []; // To force this component to be invalid.\n\n    _this.invalid = false;\n\n    if (_this.component) {\n      _this.type = _this.component.type;\n\n      if (_this.allowData && _this.key) {\n        _this.options.name += \"[\".concat(_this.key, \"]\"); // If component is visible or not set to clear on hide, set the default value.\n\n        if (_this.visible || !_this.component.clearOnHide) {\n          if (!_this.hasValue()) {\n            _this.dataValue = _this.defaultValue;\n          } else {\n            // Ensure the dataValue is set.\n\n            /* eslint-disable  no-self-assign */\n            _this.dataValue = _this.dataValue;\n            /* eslint-enable  no-self-assign */\n          }\n        }\n      }\n      /**\n       * The element information for creating the input element.\n       * @type {*}\n       */\n\n\n      _this.info = _this.elementInfo();\n    } // Allow anyone to hook into the component creation.\n\n\n    _this.hook('component');\n\n    if (!_this.options.skipInit) {\n      _this.init();\n    }\n\n    return _this;\n  }\n  /* eslint-enable max-statements */\n\n\n  _createClass(Component, [{\n    key: \"data\",\n    get: function get() {\n      return this._data;\n    },\n    set: function set(value) {\n      this._data = value;\n    }\n  }, {\n    key: \"mergeSchema\",\n    value: function mergeSchema() {\n      var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _lodash.default.defaultsDeep(component, this.defaultSchema);\n    } // Allow componets to notify when ready.\n\n  }, {\n    key: \"ready\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve(this);\n    }\n  }, {\n    key: \"labelInfo\",\n    get: function get() {\n      var label = {};\n      label.hidden = this.labelIsHidden();\n      label.className = '';\n      label.labelPosition = this.component.labelPosition;\n      label.tooltipClass = \"\".concat(this.iconClass('question-sign'), \" text-muted\");\n      var isPDFReadOnlyMode = this.parent && this.parent.form && this.parent.form.display === 'pdf' && this.options.readOnly;\n\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required) && !isPDFReadOnlyMode) {\n        label.className += ' field-required';\n      }\n\n      if (label.hidden) {\n        label.className += ' control-label--hidden';\n      }\n\n      if (this.info.attr.id) {\n        label.for = this.info.attr.id;\n      }\n\n      return label;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.disabled = this.shouldDisabled;\n      this._visible = this.conditionallyVisible(null, null);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Component.prototype), \"destroy\", this).call(this);\n\n      this.detach();\n    }\n  }, {\n    key: \"shouldDisabled\",\n    get: function get() {\n      return this.options.readOnly || this.component.disabled || this.options.hasOwnProperty('disabled') && this.options.disabled[this.key];\n    }\n  }, {\n    key: \"isInputComponent\",\n    get: function get() {\n      return !this.component.hasOwnProperty('input') || this.component.input;\n    }\n  }, {\n    key: \"allowData\",\n    get: function get() {\n      return this.hasInput;\n    }\n  }, {\n    key: \"hasInput\",\n    get: function get() {\n      return this.isInputComponent || this.refs.input && this.refs.input.length;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return Component.schema();\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return _lodash.default.get(this.component, 'key', '');\n    }\n  }, {\n    key: \"parentVisible\",\n    get: function get() {\n      return this._parentVisible;\n    },\n    set: function set(value) {\n      this._parentVisible = value;\n    }\n  }, {\n    key: \"parentDisabled\",\n    get: function get() {\n      return this._parentDisabled;\n    }\n    /**\n     *\n     * @param value {boolean}\n     */\n    ,\n    set: function set(value) {\n      this._parentDisabled = value;\n    }\n  }, {\n    key: \"visible\",\n    get:\n    /**\n     *\n     * @returns {boolean}\n     */\n    function get() {\n      // Show only if visibility changes or if we are in builder mode or if hidden fields should be shown.\n      if (this.builderMode || this.options.showHiddenFields) {\n        return true;\n      }\n\n      if (this.options.hide && this.options.hide[this.component.key]) {\n        return false;\n      }\n\n      if (this.options.show && this.options.show[this.component.key]) {\n        return true;\n      }\n\n      return this._visible && this._parentVisible;\n    },\n    set: function set(value) {\n      if (this._visible !== value) {\n        this._visible = value;\n        this.clearOnHide();\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"currentForm\",\n    get: function get() {\n      return this._currentForm;\n    },\n    set: function set(instance) {\n      this._currentForm = instance;\n    }\n  }, {\n    key: \"fullMode\",\n    get: function get() {\n      return this.options.attachMode === 'full';\n    }\n  }, {\n    key: \"builderMode\",\n    get: function get() {\n      return this.options.attachMode === 'builder';\n    }\n  }, {\n    key: \"calculatedPath\",\n    get: function get() {\n      console.error('component.calculatedPath was deprecated, use component.path instead.');\n      return this.path;\n    }\n  }, {\n    key: \"labelPosition\",\n    get: function get() {\n      return this.component.labelPosition;\n    }\n  }, {\n    key: \"labelWidth\",\n    get: function get() {\n      var width = this.component.labelWidth;\n      return width >= 0 ? width : 30;\n    }\n  }, {\n    key: \"labelMargin\",\n    get: function get() {\n      var margin = this.component.labelMargin;\n      return margin >= 0 ? margin : 3;\n    }\n  }, {\n    key: \"isAdvancedLabel\",\n    get: function get() {\n      return ['left-left', 'left-right', 'right-left', 'right-right'].includes(this.labelPosition);\n    }\n  }, {\n    key: \"labelPositions\",\n    get: function get() {\n      return this.labelPosition.split('-');\n    }\n  }, {\n    key: \"skipInEmail\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"rightDirection\",\n    value: function rightDirection(direction) {\n      return direction === 'right';\n    }\n  }, {\n    key: \"getLabelInfo\",\n    value: function getLabelInfo() {\n      var isRightPosition = this.rightDirection(this.labelPositions[0]);\n      var isLeftPosition = this.labelPositions[0] === 'left';\n      var isRightAlign = this.rightDirection(this.labelPositions[1]);\n      var contentMargin = '';\n\n      if (this.component.hideLabel) {\n        var margin = this.labelWidth + this.labelMargin;\n        contentMargin = isRightPosition ? \"margin-right: \".concat(margin, \"%\") : '';\n        contentMargin = isLeftPosition ? \"margin-left: \".concat(margin, \"%\") : '';\n      }\n\n      var labelStyles = \"\\n      flex: \".concat(this.labelWidth, \";\\n      \").concat(isRightPosition ? 'margin-left' : 'margin-right', \": \").concat(this.labelMargin, \"%;\\n    \");\n      var contentStyles = \"\\n      flex: \".concat(100 - this.labelWidth - this.labelMargin, \";\\n      \").concat(contentMargin, \";\\n      \").concat(this.component.hideLabel ? \"max-width: \".concat(100 - this.labelWidth - this.labelMargin) : '', \";\\n    \");\n      return {\n        isRightPosition: isRightPosition,\n        isRightAlign: isRightAlign,\n        labelStyles: labelStyles,\n        contentStyles: contentStyles\n      };\n    }\n    /**\n     * Returns only the schema that is different from the default.\n     *\n     * @param schema\n     * @param defaultSchema\n     */\n\n  }, {\n    key: \"getModifiedSchema\",\n    value: function getModifiedSchema(schema, defaultSchema, recursion) {\n      var _this3 = this;\n\n      var modified = {};\n\n      if (!defaultSchema) {\n        return schema;\n      }\n\n      _lodash.default.each(schema, function (val, key) {\n        if (!_lodash.default.isArray(val) && _lodash.default.isObject(val) && defaultSchema.hasOwnProperty(key)) {\n          var subModified = _this3.getModifiedSchema(val, defaultSchema[key], true);\n\n          if (!_lodash.default.isEmpty(subModified)) {\n            modified[key] = subModified;\n          }\n        } else if (_lodash.default.isArray(val)) {\n          if (val.length !== 0 && !_lodash.default.isEqual(val, defaultSchema[key])) {\n            modified[key] = val;\n          }\n        } else if (!recursion && key === 'type' || !recursion && key === 'key' || !recursion && key === 'label' || !recursion && key === 'input' || !recursion && key === 'tableView' || val !== '' && !defaultSchema.hasOwnProperty(key) || val !== '' && val !== defaultSchema[key]) {\n          modified[key] = val;\n        }\n      });\n\n      return modified;\n    }\n    /**\n     * Returns the JSON schema for this component.\n     */\n\n  }, {\n    key: \"schema\",\n    get: function get() {\n      return (0, FormioUtils.fastCloneDeep)(this.getModifiedSchema(_lodash.default.omit(this.component, 'id'), this.defaultSchema));\n    }\n    /**\n     * Returns true if component is inside DataGrid\n     */\n\n  }, {\n    key: \"isInDataGrid\",\n    get: function get() {\n      return this.inDataGrid;\n    }\n    /**\n     * Translate a text using the i18n system.\n     *\n     * @param {string} text - The i18n identifier.\n     * @param {Object} params - The i18n parameters to use for translation.\n     */\n\n  }, {\n    key: \"t\",\n    value: function t(text) {\n      var _get2;\n\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!text) {\n        return '';\n      } // Use _userInput: true to ignore translations from defaults\n\n\n      if (text in _en.default && params._userInput) {\n        return text;\n      }\n\n      params.data = this.rootValue;\n      params.row = this.data;\n      params.component = this.component;\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        args[_key3 - 2] = arguments[_key3];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(Component.prototype), \"t\", this)).call.apply(_get2, [this, text, params].concat(args));\n    }\n  }, {\n    key: \"labelIsHidden\",\n    value: function labelIsHidden() {\n      return !this.component.label || (!this.isInDataGrid && this.component.hideLabel || this.isInDataGrid && !this.component.dataGridLabel || this.options.inputsOnly) && !this.builderMode;\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return _Templates.default.current.hasOwnProperty('transform') ? _Templates.default.current.transform.bind(_Templates.default.current) : function (type, value) {\n        return value;\n      };\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function getTemplate(names, modes) {\n      modes = Array.isArray(modes) ? modes : [modes];\n      names = Array.isArray(names) ? names : [names];\n\n      if (!modes.includes('form')) {\n        modes.push('form');\n      }\n\n      var result = null;\n\n      if (this.options.templates) {\n        result = this.checkTemplate(this.options.templates, names, modes);\n\n        if (result) {\n          return result;\n        }\n      }\n\n      var frameworkTemplates = this.options.template ? _Templates.default.templates[this.options.template] : _Templates.default.current;\n      result = this.checkTemplate(frameworkTemplates, names, modes);\n\n      if (result) {\n        return result;\n      } // Default back to bootstrap if not defined.\n\n\n      var name = names[names.length - 1];\n      var templatesByName = _Templates.default.defaultTemplates[name];\n\n      if (!templatesByName) {\n        return \"Unknown template: \".concat(name);\n      }\n\n      var templateByMode = this.checkTemplateMode(templatesByName, modes);\n\n      if (templateByMode) {\n        return templateByMode;\n      }\n\n      return templatesByName.form;\n    }\n  }, {\n    key: \"checkTemplate\",\n    value: function checkTemplate(templates, names, modes) {\n      var _iterator = _createForOfIteratorHelper(names),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var name = _step.value;\n          var templatesByName = templates[name];\n\n          if (templatesByName) {\n            var templateByMode = this.checkTemplateMode(templatesByName, modes);\n\n            if (templateByMode) {\n              return templateByMode;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"checkTemplateMode\",\n    value: function checkTemplateMode(templatesByName, modes) {\n      var _iterator2 = _createForOfIteratorHelper(modes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var mode = _step2.value;\n          var templateByMode = templatesByName[mode];\n\n          if (templateByMode) {\n            return templateByMode;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFormattedTooltip\",\n    value: function getFormattedTooltip(tooltipValue) {\n      var tooltip = this.interpolate(tooltipValue || '').replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n      return tooltip ? this.t(tooltip, {\n        _userInput: true\n      }) : '';\n    }\n  }, {\n    key: \"isHtmlRenderMode\",\n    value: function isHtmlRenderMode() {\n      return this.options.renderMode === 'html';\n    }\n  }, {\n    key: \"renderTemplate\",\n    value: function renderTemplate(name) {\n      var _this4 = this;\n\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var modeOption = arguments.length > 2 ? arguments[2] : undefined; // Need to make this fall back to form if renderMode is not found similar to how we search templates.\n\n      var mode = modeOption || this.options.renderMode || 'form';\n      data.component = this.component;\n      data.self = this;\n      data.options = this.options;\n      data.readOnly = this.options.readOnly;\n      data.iconClass = this.iconClass.bind(this);\n      data.size = this.size.bind(this);\n      data.t = this.t.bind(this);\n      data.transform = this.transform;\n      data.id = data.id || this.id;\n      data.key = data.key || this.key;\n      data.value = data.value || this.dataValue;\n      data.disabled = this.disabled;\n      data.builder = this.builderMode;\n\n      data.render = function () {\n        console.warn(\"Form.io 'render' template function is deprecated.\\n      If you need to render template (template A) inside of another template (template B),\\n      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B\");\n        return _this4.renderTemplate.apply(_this4, arguments);\n      };\n\n      data.label = this.labelInfo;\n      data.tooltip = this.getFormattedTooltip(this.component.tooltip); // Allow more specific template names\n\n      var names = [\"\".concat(name, \"-\").concat(this.component.type, \"-\").concat(this.key), \"\".concat(name, \"-\").concat(this.component.type), \"\".concat(name, \"-\").concat(this.key), \"\".concat(name)]; // Allow template alters.\n\n      return this.hook(\"render\".concat(name.charAt(0).toUpperCase() + name.substring(1, name.length)), this.interpolate(this.getTemplate(names, mode), data), data, mode);\n    }\n    /**\n     * Sanitize an html string.\n     *\n     * @param string\n     * @returns {*}\n     */\n\n  }, {\n    key: \"sanitize\",\n    value: function sanitize(dirty) {\n      // No need to sanitize when generating PDF'S since no users interact with the form.\n      if (this.options.pdf) {\n        return dirty;\n      }\n\n      return FormioUtils.sanitize(dirty, this.options);\n    }\n    /**\n     * Render a template string into html.\n     *\n     * @param template\n     * @param data\n     * @param actions\n     *\n     * @return {HTMLElement} - The created element.\n     */\n\n  }, {\n    key: \"renderString\",\n    value: function renderString(template, data) {\n      if (!template) {\n        return '';\n      } // Interpolate the template and populate\n\n\n      return this.interpolate(template, data);\n    }\n  }, {\n    key: \"performInputMapping\",\n    value: function performInputMapping(input) {\n      return input;\n    }\n  }, {\n    key: \"widget\",\n    get: function get() {\n      var _this$root;\n\n      var settings = this.component.widget;\n\n      if (settings && (_this$root = this.root) !== null && _this$root !== void 0 && _this$root.shadowRoot) {\n        settings.shadowRoot = this.root.shadowRoot;\n      }\n\n      var widget = settings && _widgets.default[settings.type] ? new _widgets.default[settings.type](settings, this.component, this) : null;\n      return widget;\n    }\n  }, {\n    key: \"getBrowserLanguage\",\n    value: function getBrowserLanguage() {\n      var nav = window.navigator;\n      var browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\n      var language; // support for HTML 5.1 \"navigator.languages\"\n\n      if (Array.isArray(nav.languages)) {\n        for (var i = 0; i < nav.languages.length; i++) {\n          language = nav.languages[i];\n\n          if (language && language.length) {\n            return language.split(';')[0];\n          }\n        }\n      } // support for other well known properties in browsers\n\n\n      for (var _i = 0; _i < browserLanguagePropertyKeys.length; _i++) {\n        language = nav[browserLanguagePropertyKeys[_i]];\n\n        if (language && language.length) {\n          return language.split(';')[0];\n        }\n      }\n\n      return null;\n    }\n    /**\n     * Called before a next and previous page is triggered allowing the components\n     * to perform special functions.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"beforePage\",\n    value: function beforePage() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n  }, {\n    key: \"beforeNext\",\n    value: function beforeNext() {\n      return this.beforePage(true);\n    }\n    /**\n     * Called before a submission is triggered allowing the components\n     * to perform special async functions.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"beforeSubmit\",\n    value: function beforeSubmit() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n    /**\n     * Return the submission timezone.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"submissionTimezone\",\n    get: function get() {\n      this.options.submissionTimezone = this.options.submissionTimezone || _lodash.default.get(this.root, 'options.submissionTimezone');\n      return this.options.submissionTimezone;\n    }\n  }, {\n    key: \"loadRefs\",\n    value: function loadRefs(element, refs) {\n      for (var ref in refs) {\n        if (refs[ref] === 'single') {\n          this.refs[ref] = element.querySelector(\"[ref=\\\"\".concat(ref, \"\\\"]\"));\n        } else {\n          this.refs[ref] = element.querySelectorAll(\"[ref=\\\"\".concat(ref, \"\\\"]\"));\n        }\n      }\n    }\n  }, {\n    key: \"setOpenModalElement\",\n    value: function setOpenModalElement() {\n      this.componentModal.setOpenModalElement(this.getModalPreviewTemplate());\n    }\n  }, {\n    key: \"getModalPreviewTemplate\",\n    value: function getModalPreviewTemplate() {\n      var dataValue = this.component.type === 'password' ? this.dataValue.replace(/./g, '•') : this.dataValue;\n      var message = this.error ? {\n        level: 'error',\n        message: this.error.message\n      } : '';\n      return this.renderTemplate('modalPreview', {\n        previewText: this.getValueAsString(dataValue, {\n          modalPreview: true\n        }) || this.t('Click to set value'),\n        messages: message && this.renderTemplate('message', message)\n      });\n    }\n  }, {\n    key: \"build\",\n    value: function build(element) {\n      element = element || this.element;\n      this.empty(element);\n      this.setContent(element, this.render());\n      return this.attach(element);\n    }\n  }, {\n    key: \"hasModalSaveButton\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Unknown component: \".concat(this.component.type);\n      var topLevel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isVisible = this.visible;\n      this.rendered = true;\n\n      if (!this.builderMode && this.component.modalEdit) {\n        return _ComponentModal.default.render(this, {\n          visible: isVisible,\n          showSaveButton: this.hasModalSaveButton,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      } else {\n        return this.renderTemplate('component', {\n          visible: isVisible,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      }\n    }\n  }, {\n    key: \"attachTooltips\",\n    value: function attachTooltips(toolTipsRefs) {\n      var _this5 = this;\n\n      toolTipsRefs === null || toolTipsRefs === void 0 ? void 0 : toolTipsRefs.forEach(function (tooltip, index) {\n        if (tooltip) {\n          var tooltipAttribute = tooltip.getAttribute('data-tooltip');\n          var tooltipDataTitle = tooltip.getAttribute('data-title');\n\n          var tooltipText = _this5.interpolate(tooltipDataTitle || tooltipAttribute).replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n\n          _this5.tooltips[index] = new _tooltip.default(tooltip, {\n            trigger: 'hover click focus',\n            placement: 'right',\n            html: true,\n            title: _this5.t(tooltipText, {\n              _userInput: true\n            }),\n            template: \"\\n            <div class=\\\"tooltip\\\" style=\\\"opacity: 1;\\\" role=\\\"tooltip\\\">\\n              <div class=\\\"tooltip-arrow\\\"></div>\\n              <div class=\\\"tooltip-inner\\\"></div>\\n            </div>\"\n          });\n        }\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (!this.builderMode && this.component.modalEdit) {\n        var modalShouldBeOpened = this.componentModal ? this.componentModal.isOpened : false;\n        var currentValue = modalShouldBeOpened ? this.componentModal.currentValue : this.dataValue;\n        this.componentModal = new _ComponentModal.default(this, element, modalShouldBeOpened, currentValue);\n        this.setOpenModalElement();\n      }\n\n      this.attached = true;\n      this.element = element;\n      element.component = this; // If this already has an id, get it from the dom. If SSR, it could be different from the initiated id.\n\n      if (this.element.id) {\n        this.id = this.element.id;\n        this.component.id = this.id;\n      }\n\n      this.loadRefs(element, {\n        messageContainer: 'single',\n        tooltip: 'multiple'\n      });\n      this.attachTooltips(this.refs.tooltip); // Attach logic.\n\n      this.attachLogic();\n      this.autofocus(); // Allow global attach.\n\n      this.hook('attachComponent', element, this); // Allow attach per component type.\n\n      var type = this.component.type;\n\n      if (type) {\n        this.hook(\"attach\".concat(type.charAt(0).toUpperCase() + type.substring(1, type.length)), element, this);\n      }\n\n      this.restoreFocus();\n      return _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"restoreFocus\",\n    value: function restoreFocus() {\n      var _this$root2, _this$root2$focusedCo;\n\n      var isFocused = ((_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : (_this$root2$focusedCo = _this$root2.focusedComponent) === null || _this$root2$focusedCo === void 0 ? void 0 : _this$root2$focusedCo.path) === this.path;\n\n      if (isFocused) {\n        var _this$root$currentSel;\n\n        this.loadRefs(this.element, {\n          input: 'multiple'\n        });\n        this.focus((_this$root$currentSel = this.root.currentSelection) === null || _this$root$currentSel === void 0 ? void 0 : _this$root$currentSel.index);\n        this.restoreCaretPosition();\n      }\n    }\n  }, {\n    key: \"addShortcut\",\n    value: function addShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || !this.root || this.root === this) {\n        return;\n      }\n\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n\n      this.root.addShortcut(element, shortcut);\n    }\n  }, {\n    key: \"removeShortcut\",\n    value: function removeShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || this.root === this) {\n        return;\n      }\n\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n\n      this.root.removeShortcut(element, shortcut);\n    }\n    /**\n     * Remove all event handlers.\n     */\n\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.refs = {};\n      this.removeEventListeners();\n      this.detachLogic();\n\n      if (this.tooltip) {\n        this.tooltip.dispose();\n      }\n    }\n  }, {\n    key: \"checkRefresh\",\n    value: function checkRefresh(refreshData, changed, flags) {\n      var changePath = _lodash.default.get(changed, 'instance.path', false); // Don't let components change themselves.\n\n\n      if (changePath && this.path === changePath) {\n        return;\n      }\n\n      if (refreshData === 'data') {\n        this.refresh(this.data, changed, flags);\n      } else if (changePath && (0, FormioUtils.getComponentPath)(changed.instance) === refreshData && changed && changed.instance && // Make sure the changed component is not in a different \"context\". Solves issues where refreshOn being set\n      // in fields inside EditGrids could alter their state from other rows (which is bad).\n      this.inContext(changed.instance)) {\n        this.refresh(changed.value, changed, flags);\n      }\n    }\n  }, {\n    key: \"checkRefreshOn\",\n    value: function checkRefreshOn(changes) {\n      var _this6 = this;\n\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      changes = changes || [];\n\n      if (flags.noRefresh) {\n        return;\n      }\n\n      if (!changes.length && flags.changed) {\n        changes = [flags.changed];\n      }\n\n      var refreshOn = flags.fromBlur ? this.component.refreshOnBlur : this.component.refreshOn || this.component.redrawOn; // If they wish to refresh on a value, then add that here.\n\n      if (refreshOn) {\n        if (Array.isArray(refreshOn)) {\n          refreshOn.forEach(function (refreshData) {\n            return changes.forEach(function (changed) {\n              return _this6.checkRefresh(refreshData, changed, flags);\n            });\n          });\n        } else {\n          changes.forEach(function (changed) {\n            return _this6.checkRefresh(refreshOn, changed, flags);\n          });\n        }\n      }\n    }\n    /**\n     * Refreshes the component with a new value.\n     *\n     * @param value\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh(value) {\n      if (this.hasOwnProperty('refreshOnValue')) {\n        this.refreshOnChanged = !_lodash.default.isEqual(value, this.refreshOnValue);\n      } else {\n        this.refreshOnChanged = true;\n      }\n\n      this.refreshOnValue = (0, FormioUtils.fastCloneDeep)(value);\n\n      if (this.refreshOnChanged) {\n        if (this.component.clearOnRefresh) {\n          this.setValue(null);\n        }\n\n        this.triggerRedraw();\n      }\n    }\n    /**\n     * Checks to see if a separate component is in the \"context\" of this component. This is determined by first checking\n     * if they share the same \"data\" object. It will then walk up the parent tree and compare its parents data objects\n     * with the components data and returns true if they are in the same context.\n     *\n     * Different rows of the same EditGrid, for example, are in different contexts.\n     *\n     * @param component\n     */\n\n  }, {\n    key: \"inContext\",\n    value: function inContext(component) {\n      if (component.data === this.data) {\n        return true;\n      }\n\n      var parent = this.parent;\n\n      while (parent) {\n        if (parent.data === component.data) {\n          return true;\n        }\n\n        parent = parent.parent;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"viewOnly\",\n    get: function get() {\n      return this.options.readOnly && this.options.viewAsHtml;\n    }\n  }, {\n    key: \"createViewOnlyElement\",\n    value: function createViewOnlyElement() {\n      this.element = this.ce('dl', {\n        id: this.id\n      });\n\n      if (this.element) {\n        // Ensure you can get the component info from the element.\n        this.element.component = this;\n      }\n\n      return this.element;\n    }\n  }, {\n    key: \"defaultViewOnlyValue\",\n    get: function get() {\n      return '-';\n    }\n    /**\n     * Uses the widget to determine the output string.\n     *\n     * @param value\n     * @return {*}\n     */\n\n  }, {\n    key: \"getWidgetValueAsString\",\n    value: function getWidgetValueAsString(value, options) {\n      var _this7 = this;\n\n      var noInputWidget = !this.refs.input || !this.refs.input[0] || !this.refs.input[0].widget;\n\n      if (!value || noInputWidget) {\n        if (!this.widget || !value) {\n          return value;\n        } else {\n          return this.widget.getValueAsString(value);\n        }\n      }\n\n      if (Array.isArray(value)) {\n        var values = [];\n        value.forEach(function (val, index) {\n          var widget = _this7.refs.input[index] && _this7.refs.input[index].widget;\n\n          if (widget) {\n            values.push(widget.getValueAsString(val, options));\n          }\n        });\n        return values;\n      }\n\n      var widget = this.refs.input[0].widget;\n      return widget.getValueAsString(value, options);\n    }\n  }, {\n    key: \"getValueAsString\",\n    value: function getValueAsString(value, options) {\n      if (!value) {\n        return '';\n      }\n\n      value = this.getWidgetValueAsString(value, options);\n\n      if (Array.isArray(value)) {\n        return value.join(', ');\n      }\n\n      if (_lodash.default.isPlainObject(value)) {\n        return JSON.stringify(value);\n      }\n\n      if (value === null || value === undefined) {\n        return '';\n      }\n\n      var stringValue = value.toString();\n      return this.sanitize(stringValue);\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(value, options) {\n      if (this.component.protected) {\n        return '--- PROTECTED ---';\n      }\n\n      return this.getValueAsString(value, options);\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      this.restoreValue();\n      this.onChange.apply(this, arguments);\n    }\n    /**\n     * @param {*} data\n     * @param {boolean} [forceUseValue=false] - if true, return 'value' property of the data\n     * @return {*}\n     */\n\n  }, {\n    key: \"itemValue\",\n    value: function itemValue(data) {\n      var forceUseValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (_lodash.default.isObject(data)) {\n        if (this.valueProperty) {\n          return _lodash.default.get(data, this.valueProperty);\n        }\n\n        if (forceUseValue) {\n          return data.value;\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"itemValueForHTMLMode\",\n    value: function itemValueForHTMLMode(value) {\n      var _this8 = this;\n\n      if (Array.isArray(value)) {\n        var values = value.map(function (item) {\n          return Array.isArray(item) ? _this8.itemValueForHTMLMode(item) : _this8.itemValue(item);\n        });\n        return values.join(', ');\n      }\n\n      return this.itemValue(value);\n    }\n  }, {\n    key: \"createModal\",\n    value: function createModal(element, attr, confirm) {\n      var _this9 = this;\n\n      var dialog = this.ce('div', attr || {});\n      this.setContent(dialog, this.renderTemplate('dialog')); // Add refs to dialog, not \"this\".\n\n      dialog.refs = {};\n      this.loadRefs.call(dialog, dialog, {\n        dialogOverlay: 'single',\n        dialogContents: 'single',\n        dialogClose: 'single'\n      });\n      dialog.refs.dialogContents.appendChild(element);\n      document.body.appendChild(dialog);\n      document.body.classList.add('modal-open');\n\n      dialog.close = function () {\n        document.body.classList.remove('modal-open');\n        dialog.dispatchEvent(new CustomEvent('close'));\n      };\n\n      this.addEventListener(dialog, 'close', function () {\n        return _this9.removeChildFrom(dialog, document.body);\n      });\n\n      var close = function close(event) {\n        event.preventDefault();\n        dialog.close();\n      };\n\n      var handleCloseClick = function handleCloseClick(e) {\n        if (confirm) {\n          confirm().then(function () {\n            return close(e);\n          }).catch(function () {});\n        } else {\n          close(e);\n        }\n      };\n\n      this.addEventListener(dialog.refs.dialogOverlay, 'click', handleCloseClick);\n      this.addEventListener(dialog.refs.dialogClose, 'click', handleCloseClick);\n      return dialog;\n    }\n    /**\n     * Retrieves the CSS class name of this component.\n     * @returns {string} - The class name of this component.\n     */\n\n  }, {\n    key: \"className\",\n    get: function get() {\n      var className = this.hasInput ? 'form-group has-feedback ' : '';\n      className += \"formio-component formio-component-\".concat(this.component.type, \" \"); // TODO: find proper way to avoid overriding of default type-based component styles\n\n      if (this.key && this.key !== 'form') {\n        className += \"formio-component-\".concat(this.key, \" \");\n      }\n\n      if (this.component.multiple) {\n        className += 'formio-component-multiple ';\n      }\n\n      if (this.component.customClass) {\n        className += this.component.customClass;\n      }\n\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required)) {\n        className += ' required';\n      }\n\n      if (this.labelIsHidden()) {\n        className += ' formio-component-label-hidden';\n      }\n\n      if (!this.visible) {\n        className += ' formio-hidden';\n      }\n\n      return className;\n    }\n    /**\n     * Build the custom style from the layout values\n     * @return {string} - The custom style\n     */\n\n  }, {\n    key: \"customStyle\",\n    get: function get() {\n      var customCSS = '';\n\n      _lodash.default.each(this.component.style, function (value, key) {\n        if (value !== '') {\n          customCSS += \"\".concat(key, \":\").concat(value, \";\");\n        }\n      });\n\n      return customCSS;\n    }\n  }, {\n    key: \"isMobile\",\n    get: function get() {\n      return (0, _ismobilejs.default)();\n    }\n    /**\n     * Returns the outside wrapping element of this component.\n     * @returns {HTMLElement}\n     */\n\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.element;\n    }\n    /**\n     * Create an evaluation context for all script executions and interpolations.\n     *\n     * @param additional\n     * @return {*}\n     */\n\n  }, {\n    key: \"evalContext\",\n    value: function evalContext(additional) {\n      return _get(_getPrototypeOf(Component.prototype), \"evalContext\", this).call(this, Object.assign({\n        component: this.component,\n        row: this.data,\n        rowIndex: this.rowIndex,\n        data: this.rootValue,\n        iconClass: this.iconClass.bind(this),\n        // Bind the translate function to the data context of any interpolated string.\n        // It is useful to translate strings in different scenarions (eg: custom edit grid templates, custom error messages etc.)\n        // and desirable to be publicly available rather than calling the internal {instance.t} function in the template string.\n        t: this.t.bind(this),\n        submission: this.root ? this.root._submission : {\n          data: this.rootValue\n        },\n        form: this.root ? this.root._form : {}\n      }, additional));\n    }\n    /**\n     * Sets the pristine flag for this component.\n     *\n     * @param pristine {boolean} - TRUE to make pristine, FALSE not pristine.\n     */\n\n  }, {\n    key: \"setPristine\",\n    value: function setPristine(pristine) {\n      this.pristine = pristine;\n    }\n  }, {\n    key: \"isPristine\",\n    get: function get() {\n      return this.pristine;\n    }\n  }, {\n    key: \"setDirty\",\n    value: function setDirty(dirty) {\n      this.dirty = dirty;\n    }\n  }, {\n    key: \"isDirty\",\n    get: function get() {\n      return this.dirty;\n    }\n    /**\n     * Removes a value out of the data array and rebuild the rows.\n     * @param {number} index - The index of the data element to remove.\n     */\n\n  }, {\n    key: \"removeValue\",\n    value: function removeValue(index) {\n      this.splice(index);\n      this.redraw();\n      this.restoreValue();\n      this.triggerRootChange();\n    }\n  }, {\n    key: \"iconClass\",\n    value: function iconClass(name, spinning) {\n      var iconset = this.options.iconset || _Templates.default.current.defaultIconset || 'fa';\n      return _Templates.default.current.hasOwnProperty('iconClass') ? _Templates.default.current.iconClass(iconset, name, spinning) : this.options.iconset === 'fa' ? _Templates.default.defaultTemplates.iconClass(iconset, name, spinning) : name;\n    }\n  }, {\n    key: \"size\",\n    value: function size(_size) {\n      return _Templates.default.current.hasOwnProperty('size') ? _Templates.default.current.size(_size) : _size;\n    }\n    /**\n     * The readible name for this component.\n     * @returns {string} - The name of the component.\n     */\n\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this.t(this.component.label || this.component.placeholder || this.key, {\n        _userInput: true\n      });\n    }\n    /**\n     * Returns the error label for this component.\n     * @return {*}\n     */\n\n  }, {\n    key: \"errorLabel\",\n    get: function get() {\n      return this.t(this.component.errorLabel || this.component.label || this.component.placeholder || this.key);\n    }\n    /**\n     * Get the error message provided a certain type of error.\n     * @param type\n     * @return {*}\n     */\n\n  }, {\n    key: \"errorMessage\",\n    value: function errorMessage(type) {\n      return this.component.errors && this.component.errors[type] ? this.component.errors[type] : type;\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(element, content) {\n      if (element instanceof HTMLElement) {\n        element.innerHTML = this.sanitize(content);\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"restoreCaretPosition\",\n    value: function restoreCaretPosition() {\n      var _this$root3;\n\n      if ((_this$root3 = this.root) !== null && _this$root3 !== void 0 && _this$root3.currentSelection) {\n        var _this$refs$input;\n\n        if ((_this$refs$input = this.refs.input) !== null && _this$refs$input !== void 0 && _this$refs$input.length) {\n          var _this$root$currentSel2 = this.root.currentSelection,\n              selection = _this$root$currentSel2.selection,\n              index = _this$root$currentSel2.index;\n          var input = this.refs.input[index];\n          var isInputRangeSelectable = /text|search|password|tel|url/i.test(input.type || '');\n\n          if (input) {\n            if (isInputRangeSelectable) {\n              var _input;\n\n              (_input = input).setSelectionRange.apply(_input, _toConsumableArray(selection));\n            }\n          } else {\n            var _input$value;\n\n            input = this.refs.input[this.refs.input.length];\n            var lastCharacter = ((_input$value = input.value) === null || _input$value === void 0 ? void 0 : _input$value.length) || 0;\n\n            if (isInputRangeSelectable) {\n              input.setSelectionRange(lastCharacter, lastCharacter);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      // Don't bother if we have not built yet.\n      if (!this.element || !this.element.parentNode) {\n        // Return a non-resolving promise.\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      this.detach();\n      this.emit('redraw'); // Since we are going to replace the element, we need to know it's position so we can find it in the parent's children.\n\n      var parent = this.element.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, this.element);\n      this.element.outerHTML = this.sanitize(this.render());\n      this.element = parent.children[index];\n      return this.attach(this.element);\n    }\n  }, {\n    key: \"rebuild\",\n    value: function rebuild() {\n      this.destroy();\n      this.init();\n      this.visible = this.conditionallyVisible(null, null);\n      return this.redraw();\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      _get(_getPrototypeOf(Component.prototype), \"removeEventListeners\", this).call(this);\n\n      this.tooltips.forEach(function (tooltip) {\n        return tooltip.dispose();\n      });\n      this.tooltips = [];\n    }\n  }, {\n    key: \"hasClass\",\n    value: function hasClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"hasClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"addClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"removeClass\", this).call(this, element, this.transform('class', className));\n    }\n    /**\n     * Determines if this component has a condition defined.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"hasCondition\",\n    value: function hasCondition() {\n      if (this._hasCondition !== null) {\n        return this._hasCondition;\n      }\n\n      this._hasCondition = FormioUtils.hasCondition(this.component);\n      return this._hasCondition;\n    }\n    /**\n     * Check if this component is conditionally visible.\n     *\n     * @param data\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"conditionallyVisible\",\n    value: function conditionallyVisible(data, row) {\n      data = data || this.rootValue;\n      row = row || this.data;\n\n      if (this.builderMode || !this.hasCondition()) {\n        return !this.component.hidden;\n      }\n\n      data = data || (this.root ? this.root.data : {});\n      return this.checkCondition(row, data);\n    }\n    /**\n     * Checks the condition of this component.\n     *\n     * TODO: Switch row and data parameters to be consistent with other methods.\n     *\n     * @param row - The row contextual data.\n     * @param data - The global data object.\n     * @return {boolean} - True if the condition applies to this component.\n     */\n\n  }, {\n    key: \"checkCondition\",\n    value: function checkCondition(row, data) {\n      return FormioUtils.checkCondition(this.component, row || this.data, data || this.rootValue, this.root ? this.root._form : {}, this);\n    }\n    /**\n     * Check for conditionals and hide/show the element based on those conditions.\n     */\n\n  }, {\n    key: \"checkComponentConditions\",\n    value: function checkComponentConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n\n      if (!this.builderMode && this.fieldLogic(data, row)) {\n        this.redraw();\n      } // Check advanced conditions\n\n\n      var visible = this.conditionallyVisible(data, row);\n\n      if (this.visible !== visible) {\n        this.visible = visible;\n      }\n\n      return visible;\n    }\n    /**\n     * Checks conditions for this component and any sub components.\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"checkConditions\",\n    value: function checkConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.checkComponentConditions(data, flags, row);\n    }\n  }, {\n    key: \"logic\",\n    get: function get() {\n      return this.component.logic || [];\n    }\n    /**\n     * Check all triggers and apply necessary actions.\n     *\n     * @param data\n     */\n\n  }, {\n    key: \"fieldLogic\",\n    value: function fieldLogic(data, row) {\n      var _this10 = this;\n\n      data = data || this.rootValue;\n      row = row || this.data;\n      var logics = this.logic; // If there aren't logic, don't go further.\n\n      if (logics.length === 0) {\n        return;\n      }\n\n      var newComponent = (0, FormioUtils.fastCloneDeep)(this.originalComponent);\n      var changed = logics.reduce(function (changed, logic) {\n        var result = FormioUtils.checkTrigger(newComponent, logic.trigger, row, data, _this10.root ? _this10.root._form : {}, _this10);\n        return (result ? _this10.applyActions(newComponent, logic.actions, result, row, data) : false) || changed;\n      }, false); // If component definition changed, replace and mark as changed.\n\n      if (!_lodash.default.isEqual(this.component, newComponent)) {\n        this.component = newComponent;\n        changed = true;\n        var disabled = this.shouldDisabled; // Change disabled state if it has changed\n\n        if (this.disabled !== disabled) {\n          this.disabled = disabled;\n        }\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"isIE\",\n    value: function isIE() {\n      if (typeof window === 'undefined') {\n        return false;\n      }\n\n      var userAgent = window.navigator.userAgent;\n      var msie = userAgent.indexOf('MSIE ');\n\n      if (msie > 0) {\n        // IE 10 or older => return version number\n        return parseInt(userAgent.substring(msie + 5, userAgent.indexOf('.', msie)), 10);\n      }\n\n      var trident = userAgent.indexOf('Trident/');\n\n      if (trident > 0) {\n        // IE 11 => return version number\n        var rv = userAgent.indexOf('rv:');\n        return parseInt(userAgent.substring(rv + 3, userAgent.indexOf('.', rv)), 10);\n      }\n\n      var edge = userAgent.indexOf('Edge/');\n\n      if (edge > 0) {\n        // IE 12 (aka Edge) => return version number\n        return parseInt(userAgent.substring(edge + 5, userAgent.indexOf('.', edge)), 10);\n      } // other browser\n\n\n      return false;\n    }\n  }, {\n    key: \"applyActions\",\n    value: function applyActions(newComponent, actions, result, row, data) {\n      var _this11 = this;\n\n      data = data || this.rootValue;\n      row = row || this.data;\n      return actions.reduce(function (changed, action) {\n        switch (action.type) {\n          case 'property':\n            {\n              FormioUtils.setActionProperty(newComponent, action, result, row, data, _this11);\n              var property = action.property.value;\n\n              if (!_lodash.default.isEqual(_lodash.default.get(_this11.component, property), _lodash.default.get(newComponent, property))) {\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'value':\n            {\n              var oldValue = _this11.getValue();\n\n              var newValue = _this11.evaluate(action.value, {\n                value: _lodash.default.clone(oldValue),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              }, 'value');\n\n              if (!_lodash.default.isEqual(oldValue, newValue)) {\n                _this11.setValue(newValue);\n\n                if (_this11.viewOnly) {\n                  _this11.dataValue = newValue;\n                }\n\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'mergeComponentSchema':\n            {\n              var schema = _this11.evaluate(action.schemaDefinition, {\n                value: _lodash.default.clone(_this11.getValue()),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              }, 'schema');\n\n              _lodash.default.assign(newComponent, schema);\n\n              if (!_lodash.default.isEqual(_this11.component, newComponent)) {\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'customAction':\n            {\n              var _oldValue = _this11.getValue();\n\n              var _newValue = _this11.evaluate(action.customAction, {\n                value: _lodash.default.clone(_oldValue),\n                data: data,\n                row: row,\n                input: _oldValue,\n                component: newComponent,\n                result: result\n              }, 'value');\n\n              if (!_lodash.default.isEqual(_oldValue, _newValue)) {\n                _this11.setValue(_newValue);\n\n                if (_this11.viewOnly) {\n                  _this11.dataValue = _newValue;\n                }\n\n                changed = true;\n              }\n\n              break;\n            }\n        }\n\n        return changed;\n      }, false);\n    } // Deprecated\n\n  }, {\n    key: \"addInputError\",\n    value: function addInputError(message, dirty, elements) {\n      this.addMessages(message);\n      this.setErrorClasses(elements, dirty, !!message);\n    } // Deprecated\n\n  }, {\n    key: \"removeInputError\",\n    value: function removeInputError(elements) {\n      this.setErrorClasses(elements, true, false);\n    }\n    /**\n     * Add a new input error to this element.\n     *\n     * @param message\n     * @param dirty\n     */\n\n  }, {\n    key: \"addMessages\",\n    value: function addMessages(messages) {\n      var _this12 = this;\n\n      if (!messages) {\n        return;\n      } // Standardize on array of objects for message.\n\n\n      if (typeof messages === 'string') {\n        messages = {\n          messages: messages,\n          level: 'error'\n        };\n      }\n\n      if (!Array.isArray(messages)) {\n        messages = [messages];\n      }\n\n      messages = _lodash.default.uniqBy(messages, function (message) {\n        return message.message;\n      });\n\n      if (this.refs.messageContainer) {\n        this.setContent(this.refs.messageContainer, messages.map(function (message) {\n          return _this12.renderTemplate('message', message);\n        }).join(''));\n      }\n    }\n  }, {\n    key: \"setErrorClasses\",\n    value: function setErrorClasses(elements, dirty, hasErrors, hasMessages) {\n      var _this13 = this;\n\n      var element = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.element;\n      this.clearErrorClasses();\n      elements.forEach(function (element) {\n        return _this13.removeClass(_this13.performInputMapping(element), 'is-invalid');\n      });\n      this.setInputWidgetErrorClasses(elements, hasErrors);\n\n      if (hasErrors) {\n        // Add error classes\n        elements.forEach(function (input) {\n          return _this13.addClass(_this13.performInputMapping(input), 'is-invalid');\n        });\n\n        if (dirty && this.options.highlightErrors) {\n          this.addClass(element, this.options.componentErrorClass);\n        } else {\n          this.addClass(element, 'has-error');\n        }\n      }\n\n      if (hasMessages) {\n        this.addClass(element, 'has-message');\n      }\n    }\n  }, {\n    key: \"clearOnHide\",\n    value: function clearOnHide() {\n      var _getDataParentCompone; // clearOnHide defaults to true for old forms (without the value set) so only trigger if the value is false.\n\n\n      if ( // if change happens inside EditGrid's row, it doesn't trigger change on the root level, so rootPristine will be true\n      (!this.rootPristine || (_getDataParentCompone = (0, FormioUtils.getDataParentComponent)(this)) !== null && _getDataParentCompone !== void 0 && _getDataParentCompone.hasScopedChildren) && this.component.clearOnHide !== false && !this.options.readOnly && !this.options.showHiddenFields) {\n        if (!this.visible) {\n          this.deleteValue();\n        } else if (!this.hasValue()) {\n          // If shown, ensure the default is set.\n          this.setValue(this.defaultValue, {\n            noUpdateEvent: true\n          });\n        }\n      }\n    }\n  }, {\n    key: \"triggerRootChange\",\n    value: function triggerRootChange() {\n      if (this.options.onChange) {\n        var _this$options;\n\n        (_this$options = this.options).onChange.apply(_this$options, arguments);\n      } else if (this.root) {\n        var _this$root4;\n\n        (_this$root4 = this.root).triggerChange.apply(_this$root4, arguments);\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, fromRoot) {\n      flags = flags || {};\n\n      if (flags.modified) {\n        if (!flags.noPristineChangeOnModified) {\n          this.pristine = false;\n        }\n\n        this.addClass(this.getElement(), 'formio-modified');\n      } // If we are supposed to validate on blur, then don't trigger validation yet.\n\n\n      if (this.component.validateOn === 'blur' && !this.errors.length) {\n        flags.noValidate = true;\n      }\n\n      if (this.component.onChange) {\n        this.evaluate(this.component.onChange, {\n          flags: flags\n        });\n      } // Set the changed variable.\n\n\n      var changed = {\n        instance: this,\n        component: this.component,\n        value: this.dataValue,\n        flags: flags\n      }; // Emit the change.\n\n      this.emit('componentChange', changed); // Do not propogate the modified flag.\n\n      var modified = false;\n\n      if (flags.modified) {\n        modified = true;\n        delete flags.modified;\n      } // Bubble this change up to the top.\n\n\n      if (!fromRoot) {\n        this.triggerRootChange(flags, changed, modified);\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"wysiwygDefault\",\n    get: function get() {\n      return {\n        quill: {\n          theme: 'snow',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          }),\n          modules: {\n            toolbar: [[{\n              'size': ['small', false, 'large', 'huge']\n            }], // custom dropdown\n            [{\n              'header': [1, 2, 3, 4, 5, 6, false]\n            }], [{\n              'font': []\n            }], ['bold', 'italic', 'underline', 'strike', {\n              'script': 'sub'\n            }, {\n              'script': 'super'\n            }, 'clean'], [{\n              'color': []\n            }, {\n              'background': []\n            }], [{\n              'list': 'ordered'\n            }, {\n              'list': 'bullet'\n            }, {\n              'indent': '-1'\n            }, {\n              'indent': '+1'\n            }, {\n              'align': []\n            }], ['blockquote', 'code-block'], ['link', 'image', 'video', 'formula', 'source']]\n          }\n        },\n        ace: {\n          theme: 'ace/theme/xcode',\n          maxLines: 12,\n          minLines: 12,\n          tabSize: 2,\n          mode: 'ace/mode/javascript',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          })\n        },\n        ckeditor: {\n          image: {\n            toolbar: ['imageTextAlternative', '|', 'imageStyle:full', 'imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight'],\n            styles: ['full', 'alignLeft', 'alignCenter', 'alignRight']\n          },\n          extraPlugins: []\n        },\n        default: {}\n      };\n    }\n  }, {\n    key: \"addCKE\",\n    value: function addCKE(element, settings, onChange) {\n      settings = _lodash.default.isEmpty(settings) ? {} : settings;\n      settings.base64Upload = this.component.isUploadEnabled ? false : true;\n      settings.mediaEmbed = {\n        previewsInData: true\n      };\n      settings = _lodash.default.merge(this.wysiwygDefault.ckeditor, _lodash.default.get(this.options, 'editors.ckeditor.settings', {}), settings);\n\n      if (this.component.isUploadEnabled) {\n        settings.extraPlugins.push((0, _uploadAdapter.getFormioUploadAdapterPlugin)(this.fileService, this));\n      }\n\n      return _Formio.default.requireLibrary('ckeditor', isIEBrowser ? 'CKEDITOR' : 'ClassicEditor', _lodash.default.get(this.options, 'editors.ckeditor.src', CKEDITOR_URL), true).then(function () {\n        if (!element.parentNode) {\n          return _nativePromiseOnly.default.reject();\n        }\n\n        if (isIEBrowser) {\n          var editor = CKEDITOR.replace(element);\n          editor.on('change', function () {\n            return onChange(editor.getData());\n          });\n          return _nativePromiseOnly.default.resolve(editor);\n        } else {\n          return ClassicEditor.create(element, settings).then(function (editor) {\n            editor.model.document.on('change', function () {\n              return onChange(editor.data.get());\n            });\n            return editor;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"addQuill\",\n    value: function addQuill(element, settings, onChange) {\n      var _this14 = this;\n\n      settings = _lodash.default.isEmpty(settings) ? this.wysiwygDefault.quill : settings;\n      settings = _lodash.default.merge(this.wysiwygDefault.quill, _lodash.default.get(this.options, 'editors.quill.settings', {}), settings);\n      settings = _objectSpread(_objectSpread({}, settings), {}, {\n        modules: {\n          table: true\n        }\n      }); // Lazy load the quill css.\n\n      _Formio.default.requireLibrary(\"quill-css-\".concat(settings.theme), 'Quill', [{\n        type: 'styles',\n        src: \"\".concat(QUILL_URL, \"/quill.\").concat(settings.theme, \".css\")\n      }], true); // Lazy load the quill library.\n\n\n      return _Formio.default.requireLibrary('quill', 'Quill', _lodash.default.get(this.options, 'editors.quill.src', \"\".concat(QUILL_URL, \"/quill.min.js\")), true).then(function () {\n        return _Formio.default.requireLibrary('quill-table', 'Quill', QUILL_TABLE_URL, true).then(function () {\n          if (!element.parentNode) {\n            return _nativePromiseOnly.default.reject();\n          }\n\n          _this14.quill = new Quill(element, isIEBrowser ? _objectSpread(_objectSpread({}, settings), {}, {\n            modules: {}\n          }) : settings);\n          /** This block of code adds the [source] capabilities.  See https://codepen.io/anon/pen/ZyEjrQ **/\n\n          var txtArea = document.createElement('textarea');\n          txtArea.setAttribute('class', 'quill-source-code');\n\n          _this14.quill.addContainer('ql-custom').appendChild(txtArea);\n\n          var qlSource = element.parentNode.querySelector('.ql-source');\n\n          if (qlSource) {\n            _this14.addEventListener(qlSource, 'click', function (event) {\n              event.preventDefault();\n\n              if (txtArea.style.display === 'inherit') {\n                _this14.quill.setContents(_this14.quill.clipboard.convert(txtArea.value));\n              }\n\n              txtArea.style.display = txtArea.style.display === 'none' ? 'inherit' : 'none';\n            });\n          }\n          /** END CODEBLOCK **/\n          // Make sure to select cursor when they click on the element.\n\n\n          _this14.addEventListener(element, 'click', function () {\n            return _this14.quill.focus();\n          }); // Allows users to skip toolbar items when tabbing though form\n\n\n          var elm = document.querySelectorAll('.ql-formats > button');\n\n          for (var i = 0; i < elm.length; i++) {\n            elm[i].setAttribute('tabindex', '-1');\n          }\n\n          _this14.quill.on('text-change', function () {\n            txtArea.value = _this14.quill.root.innerHTML;\n            onChange(txtArea);\n          });\n\n          return _this14.quill;\n        });\n      });\n    }\n  }, {\n    key: \"addAce\",\n    value: function addAce(element, settings, onChange) {\n      if (!settings || settings.theme === 'snow') {\n        var mode = settings ? settings.mode : '';\n        settings = {};\n\n        if (mode) {\n          settings.mode = mode;\n        }\n      }\n\n      settings = _lodash.default.merge(this.wysiwygDefault.ace, _lodash.default.get(this.options, 'editors.ace.settings', {}), settings || {});\n      return _Formio.default.requireLibrary('ace', 'ace', _lodash.default.get(this.options, 'editors.ace.src', ACE_URL), true).then(function (editor) {\n        editor = editor.edit(element);\n        editor.removeAllListeners('change');\n        editor.setOptions(settings);\n        editor.getSession().setMode(settings.mode);\n        editor.on('change', function () {\n          return onChange(editor.getValue());\n        });\n\n        if (settings.isUseWorkerDisabled) {\n          editor.session.setUseWorker(false);\n        }\n\n        return editor;\n      });\n    }\n  }, {\n    key: \"tree\",\n    get: function get() {\n      return this.component.tree || false;\n    }\n    /**\n     * The empty value for this component.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return null;\n    }\n    /**\n     * Returns if this component has a value set.\n     *\n     */\n\n  }, {\n    key: \"hasValue\",\n    value: function hasValue(data) {\n      return _lodash.default.has(data || this.data, this.key);\n    }\n    /**\n     * Get the data value at the root level.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"rootValue\",\n    get: function get() {\n      return this.root ? this.root.data : this.data;\n    }\n  }, {\n    key: \"rootPristine\",\n    get: function get() {\n      return _lodash.default.get(this, 'root.pristine', false);\n    }\n    /**\n     * Get the static value of this component.\n     * @return {*}\n     */\n\n  }, {\n    key: \"dataValue\",\n    get: function get() {\n      if (!this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return this.emptyValue;\n      }\n\n      if (!this.hasValue()) {\n        var empty = this.component.multiple ? [] : this.emptyValue;\n\n        if (!this.rootPristine) {\n          this.dataValue = empty;\n        }\n\n        return empty;\n      }\n\n      return _lodash.default.get(this._data, this.key);\n    }\n    /**\n     * Sets the static value of this component.\n     *\n     * @param value\n     */\n    ,\n    set: function set(value) {\n      if (!this.allowData || !this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return;\n      }\n\n      if (value !== null && value !== undefined) {\n        value = this.hook('setDataValue', value, this.key, this._data);\n      }\n\n      if (value === null || value === undefined) {\n        this.unset();\n        return;\n      }\n\n      _lodash.default.set(this._data, this.key, value);\n\n      return;\n    }\n    /**\n     * Splice a value from the dataValue.\n     *\n     * @param index\n     */\n\n  }, {\n    key: \"splice\",\n    value: function splice(index) {\n      if (this.hasValue()) {\n        var dataValue = this.dataValue || [];\n\n        if (_lodash.default.isArray(dataValue) && dataValue.hasOwnProperty(index)) {\n          dataValue.splice(index, 1);\n          this.dataValue = dataValue;\n          this.triggerChange();\n        }\n      }\n    }\n  }, {\n    key: \"unset\",\n    value: function unset() {\n      _lodash.default.unset(this._data, this.key);\n    }\n    /**\n     * Deletes the value of the component.\n     */\n\n  }, {\n    key: \"deleteValue\",\n    value: function deleteValue() {\n      this.setValue(null, {\n        noUpdateEvent: true,\n        noDefault: true\n      });\n      this.unset();\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var _this15 = this;\n\n      var defaultValue = this.emptyValue;\n\n      if (this.component.defaultValue) {\n        defaultValue = this.component.defaultValue;\n      }\n\n      if (this.component.customDefaultValue && !this.options.preview) {\n        defaultValue = this.evaluate(this.component.customDefaultValue, {\n          value: ''\n        }, 'value');\n      }\n\n      var checkMask = function checkMask(value) {\n        if (typeof value === 'string') {\n          var placeholderChar = _this15.placeholderChar;\n          value = (0, _vanillaTextMask.conformToMask)(value, _this15.defaultMask, {\n            placeholderChar: placeholderChar\n          }).conformedValue;\n\n          if (!FormioUtils.matchInputMask(value, _this15.defaultMask)) {\n            value = '';\n          }\n        } else {\n          value = '';\n        }\n\n        return value;\n      };\n\n      if (this.defaultMask) {\n        if (Array.isArray(defaultValue)) {\n          defaultValue = defaultValue.map(checkMask);\n        } else {\n          defaultValue = checkMask(defaultValue);\n        }\n      } // Clone so that it creates a new instance.\n\n\n      return _lodash.default.cloneDeep(defaultValue);\n    }\n    /**\n     * Get the input value of this component.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (!this.hasInput || this.viewOnly || !this.refs.input || !this.refs.input.length) {\n        return this.dataValue;\n      }\n\n      var values = [];\n\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          if (!this.component.multiple) {\n            return this.getValueAt(i);\n          }\n\n          values.push(this.getValueAt(i));\n        }\n      }\n\n      if (values.length === 0 && !this.component.multiple) {\n        return '';\n      }\n\n      return values;\n    }\n    /**\n     * Get the value at a specific index.\n     *\n     * @param index\n     * @returns {*}\n     */\n\n  }, {\n    key: \"getValueAt\",\n    value: function getValueAt(index) {\n      var input = this.performInputMapping(this.refs.input[index]);\n      return input ? input.value : undefined;\n    }\n    /**\n     * Set the value of this component.\n     *\n     * @param value\n     * @param flags\n     *\n     * @return {boolean} - If the value changed.\n     */\n\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      value = this.dataValue;\n\n      if (!this.hasInput) {\n        return changed;\n      }\n\n      var isArray = Array.isArray(value);\n\n      if (isArray && Array.isArray(this.defaultValue) && this.refs.hasOwnProperty('input') && this.refs.input && this.refs.input.length !== value.length && this.visible) {\n        this.redraw();\n      }\n\n      if (this.isHtmlRenderMode() && flags && flags.fromSubmission && changed) {\n        this.redraw();\n        return changed;\n      }\n\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          this.setValueAt(i, isArray ? value[i] : value, flags);\n        }\n      }\n\n      return changed;\n    }\n    /**\n     * Set the value at a specific index.\n     *\n     * @param index\n     * @param value\n     */\n\n  }, {\n    key: \"setValueAt\",\n    value: function setValueAt(index, value) {\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!flags.noDefault && (value === null || value === undefined) && !this.component.multiple) {\n        value = this.defaultValue;\n      }\n\n      var input = this.performInputMapping(this.refs.input[index]);\n\n      if (input.mask) {\n        input.mask.textMaskInputElement.update(value);\n      } else if (input.widget && input.widget.setValue) {\n        input.widget.setValue(value);\n      } else {\n        input.value = value;\n      }\n    }\n  }, {\n    key: \"hasSetValue\",\n    get: function get() {\n      return this.hasValue() && !this.isEmpty(this.dataValue);\n    }\n  }, {\n    key: \"setDefaultValue\",\n    value: function setDefaultValue() {\n      if (this.defaultValue) {\n        var defaultValue = this.component.multiple && !this.dataValue.length ? [] : this.defaultValue;\n        this.setValue(defaultValue, {\n          noUpdateEvent: true\n        });\n      }\n    }\n    /**\n     * Restore the value of a control.\n     */\n\n  }, {\n    key: \"restoreValue\",\n    value: function restoreValue() {\n      if (this.hasSetValue) {\n        this.setValue(this.dataValue, {\n          noUpdateEvent: true\n        });\n      } else {\n        this.setDefaultValue();\n      }\n    }\n    /**\n     * Normalize values coming into updateValue.\n     *\n     * @param value\n     * @return {*}\n     */\n\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(value) {\n      if (this.component.multiple && !Array.isArray(value)) {\n        value = value ? [value] : [];\n      }\n\n      return value;\n    }\n    /**\n     * Update a value of this component.\n     *\n     * @param flags\n     */\n\n  }, {\n    key: \"updateComponentValue\",\n    value: function updateComponentValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var newValue = !flags.resetValue && (value === undefined || value === null) ? this.getValue() : value;\n      newValue = this.normalizeValue(newValue, flags);\n      var changed = newValue !== undefined ? this.hasChanged(newValue, this.dataValue) : false;\n\n      if (changed) {\n        this.dataValue = newValue;\n        this.updateOnChange(flags, changed);\n      }\n\n      if (this.componentModal && flags && flags.fromSubmission) {\n        this.componentModal.setValue(value);\n      }\n\n      return changed;\n    }\n    /**\n     * Updates the value of this component plus all sub-components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue() {\n      return this.updateComponentValue.apply(this, arguments);\n    }\n  }, {\n    key: \"getIcon\",\n    value: function getIcon(name, content, styles) {\n      var ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'icon';\n      return this.renderTemplate('icon', {\n        className: this.iconClass(name),\n        ref: ref,\n        styles: styles,\n        content: content\n      });\n    }\n    /**\n     * Resets the value of this component.\n     */\n\n  }, {\n    key: \"resetValue\",\n    value: function resetValue() {\n      this.unset();\n      this.setValue(this.emptyValue, {\n        noUpdateEvent: true,\n        noValidate: true,\n        resetValue: true\n      });\n    }\n    /**\n     * Determine if the value of this component has changed.\n     *\n     * @param newValue\n     * @param oldValue\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"hasChanged\",\n    value: function hasChanged(newValue, oldValue) {\n      if ((newValue === undefined || newValue === null) && (oldValue === undefined || oldValue === null || this.isEmpty(oldValue))) {\n        return false;\n      } // If we do not have a value and are getting set to anything other than undefined or null, then we changed.\n\n\n      if (newValue !== undefined && newValue !== null && this.allowData && !this.hasValue()) {\n        return true;\n      }\n\n      return !_lodash.default.isEqual(newValue, oldValue);\n    }\n    /**\n     * Update the value on change.\n     *\n     * @param flags\n     */\n\n  }, {\n    key: \"updateOnChange\",\n    value: function updateOnChange() {\n      var flags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var changed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!flags.noUpdateEvent && changed) {\n        this.triggerChange(flags);\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Perform a calculated value operation.\n     *\n     * @param data - The global data object.\n     *\n     * @return {boolean} - If the value changed during calculation.\n     */\n\n  }, {\n    key: \"convertNumberOrBoolToString\",\n    value: function convertNumberOrBoolToString(value) {\n      if (typeof value === 'number' || typeof value === 'boolean') {\n        return value.toString();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"calculateComponentValue\",\n    value: function calculateComponentValue(data, flags, row) {\n      // If no calculated value or\n      // hidden and set to clearOnHide (Don't calculate a value for a hidden field set to clear when hidden)\n      var _this$component = this.component,\n          hidden = _this$component.hidden,\n          clearOnHide = _this$component.clearOnHide;\n      var shouldBeCleared = (!this.visible || hidden) && clearOnHide && !this.rootPristine; // Handle all cases when calculated values should not fire.\n\n      if (this.options.readOnly && !this.options.pdf || !this.component.calculateValue || shouldBeCleared || this.options.server && !this.component.calculateServer || flags.dataSourceInitialLoading) {\n        return false;\n      }\n\n      var dataValue = this.dataValue;\n      var calculatedValue = this.evaluate(this.component.calculateValue, {\n        value: dataValue,\n        data: data,\n        row: row || this.data\n      }, 'value');\n\n      if (_lodash.default.isNil(calculatedValue)) {\n        calculatedValue = this.emptyValue;\n      }\n\n      var changed = !_lodash.default.isEqual(dataValue, calculatedValue);\n\n      if (flags.fromSubmission && this.component.persistent === true) {\n        // If we set value from submission and it differs from calculated one, set the calculated value to prevent overriding dataValue in the next pass\n        this.calculatedValue = calculatedValue;\n        return false;\n      } // Do not override calculations on server if they have calculateServer set.\n\n\n      if (this.component.allowCalculateOverride) {\n        var firstPass = this.calculatedValue === undefined;\n\n        if (firstPass) {\n          this.calculatedValue = null;\n        }\n\n        var newCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(calculatedValue));\n        var previousCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(this.calculatedValue));\n        var calculationChanged = !_lodash.default.isEqual(previousCalculatedValue, newCalculatedValue);\n        var previousChanged = !_lodash.default.isEqual(dataValue, previousCalculatedValue); // Check to ensure that the calculated value is different than the previously calculated value.\n\n        if (previousCalculatedValue && previousChanged && !calculationChanged) {\n          return false;\n        }\n\n        if (flags.isReordered || !calculationChanged) {\n          return false;\n        } // If this is the firstPass, and the dataValue is different than to the calculatedValue.\n\n\n        if (firstPass && !this.isEmpty(dataValue) && changed && calculationChanged) {\n          // Return that we have a change so it will perform another pass.\n          return true;\n        }\n      }\n\n      this.calculatedValue = calculatedValue;\n      return changed ? this.setValue(calculatedValue, flags) : false;\n    }\n    /**\n     * Performs calculations in this component plus any child components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"calculateValue\",\n    value: function calculateValue(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.calculateComponentValue(data, flags, row);\n    }\n    /**\n     * Get this component's label text.\n     *\n     */\n\n  }, {\n    key: \"label\",\n    get: function get() {\n      return this.component.label;\n    }\n    /**\n     * Set this component's label text and render it.\n     *\n     * @param value - The new label text.\n     */\n    ,\n    set: function set(value) {\n      this.component.label = value;\n\n      if (this.labelElement) {\n        this.labelElement.innerText = value;\n      }\n    }\n    /**\n     * Get FormioForm element at the root of this component tree.\n     *\n     */\n\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.root;\n    }\n    /**\n     * Returns the invalid message, or empty string if the component is valid.\n     *\n     * @param data\n     * @param dirty\n     * @return {*}\n     */\n\n  }, {\n    key: \"invalidMessage\",\n    value: function invalidMessage(data, dirty, ignoreCondition, row) {\n      if (!ignoreCondition && !this.checkCondition(row, data)) {\n        return '';\n      } // See if this is forced invalid.\n\n\n      if (this.invalid) {\n        return this.invalid;\n      } // No need to check for errors if there is no input or if it is pristine.\n\n\n      if (!this.hasInput || !dirty && this.pristine) {\n        return '';\n      }\n\n      return _lodash.default.map(_Validator.default.checkComponent(this, data), 'message').join('\\n\\n');\n    }\n    /**\n     * Returns if the component is valid or not.\n     *\n     * @param data\n     * @param dirty\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function isValid(data, dirty) {\n      return !this.invalidMessage(data, dirty);\n    }\n  }, {\n    key: \"setComponentValidity\",\n    value: function setComponentValidity(messages, dirty, silentCheck) {\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error' && !message.fromServer;\n      }).length;\n\n      if (messages.length && (!silentCheck || this.error) && (dirty || !this.pristine)) {\n        this.setCustomValidity(messages, dirty);\n      } else if (!silentCheck) {\n        this.setCustomValidity('');\n      }\n\n      return !hasErrors;\n    }\n    /**\n     * Checks the validity of this component and sets the error message if it is invalid.\n     *\n     * @param data\n     * @param dirty\n     * @param row\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"checkComponentValidity\",\n    value: function checkComponentValidity(data, dirty, row) {\n      var _this$serverErrors,\n          _this16 = this;\n\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      data = data || this.rootValue;\n      row = row || this.data;\n      var _options$async = options.async,\n          async = _options$async === void 0 ? false : _options$async,\n          _options$silentCheck = options.silentCheck,\n          silentCheck = _options$silentCheck === void 0 ? false : _options$silentCheck;\n\n      if (this.shouldSkipValidation(data, dirty, row)) {\n        this.setCustomValidity('');\n        return async ? _nativePromiseOnly.default.resolve(true) : true;\n      }\n\n      var check = _Validator.default.checkComponent(this, data, row, true, async);\n\n      var validations = check;\n\n      if ((_this$serverErrors = this.serverErrors) !== null && _this$serverErrors !== void 0 && _this$serverErrors.length) {\n        validations = check.concat(this.serverErrors);\n      }\n\n      return async ? validations.then(function (messages) {\n        return _this16.setComponentValidity(messages, dirty, silentCheck);\n      }) : this.setComponentValidity(validations, dirty, silentCheck);\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty, row, silentCheck) {\n      data = data || this.rootValue;\n      row = row || this.data;\n      var isValid = this.checkComponentValidity(data, dirty, row, {\n        silentCheck: silentCheck\n      });\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkAsyncValidity\",\n    value: function checkAsyncValidity(data, dirty, row, silentCheck) {\n      return _nativePromiseOnly.default.resolve(this.checkComponentValidity(data, dirty, row, {\n        async: true,\n        silentCheck: silentCheck\n      }));\n    }\n    /**\n     * Check the conditions, calculations, and validity of a single component and triggers an update if\n     * something changed.\n     *\n     * @param data - The root data of the change event.\n     * @param flags - The flags from this change event.\n     *\n     * @return boolean - If component is valid or not.\n     */\n\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data; // Do not trigger refresh if change was triggered on blur event since components with Refresh on Blur have their own listeners\n\n      if (!flags.fromBlur) {\n        this.checkRefreshOn(flags.changes, flags);\n      }\n\n      if (flags.noCheck) {\n        return true;\n      }\n\n      this.calculateComponentValue(data, flags, row);\n      this.checkComponentConditions(data, flags, row);\n\n      if (flags.noValidate && !flags.validateOnInit && !flags.fromIframe) {\n        if (flags.fromSubmission && this.rootPristine && this.pristine && this.error && flags.changed) {\n          this.checkComponentValidity(data, !!this.options.alwaysDirty, row, true);\n        }\n\n        return true;\n      }\n\n      var isDirty = false; // We need to set dirty if they explicitly set noValidate to false.\n\n      if (this.options.alwaysDirty || flags.dirty) {\n        isDirty = true;\n      } // See if they explicitely set the values with setSubmission.\n\n\n      if (flags.fromSubmission && this.hasValue(data)) {\n        isDirty = true;\n      }\n\n      this.setDirty(isDirty);\n\n      if (this.component.validateOn === 'blur' && flags.fromSubmission) {\n        return true;\n      }\n\n      var isValid = this.checkComponentValidity(data, isDirty, row, flags);\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkModal\",\n    value: function checkModal() {\n      if (!this.component.modalEdit || !this.componentModal) {\n        return;\n      }\n    }\n  }, {\n    key: \"validationValue\",\n    get: function get() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.dataValue;\n      var isEmptyArray = _lodash.default.isArray(value) && value.length === 1 ? _lodash.default.isEqual(value[0], this.emptyValue) : false;\n      return value == null || value.length === 0 || _lodash.default.isEqual(value, this.emptyValue) || isEmptyArray;\n    }\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(valueA) {\n      var valueB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.dataValue;\n      return this.isEmpty(valueA) && this.isEmpty(valueB) || _lodash.default.isEqual(valueA, valueB);\n    }\n    /**\n     * Check if a component is eligible for multiple validation\n     *\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return true;\n    }\n  }, {\n    key: \"errors\",\n    get: function get() {\n      return this.error ? [this.error] : [];\n    }\n  }, {\n    key: \"clearErrorClasses\",\n    value: function clearErrorClasses() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n      this.removeClass(element, this.options.componentErrorClass);\n      this.removeClass(element, 'alert alert-danger');\n      this.removeClass(element, 'has-error');\n      this.removeClass(element, 'has-message');\n    }\n  }, {\n    key: \"setInputWidgetErrorClasses\",\n    value: function setInputWidgetErrorClasses(inputRefs, hasErrors) {\n      if (!this.isInputComponent || !this.component.widget || !(inputRefs !== null && inputRefs !== void 0 && inputRefs.length)) {\n        return;\n      }\n\n      inputRefs.forEach(function (input) {\n        if (input !== null && input !== void 0 && input.widget && input.widget.setErrorClasses) {\n          input.widget.setErrorClasses(hasErrors);\n        }\n      });\n    }\n  }, {\n    key: \"setCustomValidity\",\n    value: function setCustomValidity(messages, dirty, external) {\n      var inputRefs = this.isInputComponent ? this.refs.input || [] : null;\n\n      if (typeof messages === 'string' && messages) {\n        messages = {\n          level: 'error',\n          message: messages\n        };\n      }\n\n      if (!Array.isArray(messages)) {\n        if (messages) {\n          messages = [messages];\n        } else {\n          messages = [];\n        }\n      }\n\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error';\n      }).length;\n\n      if (messages.length) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n\n        this.error = {\n          component: this.component,\n          message: messages[0].message,\n          messages: messages,\n          external: !!external\n        };\n        this.emit('componentError', this.error);\n        this.addMessages(messages, dirty, inputRefs);\n\n        if (inputRefs) {\n          this.setErrorClasses(inputRefs, dirty, hasErrors, !!messages.length);\n        }\n      } else if (this.error && this.error.external === !!external) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n\n        if (this.refs.modalMessageContainer) {\n          this.empty(this.refs.modalMessageContainer);\n        }\n\n        this.error = null;\n\n        if (inputRefs) {\n          this.setErrorClasses(inputRefs, dirty, hasErrors, !!messages.length);\n        }\n\n        this.clearErrorClasses();\n      } // if (!this.refs.input) {\n      //   return;\n      // }\n      // this.refs.input.forEach(input => {\n      //   input = this.performInputMapping(input);\n      //   if (typeof input.setCustomValidity === 'function') {\n      //     input.setCustomValidity(message, dirty);\n      //   }\n      // });\n\n    }\n    /**\n     * Determines if the value of this component is hidden from the user as if it is coming from the server, but is\n     * protected.\n     *\n     * @return {boolean|*}\n     */\n\n  }, {\n    key: \"isValueHidden\",\n    value: function isValueHidden() {\n      if (!this.root || !this.root.hasOwnProperty('editing')) {\n        return false;\n      }\n\n      if (!this.root || !this.root.editing) {\n        return false;\n      }\n\n      return this.component.protected || !this.component.persistent || this.component.persistent === 'client-only';\n    }\n  }, {\n    key: \"shouldSkipValidation\",\n    value: function shouldSkipValidation(data, dirty, row) {\n      var _this17 = this;\n\n      var rules = [// Force valid if component is read-only\n      function () {\n        return _this17.options.readOnly;\n      }, // Check to see if we are editing and if so, check component persistence.\n      function () {\n        return _this17.isValueHidden();\n      }, // Force valid if component is hidden.\n      function () {\n        return !_this17.visible;\n      }, // Force valid if component is conditionally hidden.\n      function () {\n        return !_this17.checkCondition(row, data);\n      }];\n      return rules.some(function (pred) {\n        return pred();\n      });\n    } // Maintain reverse compatibility.\n\n  }, {\n    key: \"whenReady\",\n    value: function whenReady() {\n      console.warn('The whenReady() method has been deprecated. Please use the dataReady property instead.');\n      return this.dataReady;\n    }\n  }, {\n    key: \"dataReady\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve();\n    }\n    /**\n     * Prints out the value of this component as a string value.\n     */\n\n  }, {\n    key: \"asString\",\n    value: function asString(value) {\n      value = value || this.getValue();\n      return (Array.isArray(value) ? value : [value]).map(_lodash.default.toString).join(', ');\n    }\n    /**\n     * Return if the component is disabled.\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return this._disabled || this.parentDisabled;\n    }\n    /**\n     * Disable this component.\n     *\n     * @param {boolean} disabled\n     */\n    ,\n    set: function set(disabled) {\n      this._disabled = disabled;\n    }\n  }, {\n    key: \"setDisabled\",\n    value: function setDisabled(element, disabled) {\n      if (!element) {\n        return;\n      }\n\n      element.disabled = disabled;\n\n      if (disabled) {\n        element.setAttribute('disabled', 'disabled');\n      } else {\n        element.removeAttribute('disabled');\n      }\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(element, loading) {\n      if (!element || element.loading === loading) {\n        return;\n      }\n\n      element.loading = loading;\n\n      if (!element.loader && loading) {\n        element.loader = this.ce('i', {\n          class: \"\".concat(this.iconClass('refresh', true), \" button-icon-right\")\n        });\n      }\n\n      if (element.loader) {\n        if (loading) {\n          this.appendTo(element.loader, element);\n        } else {\n          this.removeChildFrom(element.loader, element);\n        }\n      }\n    }\n  }, {\n    key: \"selectOptions\",\n    value: function selectOptions(select, tag, options, defaultValue) {\n      var _this18 = this;\n\n      _lodash.default.each(options, function (option) {\n        var attrs = {\n          value: option.value\n        };\n\n        if (defaultValue !== undefined && option.value === defaultValue) {\n          attrs.selected = 'selected';\n        }\n\n        var optionElement = _this18.ce('option', attrs);\n\n        optionElement.appendChild(_this18.text(option.label));\n        select.appendChild(optionElement);\n      });\n    }\n  }, {\n    key: \"setSelectValue\",\n    value: function setSelectValue(select, value) {\n      var options = select.querySelectorAll('option');\n\n      _lodash.default.each(options, function (option) {\n        if (option.value === value) {\n          option.setAttribute('selected', 'selected');\n        } else {\n          option.removeAttribute('selected');\n        }\n      });\n\n      if (select.onchange) {\n        select.onchange();\n      }\n\n      if (select.onselect) {\n        select.onselect();\n      }\n    }\n  }, {\n    key: \"getRelativePath\",\n    value: function getRelativePath(path) {\n      var keyPart = \".\".concat(this.key);\n      var thisPath = this.isInputComponent ? this.path : this.path.slice(0).replace(keyPart, '');\n      return path.replace(thisPath, '');\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.detach();\n      this.empty(this.getElement());\n    }\n  }, {\n    key: \"append\",\n    value: function append(element) {\n      this.appendTo(element, this.element);\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend(element) {\n      this.prependTo(element, this.element);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(element) {\n      this.removeChildFrom(element, this.element);\n    }\n  }, {\n    key: \"detachLogic\",\n    value: function detachLogic() {\n      var _this19 = this;\n\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this19.interpolate(logic.trigger.event);\n\n          _this19.off(event); // only applies to callbacks on this component\n\n        }\n      });\n    }\n  }, {\n    key: \"attachLogic\",\n    value: function attachLogic() {\n      var _this20 = this; // Do not attach logic during builder mode.\n\n\n      if (this.builderMode) {\n        return;\n      }\n\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this20.interpolate(logic.trigger.event);\n\n          _this20.on(event, function () {\n            var newComponent = (0, FormioUtils.fastCloneDeep)(_this20.originalComponent);\n\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              args[_key4] = arguments[_key4];\n            }\n\n            if (_this20.applyActions(newComponent, logic.actions, args)) {\n              // If component definition changed, replace it.\n              if (!_lodash.default.isEqual(_this20.component, newComponent)) {\n                _this20.component = newComponent;\n\n                var visible = _this20.conditionallyVisible(null, null);\n\n                var disabled = _this20.shouldDisabled; // Change states which won't be recalculated during redrawing\n\n                if (_this20.visible !== visible) {\n                  _this20.visible = visible;\n                }\n\n                if (_this20.disabled !== disabled) {\n                  _this20.disabled = disabled;\n                }\n\n                _this20.redraw();\n              }\n            }\n          }, true);\n        }\n      });\n    }\n    /**\n     * Get the element information.\n     */\n\n  }, {\n    key: \"elementInfo\",\n    value: function elementInfo() {\n      var attributes = {\n        name: this.options.name,\n        type: this.component.inputType || 'text',\n        class: 'form-control',\n        lang: this.options.language\n      };\n\n      if (this.component.placeholder) {\n        attributes.placeholder = this.t(this.component.placeholder, {\n          _userInput: true\n        });\n      }\n\n      if (this.component.tabindex) {\n        attributes.tabindex = this.component.tabindex;\n      }\n\n      if (this.disabled) {\n        attributes.disabled = 'disabled';\n      }\n\n      _lodash.default.defaults(attributes, this.component.attributes);\n\n      return {\n        type: 'input',\n        component: this.component,\n        changeEvent: 'change',\n        attr: attributes\n      };\n    }\n  }, {\n    key: \"autofocus\",\n    value: function autofocus() {\n      var _this21 = this;\n\n      var hasAutofocus = this.component.autofocus && !this.builderMode && !this.options.preview;\n\n      if (hasAutofocus) {\n        this.on('render', function () {\n          return _this21.focus();\n        }, true);\n      }\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n\n      if (!element) {\n        return;\n      }\n\n      var _element$getBoundingC = element.getBoundingClientRect(),\n          left = _element$getBoundingC.left,\n          top = _element$getBoundingC.top;\n\n      window.scrollTo(left + window.scrollX, top + window.scrollY);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus(index) {\n      var _this$refs$input2;\n\n      if ('beforeFocus' in this.parent) {\n        this.parent.beforeFocus(this);\n      }\n\n      if ((_this$refs$input2 = this.refs.input) !== null && _this$refs$input2 !== void 0 && _this$refs$input2.length) {\n        var _this$component$widge;\n\n        var focusingInput = typeof index === 'number' && this.refs.input[index] ? this.refs.input[index] : this.refs.input[this.refs.input.length - 1];\n\n        if (((_this$component$widge = this.component.widget) === null || _this$component$widge === void 0 ? void 0 : _this$component$widge.type) === 'calendar') {\n          var sibling = focusingInput.nextSibling;\n\n          if (sibling) {\n            sibling.focus();\n          }\n        } else {\n          focusingInput.focus();\n        }\n      }\n\n      if (this.refs.openModal) {\n        this.refs.openModal.focus();\n      }\n\n      if (this.parent.refs.openModal) {\n        this.parent.refs.openModal.focus();\n      }\n    }\n    /**\n     * Get `Formio` instance for working with files\n     */\n\n  }, {\n    key: \"fileService\",\n    get: function get() {\n      if (this.options.fileService) {\n        return this.options.fileService;\n      }\n\n      if (this.options.formio) {\n        return this.options.formio;\n      }\n\n      if (this.root && this.root.formio) {\n        return this.root.formio;\n      }\n\n      var formio = new _Formio.default(); // If a form is loaded, then make sure to set the correct formUrl.\n\n      if (this.root && this.root._form && this.root._form._id) {\n        formio.formUrl = \"\".concat(formio.projectUrl, \"/form/\").concat(this.root._form._id);\n      }\n\n      return formio;\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len5 = arguments.length, sources = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        sources[_key5] = arguments[_key5];\n      }\n\n      return _lodash.default.merge.apply(_lodash.default, [{\n        /**\n         * Determines if this component provides an input.\n         */\n        input: true,\n\n        /**\n         * The data key for this component (how the data is stored in the database).\n         */\n        key: '',\n\n        /**\n         * The input placeholder for this component.\n         */\n        placeholder: '',\n\n        /**\n         * The input prefix\n         */\n        prefix: '',\n\n        /**\n         * The custom CSS class to provide to this component.\n         */\n        customClass: '',\n\n        /**\n         * The input suffix.\n         */\n        suffix: '',\n\n        /**\n         * If this component should allow an array of values to be captured.\n         */\n        multiple: false,\n\n        /**\n         * The default value of this compoennt.\n         */\n        defaultValue: null,\n\n        /**\n         * If the data of this component should be protected (no GET api requests can see the data)\n         */\n        protected: false,\n\n        /**\n         * Validate if the value of this component should be unique within the form.\n         */\n        unique: false,\n\n        /**\n         * If the value of this component should be persisted within the backend api database.\n         */\n        persistent: true,\n\n        /**\n         * Determines if the component should be within the form, but not visible.\n         */\n        hidden: false,\n\n        /**\n         * If the component should be cleared when hidden.\n         */\n        clearOnHide: true,\n\n        /**\n         * This will refresh this component options when this field changes.\n         */\n        refreshOn: '',\n\n        /**\n         * This will redraw the component when this field changes.\n         */\n        redrawOn: '',\n\n        /**\n         * If this component should be included as a column within a submission table.\n         */\n        tableView: false,\n\n        /**\n         * If this component should be rendering in modal.\n         */\n        modalEdit: false,\n\n        /**\n         * The input label provided to this component.\n         */\n        label: '',\n        dataGridLabel: false,\n        labelPosition: 'top',\n        description: '',\n        errorLabel: '',\n        tooltip: '',\n        hideLabel: false,\n        tabindex: '',\n        disabled: false,\n        autofocus: false,\n        dbIndex: false,\n        customDefaultValue: '',\n        calculateValue: '',\n        calculateServer: false,\n        widget: null,\n\n        /**\n         * Attributes that will be assigned to the input elements of this component.\n         */\n        attributes: {},\n\n        /**\n         * This will perform the validation on either \"change\" or \"blur\" of the input element.\n         */\n        validateOn: 'change',\n\n        /**\n         * The validation criteria for this component.\n         */\n        validate: {\n          /**\n           * If this component is required.\n           */\n          required: false,\n\n          /**\n           * Custom JavaScript validation.\n           */\n          custom: '',\n\n          /**\n           * If the custom validation should remain private (only the backend will see it and execute it).\n           */\n          customPrivate: false,\n\n          /**\n           * If this component should implement a strict date validation if the Calendar widget is implemented.\n           */\n          strictDateValidation: false,\n          multiple: false,\n          unique: false\n        },\n\n        /**\n         * The simple conditional settings for a component.\n         */\n        conditional: {\n          show: null,\n          when: null,\n          eq: ''\n        },\n        overlay: {\n          style: '',\n          left: '',\n          top: '',\n          width: '',\n          height: ''\n        },\n        allowCalculateOverride: false,\n        encrypted: false,\n        showCharCount: false,\n        showWordCount: false,\n        properties: {},\n        allowMultipleMasks: false\n      }].concat(sources));\n    }\n    /**\n     * Return the validator as part of the component.\n     *\n     * @return {ValidationChecker}\n     * @constructor\n     */\n\n  }, {\n    key: \"Validator\",\n    get: function get() {\n      return _Validator.default;\n    }\n    /**\n     * Provides a table view for this component. Override if you wish to do something different than using getView\n     * method of your instance.\n     *\n     * @param value\n     * @param options\n     */\n\n    /* eslint-disable no-unused-vars */\n\n  }, {\n    key: \"tableView\",\n    value: function tableView(value, options) {}\n  }]);\n\n  return Component;\n}(_Element2.default);\n\nexports.default = Component;\nComponent.externalLibraries = {};\n\nComponent.requireLibrary = function (name, property, src, polling) {\n  if (!Component.externalLibraries.hasOwnProperty(name)) {\n    Component.externalLibraries[name] = {};\n    Component.externalLibraries[name].ready = new _nativePromiseOnly.default(function (resolve, reject) {\n      Component.externalLibraries[name].resolve = resolve;\n      Component.externalLibraries[name].reject = reject;\n    });\n    var callbackName = \"\".concat(name, \"Callback\");\n\n    if (!polling && !window[callbackName]) {\n      window[callbackName] = function () {\n        this.resolve();\n      }.bind(Component.externalLibraries[name]);\n    } // See if the plugin already exists.\n\n\n    var plugin = _lodash.default.get(window, property);\n\n    if (plugin) {\n      Component.externalLibraries[name].resolve(plugin);\n    } else {\n      src = Array.isArray(src) ? src : [src];\n      src.forEach(function (lib) {\n        var attrs = {};\n        var elementType = '';\n\n        if (typeof lib === 'string') {\n          lib = {\n            type: 'script',\n            src: lib\n          };\n        }\n\n        switch (lib.type) {\n          case 'script':\n            elementType = 'script';\n            attrs = {\n              src: lib.src,\n              type: 'text/javascript',\n              defer: true,\n              async: true\n            };\n            break;\n\n          case 'styles':\n            elementType = 'link';\n            attrs = {\n              href: lib.src,\n              rel: 'stylesheet'\n            };\n            break;\n        } // Add the script to the top page.\n\n\n        var script = document.createElement(elementType);\n\n        for (var attr in attrs) {\n          script.setAttribute(attr, attrs[attr]);\n        }\n\n        document.getElementsByTagName('head')[0].appendChild(script);\n      }); // if no callback is provided, then check periodically for the script.\n\n      if (polling) {\n        setTimeout(function checkLibrary() {\n          var plugin = _lodash.default.get(window, property);\n\n          if (plugin) {\n            Component.externalLibraries[name].resolve(plugin);\n          } else {\n            // check again after 200 ms.\n            setTimeout(checkLibrary, 200);\n          }\n        }, 200);\n      }\n    }\n  }\n\n  return Component.externalLibraries[name].ready;\n};\n\nComponent.libraryReady = function (name) {\n  if (Component.externalLibraries.hasOwnProperty(name) && Component.externalLibraries[name].ready) {\n    return Component.externalLibraries[name].ready;\n  }\n\n  return _nativePromiseOnly.default.reject(\"\".concat(name, \" library was not required.\"));\n};","map":{"version":3,"sources":["C:/Users/ShyamLakhani/Desktop/my-app/node_modules/formiojs/components/_classes/component/Component.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","default","_vanillaTextMask","require","_nativePromiseOnly","_interopRequireDefault","_tooltip","_lodash","_ismobilejs","_Formio","FormioUtils","_interopRequireWildcard","_Validator","_Templates","_Element2","_ComponentModal","_widgets","_uploadAdapter","_en","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_createForOfIteratorHelper","o","allowArrayLike","it","Array","isArray","_unsupportedIterableToArray","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","minLen","_arrayLikeToArray","toString","slice","name","from","test","iter","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","base","_superPropBase","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","getPrototypeOf","isIEBrowser","getBrowserInfo","ie","CKEDITOR_URL","QUILL_URL","QUILL_TABLE_URL","ACE_URL","Component","_Element","_super","component","options","data","_this","assign","renderMode","attachMode","id","_hasCondition","refs","components","type","merge","validator","path","mergeSchema","originalComponent","fastCloneDeep","attached","rendered","_data","error","tooltip","row","_disabled","boolValue","disabled","root","localRoot","pristine","parent","validators","_path","_parentPath","parentPath","_parentVisible","parentVisible","_visible","conditionallyVisible","_parentDisabled","changes","lastChanged","triggerArgs","_triggerChange","debounce","_this2","changing","_len","args","_key","isEmpty","flags","retVal","onChange","triggerChange","_len2","_key2","triggerRedraw","redraw","bind","tooltips","invalid","allowData","concat","visible","clearOnHide","hasValue","dataValue","defaultValue","info","elementInfo","hook","skipInit","init","undefined","defaultsDeep","defaultSchema","resolve","label","hidden","labelIsHidden","className","labelPosition","tooltipClass","iconClass","isPDFReadOnlyMode","form","display","readOnly","hasInput","validate","required","attr","for","shouldDisabled","destroy","detach","input","isInputComponent","schema","builderMode","showHiddenFields","hide","show","_currentForm","console","width","labelWidth","margin","labelMargin","includes","split","rightDirection","direction","getLabelInfo","isRightPosition","labelPositions","isLeftPosition","isRightAlign","contentMargin","hideLabel","labelStyles","contentStyles","getModifiedSchema","recursion","_this3","modified","each","val","isObject","subModified","isEqual","omit","inDataGrid","t","text","_get2","params","_userInput","rootValue","_len3","_key3","isInDataGrid","dataGridLabel","inputsOnly","current","transform","getTemplate","names","modes","templates","checkTemplate","frameworkTemplates","template","templatesByName","defaultTemplates","templateByMode","checkTemplateMode","_iterator","_step","_iterator2","_step2","mode","getFormattedTooltip","tooltipValue","interpolate","replace","isHtmlRenderMode","renderTemplate","_this4","modeOption","size","builder","render","warn","labelInfo","charAt","toUpperCase","substring","sanitize","dirty","pdf","renderString","performInputMapping","_this$root","settings","widget","shadowRoot","getBrowserLanguage","nav","window","navigator","browserLanguagePropertyKeys","language","languages","_i","beforePage","beforeNext","beforeSubmit","submissionTimezone","loadRefs","element","ref","querySelector","querySelectorAll","setOpenModalElement","componentModal","getModalPreviewTemplate","message","level","previewText","getValueAsString","modalPreview","messages","build","empty","setContent","attach","children","topLevel","isVisible","modalEdit","showSaveButton","hasModalSaveButton","classes","styles","customStyle","attachTooltips","toolTipsRefs","_this5","index","tooltipAttribute","getAttribute","tooltipDataTitle","tooltipText","trigger","placement","html","title","modalShouldBeOpened","isOpened","currentValue","messageContainer","attachLogic","autofocus","restoreFocus","_this$root2","_this$root2$focusedCo","isFocused","focusedComponent","_this$root$currentSel","focus","currentSelection","restoreCaretPosition","addShortcut","shortcut","removeShortcut","removeEventListeners","detachLogic","dispose","checkRefresh","refreshData","changed","changePath","refresh","getComponentPath","inContext","checkRefreshOn","_this6","noRefresh","refreshOn","fromBlur","refreshOnBlur","redrawOn","refreshOnChanged","refreshOnValue","clearOnRefresh","setValue","viewAsHtml","createViewOnlyElement","ce","getWidgetValueAsString","_this7","noInputWidget","values","join","isPlainObject","JSON","stringify","stringValue","getView","protected","updateItems","restoreValue","itemValue","forceUseValue","valueProperty","itemValueForHTMLMode","_this8","map","item","createModal","confirm","_this9","dialog","dialogOverlay","dialogContents","dialogClose","appendChild","document","body","classList","add","close","remove","dispatchEvent","CustomEvent","addEventListener","removeChildFrom","event","preventDefault","handleCloseClick","then","catch","multiple","customClass","customCSS","style","getElement","evalContext","additional","rowIndex","submission","_submission","_form","setPristine","setDirty","removeValue","splice","triggerRootChange","spinning","iconset","defaultIconset","_size","placeholder","errorLabel","errorMessage","errors","content","HTMLElement","innerHTML","_this$root3","_this$refs$input","_this$root$currentSel2","selection","isInputRangeSelectable","_input","setSelectionRange","_input$value","lastCharacter","parentNode","emit","indexOf","outerHTML","rebuild","hasClass","addClass","removeClass","hasCondition","checkCondition","checkComponentConditions","fieldLogic","checkConditions","logic","_this10","logics","newComponent","reduce","checkTrigger","applyActions","actions","isIE","userAgent","msie","parseInt","trident","rv","edge","_this11","action","setActionProperty","oldValue","getValue","newValue","evaluate","clone","viewOnly","schemaDefinition","_oldValue","_newValue","customAction","addInputError","elements","addMessages","setErrorClasses","removeInputError","_this12","uniqBy","hasErrors","hasMessages","_this13","clearErrorClasses","setInputWidgetErrorClasses","highlightErrors","componentErrorClass","_getDataParentCompone","rootPristine","getDataParentComponent","hasScopedChildren","deleteValue","noUpdateEvent","_this$options","_this$root4","fromRoot","noPristineChangeOnModified","validateOn","noValidate","quill","theme","modules","toolbar","ace","maxLines","minLines","tabSize","ckeditor","image","extraPlugins","addCKE","base64Upload","isUploadEnabled","mediaEmbed","previewsInData","wysiwygDefault","getFormioUploadAdapterPlugin","fileService","requireLibrary","reject","editor","CKEDITOR","on","getData","ClassicEditor","model","addQuill","_this14","table","src","Quill","txtArea","createElement","setAttribute","addContainer","qlSource","setContents","clipboard","convert","elm","addAce","edit","removeAllListeners","setOptions","getSession","setMode","isUseWorkerDisabled","session","setUseWorker","tree","emptyValue","unset","noDefault","_this15","customDefaultValue","preview","checkMask","placeholderChar","conformToMask","defaultMask","conformedValue","matchInputMask","cloneDeep","getValueAt","updateValue","fromSubmission","setValueAt","mask","textMaskInputElement","update","setDefaultValue","hasSetValue","normalizeValue","updateComponentValue","resetValue","hasChanged","updateOnChange","getIcon","convertNumberOrBoolToString","calculateComponentValue","_this$component","shouldBeCleared","calculateValue","server","calculateServer","dataSourceInitialLoading","calculatedValue","isNil","persistent","allowCalculateOverride","firstPass","newCalculatedValue","previousCalculatedValue","calculationChanged","previousChanged","isReordered","labelElement","innerText","getRoot","invalidMessage","ignoreCondition","checkComponent","isValid","setComponentValidity","silentCheck","fromServer","setCustomValidity","checkComponentValidity","_this$serverErrors","_this16","_options$async","async","_options$silentCheck","shouldSkipValidation","check","validations","serverErrors","checkValidity","checkModal","checkAsyncValidity","checkData","noCheck","validateOnInit","fromIframe","alwaysDirty","isDirty","isEmptyArray","valueA","valueB","validateMultiple","inputRefs","external","modalMessageContainer","isValueHidden","editing","_this17","rules","some","pred","whenReady","dataReady","asString","parentDisabled","setDisabled","removeAttribute","setLoading","loading","loader","class","appendTo","selectOptions","select","tag","_this18","option","attrs","selected","optionElement","setSelectValue","onchange","onselect","getRelativePath","keyPart","thisPath","clear","append","prepend","prependTo","removeChild","_this19","off","_this20","_len4","_key4","attributes","inputType","lang","tabindex","defaults","changeEvent","_this21","hasAutofocus","scrollIntoView","_element$getBoundingC","getBoundingClientRect","left","top","scrollTo","scrollX","scrollY","_this$refs$input2","beforeFocus","_this$component$widge","focusingInput","sibling","nextSibling","openModal","formio","_id","formUrl","projectUrl","_len5","sources","_key5","prefix","suffix","unique","tableView","description","dbIndex","custom","customPrivate","strictDateValidation","conditional","when","eq","overlay","height","encrypted","showCharCount","showWordCount","properties","allowMultipleMasks","externalLibraries","polling","ready","callbackName","plugin","lib","elementType","defer","href","rel","script","getElementsByTagName","setTimeout","checkLibrary","libraryReady"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.weak-map.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.object.assign.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.regexp.flags.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.splice.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _vanillaTextMask = require(\"@formio/vanilla-text-mask\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _tooltip = _interopRequireDefault(require(\"tooltip.js\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _ismobilejs = _interopRequireDefault(require(\"ismobilejs\"));\n\nvar _Formio = _interopRequireDefault(require(\"../../../Formio\"));\n\nvar FormioUtils = _interopRequireWildcard(require(\"../../../utils/utils\"));\n\nvar _Validator = _interopRequireDefault(require(\"../../../validator/Validator\"));\n\nvar _Templates = _interopRequireDefault(require(\"../../../templates/Templates\"));\n\nvar _Element2 = _interopRequireDefault(require(\"../../../Element\"));\n\nvar _ComponentModal = _interopRequireDefault(require(\"../componentModal/ComponentModal\"));\n\nvar _widgets = _interopRequireDefault(require(\"../../../widgets\"));\n\nvar _uploadAdapter = require(\"../../../providers/storage/uploadAdapter\");\n\nvar _en = _interopRequireDefault(require(\"../../../translations/en\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar isIEBrowser = FormioUtils.getBrowserInfo().ie;\nvar CKEDITOR_URL = isIEBrowser ? 'https://cdn.ckeditor.com/4.14.1/standard/ckeditor.js' : 'https://cdn.form.io/ckeditor/19.0.0/ckeditor.js';\nvar QUILL_URL = isIEBrowser ? 'https://cdn.quilljs.com/1.3.7' : 'https://cdn.quilljs.com/2.0.0-dev.3';\nvar QUILL_TABLE_URL = 'https://cdn.form.io/quill/quill-table.js';\nvar ACE_URL = 'https://cdn.form.io/ace/1.4.10/ace.js';\n/**\n * This is the Component class\n which all elements within the FormioForm derive from.\n */\n\nvar Component = /*#__PURE__*/function (_Element) {\n  _inherits(Component, _Element);\n\n  var _super = _createSuper(Component);\n\n  /* eslint-enable no-unused-vars */\n\n  /**\n   * Initialize a new Component.\n   *\n   * @param {Object} component - The component JSON you wish to initialize.\n   * @param {Object} options - The options for this component.\n   * @param {Object} data - The global data submission object this component will belong.\n   */\n\n  /* eslint-disable max-statements */\n  function Component(component, options, data) {\n    var _this;\n\n    _classCallCheck(this, Component);\n\n    _this = _super.call(this, Object.assign({\n      renderMode: 'form',\n      attachMode: 'full'\n    }, options || {})); // Restore the component id.\n\n    if (component && component.id) {\n      _this.id = component.id;\n    }\n    /**\n     * Determines if this component has a condition assigned to it.\n     * @type {null}\n     * @private\n     */\n\n\n    _this._hasCondition = null;\n    /**\n     * References to dom elements\n     */\n\n    _this.refs = {}; // Allow global override for any component JSON.\n\n    if (component && _this.options.components && _this.options.components[component.type]) {\n      _lodash.default.merge(component, _this.options.components[component.type]);\n    }\n    /**\n     * Set the validator instance.\n     */\n\n\n    _this.validator = _Validator.default;\n    /**\n     * The data path to this specific component instance.\n     *\n     * @type {string}\n     */\n\n    _this.path = '';\n    /**\n     * The Form.io component JSON schema.\n     * @type {*}\n     */\n\n    _this.component = _this.mergeSchema(component || {}); // Add the id to the component.\n\n    _this.component.id = _this.id; // Save off the original component to be used in logic.\n\n    _this.originalComponent = (0, FormioUtils.fastCloneDeep)(_this.component);\n    /**\n     * If the component has been attached\n     */\n\n    _this.attached = false;\n    /**\n     * If the component has been rendered\n     */\n\n    _this.rendered = false;\n    /**\n     * The data object in which this component resides.\n     * @type {*}\n     */\n\n    _this._data = data || {};\n    /**\n     * The existing error that this component has.\n     * @type {string}\n     */\n\n    _this.error = '';\n    /**\n     * Tool tip text after processing\n     * @type {string}\n     */\n\n    _this.tooltip = '';\n    /**\n     * The row path of this component.\n     * @type {number}\n     */\n\n    _this.row = _this.options.row;\n    /**\n     * Determines if this component is disabled, or not.\n     *\n     * @type {boolean}\n     */\n\n    _this._disabled = (0, FormioUtils.boolValue)(_this.component.disabled) ? _this.component.disabled : false;\n    /**\n     * Points to the root component, usually the FormComponent.\n     *\n     * @type {Component}\n     */\n\n    _this.root = _this.options.root;\n    _this.localRoot = _this.options.localRoot;\n    /**\n     * If this input has been input and provided value.\n     *\n     * @type {boolean}\n     */\n\n    _this.pristine = true;\n    /**\n     * Points to the parent component.\n     *\n     * @type {Component}\n     */\n\n    _this.parent = _this.options.parent;\n    _this.options.name = _this.options.name || 'data';\n    /**\n     * The validators that are assigned to this component.\n     * @type {[string]}\n     */\n\n    _this.validators = ['required', 'minLength', 'maxLength', 'minWords', 'maxWords', 'custom', 'pattern', 'json', 'mask'];\n    _this._path = ''; // Nested forms don't have parents so we need to pass their path in.\n\n    _this._parentPath = _this.options.parentPath || '';\n    /**\n     * Determines if this component is visible, or not.\n     */\n\n    _this._parentVisible = _this.options.hasOwnProperty('parentVisible') ? _this.options.parentVisible : true;\n    _this._visible = _this._parentVisible && _this.conditionallyVisible(null, data);\n    _this._parentDisabled = false;\n    /**\n     * Used to trigger a new change in this component.\n     * @type {function} - Call to trigger a change in this component.\n     */\n\n    var changes = [];\n    var lastChanged = null;\n    var triggerArgs = [];\n\n    var _triggerChange = _lodash.default.debounce(function () {\n      var _this2;\n\n      if (_this.root) {\n        _this.root.changing = false;\n      }\n\n      triggerArgs = [];\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (!args[1] && lastChanged) {\n        // Set the changed component if one isn't provided.\n        args[1] = lastChanged;\n      }\n\n      if (_lodash.default.isEmpty(args[0]) && lastChanged) {\n        // Set the flags if it is empty and lastChanged exists.\n        args[0] = lastChanged.flags;\n      }\n\n      lastChanged = null;\n      args[3] = changes;\n\n      var retVal = (_this2 = _this).onChange.apply(_this2, args);\n\n      changes = [];\n      return retVal;\n    }, 100);\n\n    _this.triggerChange = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      if (args[1]) {\n        // Make sure that during the debounce that we always track lastChanged component, even if they\n        // don't provide one later.\n        lastChanged = args[1];\n        changes.push(lastChanged);\n      }\n\n      if (_this.root) {\n        _this.root.changing = true;\n      }\n\n      if (args.length) {\n        triggerArgs = args;\n      }\n\n      return _triggerChange.apply(void 0, _toConsumableArray(triggerArgs));\n    };\n    /**\n     * Used to trigger a redraw event within this component.\n     *\n     * @type {Function}\n     */\n\n\n    _this.triggerRedraw = _lodash.default.debounce(_this.redraw.bind(_assertThisInitialized(_this)), 100);\n    /**\n     * list of attached tooltips\n     * @type {Array}\n     */\n\n    _this.tooltips = []; // To force this component to be invalid.\n\n    _this.invalid = false;\n\n    if (_this.component) {\n      _this.type = _this.component.type;\n\n      if (_this.allowData && _this.key) {\n        _this.options.name += \"[\".concat(_this.key, \"]\"); // If component is visible or not set to clear on hide, set the default value.\n\n        if (_this.visible || !_this.component.clearOnHide) {\n          if (!_this.hasValue()) {\n            _this.dataValue = _this.defaultValue;\n          } else {\n            // Ensure the dataValue is set.\n\n            /* eslint-disable  no-self-assign */\n            _this.dataValue = _this.dataValue;\n            /* eslint-enable  no-self-assign */\n          }\n        }\n      }\n      /**\n       * The element information for creating the input element.\n       * @type {*}\n       */\n\n\n      _this.info = _this.elementInfo();\n    } // Allow anyone to hook into the component creation.\n\n\n    _this.hook('component');\n\n    if (!_this.options.skipInit) {\n      _this.init();\n    }\n\n    return _this;\n  }\n  /* eslint-enable max-statements */\n\n\n  _createClass(Component, [{\n    key: \"data\",\n    get: function get() {\n      return this._data;\n    },\n    set: function set(value) {\n      this._data = value;\n    }\n  }, {\n    key: \"mergeSchema\",\n    value: function mergeSchema() {\n      var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _lodash.default.defaultsDeep(component, this.defaultSchema);\n    } // Allow componets to notify when ready.\n\n  }, {\n    key: \"ready\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve(this);\n    }\n  }, {\n    key: \"labelInfo\",\n    get: function get() {\n      var label = {};\n      label.hidden = this.labelIsHidden();\n      label.className = '';\n      label.labelPosition = this.component.labelPosition;\n      label.tooltipClass = \"\".concat(this.iconClass('question-sign'), \" text-muted\");\n      var isPDFReadOnlyMode = this.parent && this.parent.form && this.parent.form.display === 'pdf' && this.options.readOnly;\n\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required) && !isPDFReadOnlyMode) {\n        label.className += ' field-required';\n      }\n\n      if (label.hidden) {\n        label.className += ' control-label--hidden';\n      }\n\n      if (this.info.attr.id) {\n        label.for = this.info.attr.id;\n      }\n\n      return label;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.disabled = this.shouldDisabled;\n      this._visible = this.conditionallyVisible(null, null);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(Component.prototype), \"destroy\", this).call(this);\n\n      this.detach();\n    }\n  }, {\n    key: \"shouldDisabled\",\n    get: function get() {\n      return this.options.readOnly || this.component.disabled || this.options.hasOwnProperty('disabled') && this.options.disabled[this.key];\n    }\n  }, {\n    key: \"isInputComponent\",\n    get: function get() {\n      return !this.component.hasOwnProperty('input') || this.component.input;\n    }\n  }, {\n    key: \"allowData\",\n    get: function get() {\n      return this.hasInput;\n    }\n  }, {\n    key: \"hasInput\",\n    get: function get() {\n      return this.isInputComponent || this.refs.input && this.refs.input.length;\n    }\n  }, {\n    key: \"defaultSchema\",\n    get: function get() {\n      return Component.schema();\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      return _lodash.default.get(this.component, 'key', '');\n    }\n  }, {\n    key: \"parentVisible\",\n    get: function get() {\n      return this._parentVisible;\n    },\n    set: function set(value) {\n      this._parentVisible = value;\n    }\n  }, {\n    key: \"parentDisabled\",\n    get: function get() {\n      return this._parentDisabled;\n    }\n    /**\n     *\n     * @param value {boolean}\n     */\n    ,\n    set: function set(value) {\n      this._parentDisabled = value;\n    }\n  }, {\n    key: \"visible\",\n    get:\n    /**\n     *\n     * @returns {boolean}\n     */\n    function get() {\n      // Show only if visibility changes or if we are in builder mode or if hidden fields should be shown.\n      if (this.builderMode || this.options.showHiddenFields) {\n        return true;\n      }\n\n      if (this.options.hide && this.options.hide[this.component.key]) {\n        return false;\n      }\n\n      if (this.options.show && this.options.show[this.component.key]) {\n        return true;\n      }\n\n      return this._visible && this._parentVisible;\n    },\n    set: function set(value) {\n      if (this._visible !== value) {\n        this._visible = value;\n        this.clearOnHide();\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"currentForm\",\n    get: function get() {\n      return this._currentForm;\n    },\n    set: function set(instance) {\n      this._currentForm = instance;\n    }\n  }, {\n    key: \"fullMode\",\n    get: function get() {\n      return this.options.attachMode === 'full';\n    }\n  }, {\n    key: \"builderMode\",\n    get: function get() {\n      return this.options.attachMode === 'builder';\n    }\n  }, {\n    key: \"calculatedPath\",\n    get: function get() {\n      console.error('component.calculatedPath was deprecated, use component.path instead.');\n      return this.path;\n    }\n  }, {\n    key: \"labelPosition\",\n    get: function get() {\n      return this.component.labelPosition;\n    }\n  }, {\n    key: \"labelWidth\",\n    get: function get() {\n      var width = this.component.labelWidth;\n      return width >= 0 ? width : 30;\n    }\n  }, {\n    key: \"labelMargin\",\n    get: function get() {\n      var margin = this.component.labelMargin;\n      return margin >= 0 ? margin : 3;\n    }\n  }, {\n    key: \"isAdvancedLabel\",\n    get: function get() {\n      return ['left-left', 'left-right', 'right-left', 'right-right'].includes(this.labelPosition);\n    }\n  }, {\n    key: \"labelPositions\",\n    get: function get() {\n      return this.labelPosition.split('-');\n    }\n  }, {\n    key: \"skipInEmail\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"rightDirection\",\n    value: function rightDirection(direction) {\n      return direction === 'right';\n    }\n  }, {\n    key: \"getLabelInfo\",\n    value: function getLabelInfo() {\n      var isRightPosition = this.rightDirection(this.labelPositions[0]);\n      var isLeftPosition = this.labelPositions[0] === 'left';\n      var isRightAlign = this.rightDirection(this.labelPositions[1]);\n      var contentMargin = '';\n\n      if (this.component.hideLabel) {\n        var margin = this.labelWidth + this.labelMargin;\n        contentMargin = isRightPosition ? \"margin-right: \".concat(margin, \"%\") : '';\n        contentMargin = isLeftPosition ? \"margin-left: \".concat(margin, \"%\") : '';\n      }\n\n      var labelStyles = \"\\n      flex: \".concat(this.labelWidth, \";\\n      \").concat(isRightPosition ? 'margin-left' : 'margin-right', \": \").concat(this.labelMargin, \"%;\\n    \");\n      var contentStyles = \"\\n      flex: \".concat(100 - this.labelWidth - this.labelMargin, \";\\n      \").concat(contentMargin, \";\\n      \").concat(this.component.hideLabel ? \"max-width: \".concat(100 - this.labelWidth - this.labelMargin) : '', \";\\n    \");\n      return {\n        isRightPosition: isRightPosition,\n        isRightAlign: isRightAlign,\n        labelStyles: labelStyles,\n        contentStyles: contentStyles\n      };\n    }\n    /**\n     * Returns only the schema that is different from the default.\n     *\n     * @param schema\n     * @param defaultSchema\n     */\n\n  }, {\n    key: \"getModifiedSchema\",\n    value: function getModifiedSchema(schema, defaultSchema, recursion) {\n      var _this3 = this;\n\n      var modified = {};\n\n      if (!defaultSchema) {\n        return schema;\n      }\n\n      _lodash.default.each(schema, function (val, key) {\n        if (!_lodash.default.isArray(val) && _lodash.default.isObject(val) && defaultSchema.hasOwnProperty(key)) {\n          var subModified = _this3.getModifiedSchema(val, defaultSchema[key], true);\n\n          if (!_lodash.default.isEmpty(subModified)) {\n            modified[key] = subModified;\n          }\n        } else if (_lodash.default.isArray(val)) {\n          if (val.length !== 0 && !_lodash.default.isEqual(val, defaultSchema[key])) {\n            modified[key] = val;\n          }\n        } else if (!recursion && key === 'type' || !recursion && key === 'key' || !recursion && key === 'label' || !recursion && key === 'input' || !recursion && key === 'tableView' || val !== '' && !defaultSchema.hasOwnProperty(key) || val !== '' && val !== defaultSchema[key]) {\n          modified[key] = val;\n        }\n      });\n\n      return modified;\n    }\n    /**\n     * Returns the JSON schema for this component.\n     */\n\n  }, {\n    key: \"schema\",\n    get: function get() {\n      return (0, FormioUtils.fastCloneDeep)(this.getModifiedSchema(_lodash.default.omit(this.component, 'id'), this.defaultSchema));\n    }\n    /**\n     * Returns true if component is inside DataGrid\n     */\n\n  }, {\n    key: \"isInDataGrid\",\n    get: function get() {\n      return this.inDataGrid;\n    }\n    /**\n     * Translate a text using the i18n system.\n     *\n     * @param {string} text - The i18n identifier.\n     * @param {Object} params - The i18n parameters to use for translation.\n     */\n\n  }, {\n    key: \"t\",\n    value: function t(text) {\n      var _get2;\n\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!text) {\n        return '';\n      } // Use _userInput: true to ignore translations from defaults\n\n\n      if (text in _en.default && params._userInput) {\n        return text;\n      }\n\n      params.data = this.rootValue;\n      params.row = this.data;\n      params.component = this.component;\n\n      for (var _len3 = arguments.length, args = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        args[_key3 - 2] = arguments[_key3];\n      }\n\n      return (_get2 = _get(_getPrototypeOf(Component.prototype), \"t\", this)).call.apply(_get2, [this, text, params].concat(args));\n    }\n  }, {\n    key: \"labelIsHidden\",\n    value: function labelIsHidden() {\n      return !this.component.label || (!this.isInDataGrid && this.component.hideLabel || this.isInDataGrid && !this.component.dataGridLabel || this.options.inputsOnly) && !this.builderMode;\n    }\n  }, {\n    key: \"transform\",\n    get: function get() {\n      return _Templates.default.current.hasOwnProperty('transform') ? _Templates.default.current.transform.bind(_Templates.default.current) : function (type, value) {\n        return value;\n      };\n    }\n  }, {\n    key: \"getTemplate\",\n    value: function getTemplate(names, modes) {\n      modes = Array.isArray(modes) ? modes : [modes];\n      names = Array.isArray(names) ? names : [names];\n\n      if (!modes.includes('form')) {\n        modes.push('form');\n      }\n\n      var result = null;\n\n      if (this.options.templates) {\n        result = this.checkTemplate(this.options.templates, names, modes);\n\n        if (result) {\n          return result;\n        }\n      }\n\n      var frameworkTemplates = this.options.template ? _Templates.default.templates[this.options.template] : _Templates.default.current;\n      result = this.checkTemplate(frameworkTemplates, names, modes);\n\n      if (result) {\n        return result;\n      } // Default back to bootstrap if not defined.\n\n\n      var name = names[names.length - 1];\n      var templatesByName = _Templates.default.defaultTemplates[name];\n\n      if (!templatesByName) {\n        return \"Unknown template: \".concat(name);\n      }\n\n      var templateByMode = this.checkTemplateMode(templatesByName, modes);\n\n      if (templateByMode) {\n        return templateByMode;\n      }\n\n      return templatesByName.form;\n    }\n  }, {\n    key: \"checkTemplate\",\n    value: function checkTemplate(templates, names, modes) {\n      var _iterator = _createForOfIteratorHelper(names),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var name = _step.value;\n          var templatesByName = templates[name];\n\n          if (templatesByName) {\n            var templateByMode = this.checkTemplateMode(templatesByName, modes);\n\n            if (templateByMode) {\n              return templateByMode;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"checkTemplateMode\",\n    value: function checkTemplateMode(templatesByName, modes) {\n      var _iterator2 = _createForOfIteratorHelper(modes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var mode = _step2.value;\n          var templateByMode = templatesByName[mode];\n\n          if (templateByMode) {\n            return templateByMode;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFormattedTooltip\",\n    value: function getFormattedTooltip(tooltipValue) {\n      var tooltip = this.interpolate(tooltipValue || '').replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n      return tooltip ? this.t(tooltip, {\n        _userInput: true\n      }) : '';\n    }\n  }, {\n    key: \"isHtmlRenderMode\",\n    value: function isHtmlRenderMode() {\n      return this.options.renderMode === 'html';\n    }\n  }, {\n    key: \"renderTemplate\",\n    value: function renderTemplate(name) {\n      var _this4 = this;\n\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var modeOption = arguments.length > 2 ? arguments[2] : undefined;\n      // Need to make this fall back to form if renderMode is not found similar to how we search templates.\n      var mode = modeOption || this.options.renderMode || 'form';\n      data.component = this.component;\n      data.self = this;\n      data.options = this.options;\n      data.readOnly = this.options.readOnly;\n      data.iconClass = this.iconClass.bind(this);\n      data.size = this.size.bind(this);\n      data.t = this.t.bind(this);\n      data.transform = this.transform;\n      data.id = data.id || this.id;\n      data.key = data.key || this.key;\n      data.value = data.value || this.dataValue;\n      data.disabled = this.disabled;\n      data.builder = this.builderMode;\n\n      data.render = function () {\n        console.warn(\"Form.io 'render' template function is deprecated.\\n      If you need to render template (template A) inside of another template (template B),\\n      pass pre-compiled template A (use this.renderTemplate('template_A_name') as template context variable for template B\");\n        return _this4.renderTemplate.apply(_this4, arguments);\n      };\n\n      data.label = this.labelInfo;\n      data.tooltip = this.getFormattedTooltip(this.component.tooltip); // Allow more specific template names\n\n      var names = [\"\".concat(name, \"-\").concat(this.component.type, \"-\").concat(this.key), \"\".concat(name, \"-\").concat(this.component.type), \"\".concat(name, \"-\").concat(this.key), \"\".concat(name)]; // Allow template alters.\n\n      return this.hook(\"render\".concat(name.charAt(0).toUpperCase() + name.substring(1, name.length)), this.interpolate(this.getTemplate(names, mode), data), data, mode);\n    }\n    /**\n     * Sanitize an html string.\n     *\n     * @param string\n     * @returns {*}\n     */\n\n  }, {\n    key: \"sanitize\",\n    value: function sanitize(dirty) {\n      // No need to sanitize when generating PDF'S since no users interact with the form.\n      if (this.options.pdf) {\n        return dirty;\n      }\n\n      return FormioUtils.sanitize(dirty, this.options);\n    }\n    /**\n     * Render a template string into html.\n     *\n     * @param template\n     * @param data\n     * @param actions\n     *\n     * @return {HTMLElement} - The created element.\n     */\n\n  }, {\n    key: \"renderString\",\n    value: function renderString(template, data) {\n      if (!template) {\n        return '';\n      } // Interpolate the template and populate\n\n\n      return this.interpolate(template, data);\n    }\n  }, {\n    key: \"performInputMapping\",\n    value: function performInputMapping(input) {\n      return input;\n    }\n  }, {\n    key: \"widget\",\n    get: function get() {\n      var _this$root;\n\n      var settings = this.component.widget;\n\n      if (settings && (_this$root = this.root) !== null && _this$root !== void 0 && _this$root.shadowRoot) {\n        settings.shadowRoot = this.root.shadowRoot;\n      }\n\n      var widget = settings && _widgets.default[settings.type] ? new _widgets.default[settings.type](settings, this.component, this) : null;\n      return widget;\n    }\n  }, {\n    key: \"getBrowserLanguage\",\n    value: function getBrowserLanguage() {\n      var nav = window.navigator;\n      var browserLanguagePropertyKeys = ['language', 'browserLanguage', 'systemLanguage', 'userLanguage'];\n      var language; // support for HTML 5.1 \"navigator.languages\"\n\n      if (Array.isArray(nav.languages)) {\n        for (var i = 0; i < nav.languages.length; i++) {\n          language = nav.languages[i];\n\n          if (language && language.length) {\n            return language.split(';')[0];\n          }\n        }\n      } // support for other well known properties in browsers\n\n\n      for (var _i = 0; _i < browserLanguagePropertyKeys.length; _i++) {\n        language = nav[browserLanguagePropertyKeys[_i]];\n\n        if (language && language.length) {\n          return language.split(';')[0];\n        }\n      }\n\n      return null;\n    }\n    /**\n     * Called before a next and previous page is triggered allowing the components\n     * to perform special functions.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"beforePage\",\n    value: function beforePage() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n  }, {\n    key: \"beforeNext\",\n    value: function beforeNext() {\n      return this.beforePage(true);\n    }\n    /**\n     * Called before a submission is triggered allowing the components\n     * to perform special async functions.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"beforeSubmit\",\n    value: function beforeSubmit() {\n      return _nativePromiseOnly.default.resolve(true);\n    }\n    /**\n     * Return the submission timezone.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"submissionTimezone\",\n    get: function get() {\n      this.options.submissionTimezone = this.options.submissionTimezone || _lodash.default.get(this.root, 'options.submissionTimezone');\n      return this.options.submissionTimezone;\n    }\n  }, {\n    key: \"loadRefs\",\n    value: function loadRefs(element, refs) {\n      for (var ref in refs) {\n        if (refs[ref] === 'single') {\n          this.refs[ref] = element.querySelector(\"[ref=\\\"\".concat(ref, \"\\\"]\"));\n        } else {\n          this.refs[ref] = element.querySelectorAll(\"[ref=\\\"\".concat(ref, \"\\\"]\"));\n        }\n      }\n    }\n  }, {\n    key: \"setOpenModalElement\",\n    value: function setOpenModalElement() {\n      this.componentModal.setOpenModalElement(this.getModalPreviewTemplate());\n    }\n  }, {\n    key: \"getModalPreviewTemplate\",\n    value: function getModalPreviewTemplate() {\n      var dataValue = this.component.type === 'password' ? this.dataValue.replace(/./g, '•') : this.dataValue;\n      var message = this.error ? {\n        level: 'error',\n        message: this.error.message\n      } : '';\n      return this.renderTemplate('modalPreview', {\n        previewText: this.getValueAsString(dataValue, {\n          modalPreview: true\n        }) || this.t('Click to set value'),\n        messages: message && this.renderTemplate('message', message)\n      });\n    }\n  }, {\n    key: \"build\",\n    value: function build(element) {\n      element = element || this.element;\n      this.empty(element);\n      this.setContent(element, this.render());\n      return this.attach(element);\n    }\n  }, {\n    key: \"hasModalSaveButton\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var children = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Unknown component: \".concat(this.component.type);\n      var topLevel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isVisible = this.visible;\n      this.rendered = true;\n\n      if (!this.builderMode && this.component.modalEdit) {\n        return _ComponentModal.default.render(this, {\n          visible: isVisible,\n          showSaveButton: this.hasModalSaveButton,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      } else {\n        return this.renderTemplate('component', {\n          visible: isVisible,\n          id: this.id,\n          classes: this.className,\n          styles: this.customStyle,\n          children: children\n        }, topLevel);\n      }\n    }\n  }, {\n    key: \"attachTooltips\",\n    value: function attachTooltips(toolTipsRefs) {\n      var _this5 = this;\n\n      toolTipsRefs === null || toolTipsRefs === void 0 ? void 0 : toolTipsRefs.forEach(function (tooltip, index) {\n        if (tooltip) {\n          var tooltipAttribute = tooltip.getAttribute('data-tooltip');\n          var tooltipDataTitle = tooltip.getAttribute('data-title');\n\n          var tooltipText = _this5.interpolate(tooltipDataTitle || tooltipAttribute).replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n\n          _this5.tooltips[index] = new _tooltip.default(tooltip, {\n            trigger: 'hover click focus',\n            placement: 'right',\n            html: true,\n            title: _this5.t(tooltipText, {\n              _userInput: true\n            }),\n            template: \"\\n            <div class=\\\"tooltip\\\" style=\\\"opacity: 1;\\\" role=\\\"tooltip\\\">\\n              <div class=\\\"tooltip-arrow\\\"></div>\\n              <div class=\\\"tooltip-inner\\\"></div>\\n            </div>\"\n          });\n        }\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (!this.builderMode && this.component.modalEdit) {\n        var modalShouldBeOpened = this.componentModal ? this.componentModal.isOpened : false;\n        var currentValue = modalShouldBeOpened ? this.componentModal.currentValue : this.dataValue;\n        this.componentModal = new _ComponentModal.default(this, element, modalShouldBeOpened, currentValue);\n        this.setOpenModalElement();\n      }\n\n      this.attached = true;\n      this.element = element;\n      element.component = this; // If this already has an id, get it from the dom. If SSR, it could be different from the initiated id.\n\n      if (this.element.id) {\n        this.id = this.element.id;\n        this.component.id = this.id;\n      }\n\n      this.loadRefs(element, {\n        messageContainer: 'single',\n        tooltip: 'multiple'\n      });\n      this.attachTooltips(this.refs.tooltip); // Attach logic.\n\n      this.attachLogic();\n      this.autofocus(); // Allow global attach.\n\n      this.hook('attachComponent', element, this); // Allow attach per component type.\n\n      var type = this.component.type;\n\n      if (type) {\n        this.hook(\"attach\".concat(type.charAt(0).toUpperCase() + type.substring(1, type.length)), element, this);\n      }\n\n      this.restoreFocus();\n      return _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"restoreFocus\",\n    value: function restoreFocus() {\n      var _this$root2, _this$root2$focusedCo;\n\n      var isFocused = ((_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : (_this$root2$focusedCo = _this$root2.focusedComponent) === null || _this$root2$focusedCo === void 0 ? void 0 : _this$root2$focusedCo.path) === this.path;\n\n      if (isFocused) {\n        var _this$root$currentSel;\n\n        this.loadRefs(this.element, {\n          input: 'multiple'\n        });\n        this.focus((_this$root$currentSel = this.root.currentSelection) === null || _this$root$currentSel === void 0 ? void 0 : _this$root$currentSel.index);\n        this.restoreCaretPosition();\n      }\n    }\n  }, {\n    key: \"addShortcut\",\n    value: function addShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || !this.root || this.root === this) {\n        return;\n      }\n\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n\n      this.root.addShortcut(element, shortcut);\n    }\n  }, {\n    key: \"removeShortcut\",\n    value: function removeShortcut(element, shortcut) {\n      // Avoid infinite recursion.\n      if (!element || this.root === this) {\n        return;\n      }\n\n      if (!shortcut) {\n        shortcut = this.component.shortcut;\n      }\n\n      this.root.removeShortcut(element, shortcut);\n    }\n    /**\n     * Remove all event handlers.\n     */\n\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      this.refs = {};\n      this.removeEventListeners();\n      this.detachLogic();\n\n      if (this.tooltip) {\n        this.tooltip.dispose();\n      }\n    }\n  }, {\n    key: \"checkRefresh\",\n    value: function checkRefresh(refreshData, changed, flags) {\n      var changePath = _lodash.default.get(changed, 'instance.path', false); // Don't let components change themselves.\n\n\n      if (changePath && this.path === changePath) {\n        return;\n      }\n\n      if (refreshData === 'data') {\n        this.refresh(this.data, changed, flags);\n      } else if (changePath && (0, FormioUtils.getComponentPath)(changed.instance) === refreshData && changed && changed.instance && // Make sure the changed component is not in a different \"context\". Solves issues where refreshOn being set\n      // in fields inside EditGrids could alter their state from other rows (which is bad).\n      this.inContext(changed.instance)) {\n        this.refresh(changed.value, changed, flags);\n      }\n    }\n  }, {\n    key: \"checkRefreshOn\",\n    value: function checkRefreshOn(changes) {\n      var _this6 = this;\n\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      changes = changes || [];\n\n      if (flags.noRefresh) {\n        return;\n      }\n\n      if (!changes.length && flags.changed) {\n        changes = [flags.changed];\n      }\n\n      var refreshOn = flags.fromBlur ? this.component.refreshOnBlur : this.component.refreshOn || this.component.redrawOn; // If they wish to refresh on a value, then add that here.\n\n      if (refreshOn) {\n        if (Array.isArray(refreshOn)) {\n          refreshOn.forEach(function (refreshData) {\n            return changes.forEach(function (changed) {\n              return _this6.checkRefresh(refreshData, changed, flags);\n            });\n          });\n        } else {\n          changes.forEach(function (changed) {\n            return _this6.checkRefresh(refreshOn, changed, flags);\n          });\n        }\n      }\n    }\n    /**\n     * Refreshes the component with a new value.\n     *\n     * @param value\n     */\n\n  }, {\n    key: \"refresh\",\n    value: function refresh(value) {\n      if (this.hasOwnProperty('refreshOnValue')) {\n        this.refreshOnChanged = !_lodash.default.isEqual(value, this.refreshOnValue);\n      } else {\n        this.refreshOnChanged = true;\n      }\n\n      this.refreshOnValue = (0, FormioUtils.fastCloneDeep)(value);\n\n      if (this.refreshOnChanged) {\n        if (this.component.clearOnRefresh) {\n          this.setValue(null);\n        }\n\n        this.triggerRedraw();\n      }\n    }\n    /**\n     * Checks to see if a separate component is in the \"context\" of this component. This is determined by first checking\n     * if they share the same \"data\" object. It will then walk up the parent tree and compare its parents data objects\n     * with the components data and returns true if they are in the same context.\n     *\n     * Different rows of the same EditGrid, for example, are in different contexts.\n     *\n     * @param component\n     */\n\n  }, {\n    key: \"inContext\",\n    value: function inContext(component) {\n      if (component.data === this.data) {\n        return true;\n      }\n\n      var parent = this.parent;\n\n      while (parent) {\n        if (parent.data === component.data) {\n          return true;\n        }\n\n        parent = parent.parent;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"viewOnly\",\n    get: function get() {\n      return this.options.readOnly && this.options.viewAsHtml;\n    }\n  }, {\n    key: \"createViewOnlyElement\",\n    value: function createViewOnlyElement() {\n      this.element = this.ce('dl', {\n        id: this.id\n      });\n\n      if (this.element) {\n        // Ensure you can get the component info from the element.\n        this.element.component = this;\n      }\n\n      return this.element;\n    }\n  }, {\n    key: \"defaultViewOnlyValue\",\n    get: function get() {\n      return '-';\n    }\n    /**\n     * Uses the widget to determine the output string.\n     *\n     * @param value\n     * @return {*}\n     */\n\n  }, {\n    key: \"getWidgetValueAsString\",\n    value: function getWidgetValueAsString(value, options) {\n      var _this7 = this;\n\n      var noInputWidget = !this.refs.input || !this.refs.input[0] || !this.refs.input[0].widget;\n\n      if (!value || noInputWidget) {\n        if (!this.widget || !value) {\n          return value;\n        } else {\n          return this.widget.getValueAsString(value);\n        }\n      }\n\n      if (Array.isArray(value)) {\n        var values = [];\n        value.forEach(function (val, index) {\n          var widget = _this7.refs.input[index] && _this7.refs.input[index].widget;\n\n          if (widget) {\n            values.push(widget.getValueAsString(val, options));\n          }\n        });\n        return values;\n      }\n\n      var widget = this.refs.input[0].widget;\n      return widget.getValueAsString(value, options);\n    }\n  }, {\n    key: \"getValueAsString\",\n    value: function getValueAsString(value, options) {\n      if (!value) {\n        return '';\n      }\n\n      value = this.getWidgetValueAsString(value, options);\n\n      if (Array.isArray(value)) {\n        return value.join(', ');\n      }\n\n      if (_lodash.default.isPlainObject(value)) {\n        return JSON.stringify(value);\n      }\n\n      if (value === null || value === undefined) {\n        return '';\n      }\n\n      var stringValue = value.toString();\n      return this.sanitize(stringValue);\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(value, options) {\n      if (this.component.protected) {\n        return '--- PROTECTED ---';\n      }\n\n      return this.getValueAsString(value, options);\n    }\n  }, {\n    key: \"updateItems\",\n    value: function updateItems() {\n      this.restoreValue();\n      this.onChange.apply(this, arguments);\n    }\n    /**\n     * @param {*} data\n     * @param {boolean} [forceUseValue=false] - if true, return 'value' property of the data\n     * @return {*}\n     */\n\n  }, {\n    key: \"itemValue\",\n    value: function itemValue(data) {\n      var forceUseValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (_lodash.default.isObject(data)) {\n        if (this.valueProperty) {\n          return _lodash.default.get(data, this.valueProperty);\n        }\n\n        if (forceUseValue) {\n          return data.value;\n        }\n      }\n\n      return data;\n    }\n  }, {\n    key: \"itemValueForHTMLMode\",\n    value: function itemValueForHTMLMode(value) {\n      var _this8 = this;\n\n      if (Array.isArray(value)) {\n        var values = value.map(function (item) {\n          return Array.isArray(item) ? _this8.itemValueForHTMLMode(item) : _this8.itemValue(item);\n        });\n        return values.join(', ');\n      }\n\n      return this.itemValue(value);\n    }\n  }, {\n    key: \"createModal\",\n    value: function createModal(element, attr, confirm) {\n      var _this9 = this;\n\n      var dialog = this.ce('div', attr || {});\n      this.setContent(dialog, this.renderTemplate('dialog')); // Add refs to dialog, not \"this\".\n\n      dialog.refs = {};\n      this.loadRefs.call(dialog, dialog, {\n        dialogOverlay: 'single',\n        dialogContents: 'single',\n        dialogClose: 'single'\n      });\n      dialog.refs.dialogContents.appendChild(element);\n      document.body.appendChild(dialog);\n      document.body.classList.add('modal-open');\n\n      dialog.close = function () {\n        document.body.classList.remove('modal-open');\n        dialog.dispatchEvent(new CustomEvent('close'));\n      };\n\n      this.addEventListener(dialog, 'close', function () {\n        return _this9.removeChildFrom(dialog, document.body);\n      });\n\n      var close = function close(event) {\n        event.preventDefault();\n        dialog.close();\n      };\n\n      var handleCloseClick = function handleCloseClick(e) {\n        if (confirm) {\n          confirm().then(function () {\n            return close(e);\n          }).catch(function () {});\n        } else {\n          close(e);\n        }\n      };\n\n      this.addEventListener(dialog.refs.dialogOverlay, 'click', handleCloseClick);\n      this.addEventListener(dialog.refs.dialogClose, 'click', handleCloseClick);\n      return dialog;\n    }\n    /**\n     * Retrieves the CSS class name of this component.\n     * @returns {string} - The class name of this component.\n     */\n\n  }, {\n    key: \"className\",\n    get: function get() {\n      var className = this.hasInput ? 'form-group has-feedback ' : '';\n      className += \"formio-component formio-component-\".concat(this.component.type, \" \"); // TODO: find proper way to avoid overriding of default type-based component styles\n\n      if (this.key && this.key !== 'form') {\n        className += \"formio-component-\".concat(this.key, \" \");\n      }\n\n      if (this.component.multiple) {\n        className += 'formio-component-multiple ';\n      }\n\n      if (this.component.customClass) {\n        className += this.component.customClass;\n      }\n\n      if (this.hasInput && this.component.validate && (0, FormioUtils.boolValue)(this.component.validate.required)) {\n        className += ' required';\n      }\n\n      if (this.labelIsHidden()) {\n        className += ' formio-component-label-hidden';\n      }\n\n      if (!this.visible) {\n        className += ' formio-hidden';\n      }\n\n      return className;\n    }\n    /**\n     * Build the custom style from the layout values\n     * @return {string} - The custom style\n     */\n\n  }, {\n    key: \"customStyle\",\n    get: function get() {\n      var customCSS = '';\n\n      _lodash.default.each(this.component.style, function (value, key) {\n        if (value !== '') {\n          customCSS += \"\".concat(key, \":\").concat(value, \";\");\n        }\n      });\n\n      return customCSS;\n    }\n  }, {\n    key: \"isMobile\",\n    get: function get() {\n      return (0, _ismobilejs.default)();\n    }\n    /**\n     * Returns the outside wrapping element of this component.\n     * @returns {HTMLElement}\n     */\n\n  }, {\n    key: \"getElement\",\n    value: function getElement() {\n      return this.element;\n    }\n    /**\n     * Create an evaluation context for all script executions and interpolations.\n     *\n     * @param additional\n     * @return {*}\n     */\n\n  }, {\n    key: \"evalContext\",\n    value: function evalContext(additional) {\n      return _get(_getPrototypeOf(Component.prototype), \"evalContext\", this).call(this, Object.assign({\n        component: this.component,\n        row: this.data,\n        rowIndex: this.rowIndex,\n        data: this.rootValue,\n        iconClass: this.iconClass.bind(this),\n        // Bind the translate function to the data context of any interpolated string.\n        // It is useful to translate strings in different scenarions (eg: custom edit grid templates, custom error messages etc.)\n        // and desirable to be publicly available rather than calling the internal {instance.t} function in the template string.\n        t: this.t.bind(this),\n        submission: this.root ? this.root._submission : {\n          data: this.rootValue\n        },\n        form: this.root ? this.root._form : {}\n      }, additional));\n    }\n    /**\n     * Sets the pristine flag for this component.\n     *\n     * @param pristine {boolean} - TRUE to make pristine, FALSE not pristine.\n     */\n\n  }, {\n    key: \"setPristine\",\n    value: function setPristine(pristine) {\n      this.pristine = pristine;\n    }\n  }, {\n    key: \"isPristine\",\n    get: function get() {\n      return this.pristine;\n    }\n  }, {\n    key: \"setDirty\",\n    value: function setDirty(dirty) {\n      this.dirty = dirty;\n    }\n  }, {\n    key: \"isDirty\",\n    get: function get() {\n      return this.dirty;\n    }\n    /**\n     * Removes a value out of the data array and rebuild the rows.\n     * @param {number} index - The index of the data element to remove.\n     */\n\n  }, {\n    key: \"removeValue\",\n    value: function removeValue(index) {\n      this.splice(index);\n      this.redraw();\n      this.restoreValue();\n      this.triggerRootChange();\n    }\n  }, {\n    key: \"iconClass\",\n    value: function iconClass(name, spinning) {\n      var iconset = this.options.iconset || _Templates.default.current.defaultIconset || 'fa';\n      return _Templates.default.current.hasOwnProperty('iconClass') ? _Templates.default.current.iconClass(iconset, name, spinning) : this.options.iconset === 'fa' ? _Templates.default.defaultTemplates.iconClass(iconset, name, spinning) : name;\n    }\n  }, {\n    key: \"size\",\n    value: function size(_size) {\n      return _Templates.default.current.hasOwnProperty('size') ? _Templates.default.current.size(_size) : _size;\n    }\n    /**\n     * The readible name for this component.\n     * @returns {string} - The name of the component.\n     */\n\n  }, {\n    key: \"name\",\n    get: function get() {\n      return this.t(this.component.label || this.component.placeholder || this.key, {\n        _userInput: true\n      });\n    }\n    /**\n     * Returns the error label for this component.\n     * @return {*}\n     */\n\n  }, {\n    key: \"errorLabel\",\n    get: function get() {\n      return this.t(this.component.errorLabel || this.component.label || this.component.placeholder || this.key);\n    }\n    /**\n     * Get the error message provided a certain type of error.\n     * @param type\n     * @return {*}\n     */\n\n  }, {\n    key: \"errorMessage\",\n    value: function errorMessage(type) {\n      return this.component.errors && this.component.errors[type] ? this.component.errors[type] : type;\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(element, content) {\n      if (element instanceof HTMLElement) {\n        element.innerHTML = this.sanitize(content);\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"restoreCaretPosition\",\n    value: function restoreCaretPosition() {\n      var _this$root3;\n\n      if ((_this$root3 = this.root) !== null && _this$root3 !== void 0 && _this$root3.currentSelection) {\n        var _this$refs$input;\n\n        if ((_this$refs$input = this.refs.input) !== null && _this$refs$input !== void 0 && _this$refs$input.length) {\n          var _this$root$currentSel2 = this.root.currentSelection,\n              selection = _this$root$currentSel2.selection,\n              index = _this$root$currentSel2.index;\n          var input = this.refs.input[index];\n          var isInputRangeSelectable = /text|search|password|tel|url/i.test(input.type || '');\n\n          if (input) {\n            if (isInputRangeSelectable) {\n              var _input;\n\n              (_input = input).setSelectionRange.apply(_input, _toConsumableArray(selection));\n            }\n          } else {\n            var _input$value;\n\n            input = this.refs.input[this.refs.input.length];\n            var lastCharacter = ((_input$value = input.value) === null || _input$value === void 0 ? void 0 : _input$value.length) || 0;\n\n            if (isInputRangeSelectable) {\n              input.setSelectionRange(lastCharacter, lastCharacter);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      // Don't bother if we have not built yet.\n      if (!this.element || !this.element.parentNode) {\n        // Return a non-resolving promise.\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      this.detach();\n      this.emit('redraw'); // Since we are going to replace the element, we need to know it's position so we can find it in the parent's children.\n\n      var parent = this.element.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, this.element);\n      this.element.outerHTML = this.sanitize(this.render());\n      this.element = parent.children[index];\n      return this.attach(this.element);\n    }\n  }, {\n    key: \"rebuild\",\n    value: function rebuild() {\n      this.destroy();\n      this.init();\n      this.visible = this.conditionallyVisible(null, null);\n      return this.redraw();\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners() {\n      _get(_getPrototypeOf(Component.prototype), \"removeEventListeners\", this).call(this);\n\n      this.tooltips.forEach(function (tooltip) {\n        return tooltip.dispose();\n      });\n      this.tooltips = [];\n    }\n  }, {\n    key: \"hasClass\",\n    value: function hasClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"hasClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"addClass\", this).call(this, element, this.transform('class', className));\n    }\n  }, {\n    key: \"removeClass\",\n    value: function removeClass(element, className) {\n      if (!element) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Component.prototype), \"removeClass\", this).call(this, element, this.transform('class', className));\n    }\n    /**\n     * Determines if this component has a condition defined.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"hasCondition\",\n    value: function hasCondition() {\n      if (this._hasCondition !== null) {\n        return this._hasCondition;\n      }\n\n      this._hasCondition = FormioUtils.hasCondition(this.component);\n      return this._hasCondition;\n    }\n    /**\n     * Check if this component is conditionally visible.\n     *\n     * @param data\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"conditionallyVisible\",\n    value: function conditionallyVisible(data, row) {\n      data = data || this.rootValue;\n      row = row || this.data;\n\n      if (this.builderMode || !this.hasCondition()) {\n        return !this.component.hidden;\n      }\n\n      data = data || (this.root ? this.root.data : {});\n      return this.checkCondition(row, data);\n    }\n    /**\n     * Checks the condition of this component.\n     *\n     * TODO: Switch row and data parameters to be consistent with other methods.\n     *\n     * @param row - The row contextual data.\n     * @param data - The global data object.\n     * @return {boolean} - True if the condition applies to this component.\n     */\n\n  }, {\n    key: \"checkCondition\",\n    value: function checkCondition(row, data) {\n      return FormioUtils.checkCondition(this.component, row || this.data, data || this.rootValue, this.root ? this.root._form : {}, this);\n    }\n    /**\n     * Check for conditionals and hide/show the element based on those conditions.\n     */\n\n  }, {\n    key: \"checkComponentConditions\",\n    value: function checkComponentConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n\n      if (!this.builderMode && this.fieldLogic(data, row)) {\n        this.redraw();\n      } // Check advanced conditions\n\n\n      var visible = this.conditionallyVisible(data, row);\n\n      if (this.visible !== visible) {\n        this.visible = visible;\n      }\n\n      return visible;\n    }\n    /**\n     * Checks conditions for this component and any sub components.\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"checkConditions\",\n    value: function checkConditions(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.checkComponentConditions(data, flags, row);\n    }\n  }, {\n    key: \"logic\",\n    get: function get() {\n      return this.component.logic || [];\n    }\n    /**\n     * Check all triggers and apply necessary actions.\n     *\n     * @param data\n     */\n\n  }, {\n    key: \"fieldLogic\",\n    value: function fieldLogic(data, row) {\n      var _this10 = this;\n\n      data = data || this.rootValue;\n      row = row || this.data;\n      var logics = this.logic; // If there aren't logic, don't go further.\n\n      if (logics.length === 0) {\n        return;\n      }\n\n      var newComponent = (0, FormioUtils.fastCloneDeep)(this.originalComponent);\n      var changed = logics.reduce(function (changed, logic) {\n        var result = FormioUtils.checkTrigger(newComponent, logic.trigger, row, data, _this10.root ? _this10.root._form : {}, _this10);\n        return (result ? _this10.applyActions(newComponent, logic.actions, result, row, data) : false) || changed;\n      }, false); // If component definition changed, replace and mark as changed.\n\n      if (!_lodash.default.isEqual(this.component, newComponent)) {\n        this.component = newComponent;\n        changed = true;\n        var disabled = this.shouldDisabled; // Change disabled state if it has changed\n\n        if (this.disabled !== disabled) {\n          this.disabled = disabled;\n        }\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"isIE\",\n    value: function isIE() {\n      if (typeof window === 'undefined') {\n        return false;\n      }\n\n      var userAgent = window.navigator.userAgent;\n      var msie = userAgent.indexOf('MSIE ');\n\n      if (msie > 0) {\n        // IE 10 or older => return version number\n        return parseInt(userAgent.substring(msie + 5, userAgent.indexOf('.', msie)), 10);\n      }\n\n      var trident = userAgent.indexOf('Trident/');\n\n      if (trident > 0) {\n        // IE 11 => return version number\n        var rv = userAgent.indexOf('rv:');\n        return parseInt(userAgent.substring(rv + 3, userAgent.indexOf('.', rv)), 10);\n      }\n\n      var edge = userAgent.indexOf('Edge/');\n\n      if (edge > 0) {\n        // IE 12 (aka Edge) => return version number\n        return parseInt(userAgent.substring(edge + 5, userAgent.indexOf('.', edge)), 10);\n      } // other browser\n\n\n      return false;\n    }\n  }, {\n    key: \"applyActions\",\n    value: function applyActions(newComponent, actions, result, row, data) {\n      var _this11 = this;\n\n      data = data || this.rootValue;\n      row = row || this.data;\n      return actions.reduce(function (changed, action) {\n        switch (action.type) {\n          case 'property':\n            {\n              FormioUtils.setActionProperty(newComponent, action, result, row, data, _this11);\n              var property = action.property.value;\n\n              if (!_lodash.default.isEqual(_lodash.default.get(_this11.component, property), _lodash.default.get(newComponent, property))) {\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'value':\n            {\n              var oldValue = _this11.getValue();\n\n              var newValue = _this11.evaluate(action.value, {\n                value: _lodash.default.clone(oldValue),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              }, 'value');\n\n              if (!_lodash.default.isEqual(oldValue, newValue)) {\n                _this11.setValue(newValue);\n\n                if (_this11.viewOnly) {\n                  _this11.dataValue = newValue;\n                }\n\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'mergeComponentSchema':\n            {\n              var schema = _this11.evaluate(action.schemaDefinition, {\n                value: _lodash.default.clone(_this11.getValue()),\n                data: data,\n                row: row,\n                component: newComponent,\n                result: result\n              }, 'schema');\n\n              _lodash.default.assign(newComponent, schema);\n\n              if (!_lodash.default.isEqual(_this11.component, newComponent)) {\n                changed = true;\n              }\n\n              break;\n            }\n\n          case 'customAction':\n            {\n              var _oldValue = _this11.getValue();\n\n              var _newValue = _this11.evaluate(action.customAction, {\n                value: _lodash.default.clone(_oldValue),\n                data: data,\n                row: row,\n                input: _oldValue,\n                component: newComponent,\n                result: result\n              }, 'value');\n\n              if (!_lodash.default.isEqual(_oldValue, _newValue)) {\n                _this11.setValue(_newValue);\n\n                if (_this11.viewOnly) {\n                  _this11.dataValue = _newValue;\n                }\n\n                changed = true;\n              }\n\n              break;\n            }\n        }\n\n        return changed;\n      }, false);\n    } // Deprecated\n\n  }, {\n    key: \"addInputError\",\n    value: function addInputError(message, dirty, elements) {\n      this.addMessages(message);\n      this.setErrorClasses(elements, dirty, !!message);\n    } // Deprecated\n\n  }, {\n    key: \"removeInputError\",\n    value: function removeInputError(elements) {\n      this.setErrorClasses(elements, true, false);\n    }\n    /**\n     * Add a new input error to this element.\n     *\n     * @param message\n     * @param dirty\n     */\n\n  }, {\n    key: \"addMessages\",\n    value: function addMessages(messages) {\n      var _this12 = this;\n\n      if (!messages) {\n        return;\n      } // Standardize on array of objects for message.\n\n\n      if (typeof messages === 'string') {\n        messages = {\n          messages: messages,\n          level: 'error'\n        };\n      }\n\n      if (!Array.isArray(messages)) {\n        messages = [messages];\n      }\n\n      messages = _lodash.default.uniqBy(messages, function (message) {\n        return message.message;\n      });\n\n      if (this.refs.messageContainer) {\n        this.setContent(this.refs.messageContainer, messages.map(function (message) {\n          return _this12.renderTemplate('message', message);\n        }).join(''));\n      }\n    }\n  }, {\n    key: \"setErrorClasses\",\n    value: function setErrorClasses(elements, dirty, hasErrors, hasMessages) {\n      var _this13 = this;\n\n      var element = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.element;\n      this.clearErrorClasses();\n      elements.forEach(function (element) {\n        return _this13.removeClass(_this13.performInputMapping(element), 'is-invalid');\n      });\n      this.setInputWidgetErrorClasses(elements, hasErrors);\n\n      if (hasErrors) {\n        // Add error classes\n        elements.forEach(function (input) {\n          return _this13.addClass(_this13.performInputMapping(input), 'is-invalid');\n        });\n\n        if (dirty && this.options.highlightErrors) {\n          this.addClass(element, this.options.componentErrorClass);\n        } else {\n          this.addClass(element, 'has-error');\n        }\n      }\n\n      if (hasMessages) {\n        this.addClass(element, 'has-message');\n      }\n    }\n  }, {\n    key: \"clearOnHide\",\n    value: function clearOnHide() {\n      var _getDataParentCompone;\n\n      // clearOnHide defaults to true for old forms (without the value set) so only trigger if the value is false.\n      if ( // if change happens inside EditGrid's row, it doesn't trigger change on the root level, so rootPristine will be true\n      (!this.rootPristine || (_getDataParentCompone = (0, FormioUtils.getDataParentComponent)(this)) !== null && _getDataParentCompone !== void 0 && _getDataParentCompone.hasScopedChildren) && this.component.clearOnHide !== false && !this.options.readOnly && !this.options.showHiddenFields) {\n        if (!this.visible) {\n          this.deleteValue();\n        } else if (!this.hasValue()) {\n          // If shown, ensure the default is set.\n          this.setValue(this.defaultValue, {\n            noUpdateEvent: true\n          });\n        }\n      }\n    }\n  }, {\n    key: \"triggerRootChange\",\n    value: function triggerRootChange() {\n      if (this.options.onChange) {\n        var _this$options;\n\n        (_this$options = this.options).onChange.apply(_this$options, arguments);\n      } else if (this.root) {\n        var _this$root4;\n\n        (_this$root4 = this.root).triggerChange.apply(_this$root4, arguments);\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, fromRoot) {\n      flags = flags || {};\n\n      if (flags.modified) {\n        if (!flags.noPristineChangeOnModified) {\n          this.pristine = false;\n        }\n\n        this.addClass(this.getElement(), 'formio-modified');\n      } // If we are supposed to validate on blur, then don't trigger validation yet.\n\n\n      if (this.component.validateOn === 'blur' && !this.errors.length) {\n        flags.noValidate = true;\n      }\n\n      if (this.component.onChange) {\n        this.evaluate(this.component.onChange, {\n          flags: flags\n        });\n      } // Set the changed variable.\n\n\n      var changed = {\n        instance: this,\n        component: this.component,\n        value: this.dataValue,\n        flags: flags\n      }; // Emit the change.\n\n      this.emit('componentChange', changed); // Do not propogate the modified flag.\n\n      var modified = false;\n\n      if (flags.modified) {\n        modified = true;\n        delete flags.modified;\n      } // Bubble this change up to the top.\n\n\n      if (!fromRoot) {\n        this.triggerRootChange(flags, changed, modified);\n      }\n\n      return changed;\n    }\n  }, {\n    key: \"wysiwygDefault\",\n    get: function get() {\n      return {\n        quill: {\n          theme: 'snow',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          }),\n          modules: {\n            toolbar: [[{\n              'size': ['small', false, 'large', 'huge']\n            }], // custom dropdown\n            [{\n              'header': [1, 2, 3, 4, 5, 6, false]\n            }], [{\n              'font': []\n            }], ['bold', 'italic', 'underline', 'strike', {\n              'script': 'sub'\n            }, {\n              'script': 'super'\n            }, 'clean'], [{\n              'color': []\n            }, {\n              'background': []\n            }], [{\n              'list': 'ordered'\n            }, {\n              'list': 'bullet'\n            }, {\n              'indent': '-1'\n            }, {\n              'indent': '+1'\n            }, {\n              'align': []\n            }], ['blockquote', 'code-block'], ['link', 'image', 'video', 'formula', 'source']]\n          }\n        },\n        ace: {\n          theme: 'ace/theme/xcode',\n          maxLines: 12,\n          minLines: 12,\n          tabSize: 2,\n          mode: 'ace/mode/javascript',\n          placeholder: this.t(this.component.placeholder, {\n            _userInput: true\n          })\n        },\n        ckeditor: {\n          image: {\n            toolbar: ['imageTextAlternative', '|', 'imageStyle:full', 'imageStyle:alignLeft', 'imageStyle:alignCenter', 'imageStyle:alignRight'],\n            styles: ['full', 'alignLeft', 'alignCenter', 'alignRight']\n          },\n          extraPlugins: []\n        },\n        default: {}\n      };\n    }\n  }, {\n    key: \"addCKE\",\n    value: function addCKE(element, settings, onChange) {\n      settings = _lodash.default.isEmpty(settings) ? {} : settings;\n      settings.base64Upload = this.component.isUploadEnabled ? false : true;\n      settings.mediaEmbed = {\n        previewsInData: true\n      };\n      settings = _lodash.default.merge(this.wysiwygDefault.ckeditor, _lodash.default.get(this.options, 'editors.ckeditor.settings', {}), settings);\n\n      if (this.component.isUploadEnabled) {\n        settings.extraPlugins.push((0, _uploadAdapter.getFormioUploadAdapterPlugin)(this.fileService, this));\n      }\n\n      return _Formio.default.requireLibrary('ckeditor', isIEBrowser ? 'CKEDITOR' : 'ClassicEditor', _lodash.default.get(this.options, 'editors.ckeditor.src', CKEDITOR_URL), true).then(function () {\n        if (!element.parentNode) {\n          return _nativePromiseOnly.default.reject();\n        }\n\n        if (isIEBrowser) {\n          var editor = CKEDITOR.replace(element);\n          editor.on('change', function () {\n            return onChange(editor.getData());\n          });\n          return _nativePromiseOnly.default.resolve(editor);\n        } else {\n          return ClassicEditor.create(element, settings).then(function (editor) {\n            editor.model.document.on('change', function () {\n              return onChange(editor.data.get());\n            });\n            return editor;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"addQuill\",\n    value: function addQuill(element, settings, onChange) {\n      var _this14 = this;\n\n      settings = _lodash.default.isEmpty(settings) ? this.wysiwygDefault.quill : settings;\n      settings = _lodash.default.merge(this.wysiwygDefault.quill, _lodash.default.get(this.options, 'editors.quill.settings', {}), settings);\n      settings = _objectSpread(_objectSpread({}, settings), {}, {\n        modules: {\n          table: true\n        }\n      }); // Lazy load the quill css.\n\n      _Formio.default.requireLibrary(\"quill-css-\".concat(settings.theme), 'Quill', [{\n        type: 'styles',\n        src: \"\".concat(QUILL_URL, \"/quill.\").concat(settings.theme, \".css\")\n      }], true); // Lazy load the quill library.\n\n\n      return _Formio.default.requireLibrary('quill', 'Quill', _lodash.default.get(this.options, 'editors.quill.src', \"\".concat(QUILL_URL, \"/quill.min.js\")), true).then(function () {\n        return _Formio.default.requireLibrary('quill-table', 'Quill', QUILL_TABLE_URL, true).then(function () {\n          if (!element.parentNode) {\n            return _nativePromiseOnly.default.reject();\n          }\n\n          _this14.quill = new Quill(element, isIEBrowser ? _objectSpread(_objectSpread({}, settings), {}, {\n            modules: {}\n          }) : settings);\n          /** This block of code adds the [source] capabilities.  See https://codepen.io/anon/pen/ZyEjrQ **/\n\n          var txtArea = document.createElement('textarea');\n          txtArea.setAttribute('class', 'quill-source-code');\n\n          _this14.quill.addContainer('ql-custom').appendChild(txtArea);\n\n          var qlSource = element.parentNode.querySelector('.ql-source');\n\n          if (qlSource) {\n            _this14.addEventListener(qlSource, 'click', function (event) {\n              event.preventDefault();\n\n              if (txtArea.style.display === 'inherit') {\n                _this14.quill.setContents(_this14.quill.clipboard.convert(txtArea.value));\n              }\n\n              txtArea.style.display = txtArea.style.display === 'none' ? 'inherit' : 'none';\n            });\n          }\n          /** END CODEBLOCK **/\n          // Make sure to select cursor when they click on the element.\n\n\n          _this14.addEventListener(element, 'click', function () {\n            return _this14.quill.focus();\n          }); // Allows users to skip toolbar items when tabbing though form\n\n\n          var elm = document.querySelectorAll('.ql-formats > button');\n\n          for (var i = 0; i < elm.length; i++) {\n            elm[i].setAttribute('tabindex', '-1');\n          }\n\n          _this14.quill.on('text-change', function () {\n            txtArea.value = _this14.quill.root.innerHTML;\n            onChange(txtArea);\n          });\n\n          return _this14.quill;\n        });\n      });\n    }\n  }, {\n    key: \"addAce\",\n    value: function addAce(element, settings, onChange) {\n      if (!settings || settings.theme === 'snow') {\n        var mode = settings ? settings.mode : '';\n        settings = {};\n\n        if (mode) {\n          settings.mode = mode;\n        }\n      }\n\n      settings = _lodash.default.merge(this.wysiwygDefault.ace, _lodash.default.get(this.options, 'editors.ace.settings', {}), settings || {});\n      return _Formio.default.requireLibrary('ace', 'ace', _lodash.default.get(this.options, 'editors.ace.src', ACE_URL), true).then(function (editor) {\n        editor = editor.edit(element);\n        editor.removeAllListeners('change');\n        editor.setOptions(settings);\n        editor.getSession().setMode(settings.mode);\n        editor.on('change', function () {\n          return onChange(editor.getValue());\n        });\n\n        if (settings.isUseWorkerDisabled) {\n          editor.session.setUseWorker(false);\n        }\n\n        return editor;\n      });\n    }\n  }, {\n    key: \"tree\",\n    get: function get() {\n      return this.component.tree || false;\n    }\n    /**\n     * The empty value for this component.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"emptyValue\",\n    get: function get() {\n      return null;\n    }\n    /**\n     * Returns if this component has a value set.\n     *\n     */\n\n  }, {\n    key: \"hasValue\",\n    value: function hasValue(data) {\n      return _lodash.default.has(data || this.data, this.key);\n    }\n    /**\n     * Get the data value at the root level.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"rootValue\",\n    get: function get() {\n      return this.root ? this.root.data : this.data;\n    }\n  }, {\n    key: \"rootPristine\",\n    get: function get() {\n      return _lodash.default.get(this, 'root.pristine', false);\n    }\n    /**\n     * Get the static value of this component.\n     * @return {*}\n     */\n\n  }, {\n    key: \"dataValue\",\n    get: function get() {\n      if (!this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return this.emptyValue;\n      }\n\n      if (!this.hasValue()) {\n        var empty = this.component.multiple ? [] : this.emptyValue;\n\n        if (!this.rootPristine) {\n          this.dataValue = empty;\n        }\n\n        return empty;\n      }\n\n      return _lodash.default.get(this._data, this.key);\n    }\n    /**\n     * Sets the static value of this component.\n     *\n     * @param value\n     */\n    ,\n    set: function set(value) {\n      if (!this.allowData || !this.key || !this.visible && this.component.clearOnHide && !this.rootPristine) {\n        return;\n      }\n\n      if (value !== null && value !== undefined) {\n        value = this.hook('setDataValue', value, this.key, this._data);\n      }\n\n      if (value === null || value === undefined) {\n        this.unset();\n        return;\n      }\n\n      _lodash.default.set(this._data, this.key, value);\n\n      return;\n    }\n    /**\n     * Splice a value from the dataValue.\n     *\n     * @param index\n     */\n\n  }, {\n    key: \"splice\",\n    value: function splice(index) {\n      if (this.hasValue()) {\n        var dataValue = this.dataValue || [];\n\n        if (_lodash.default.isArray(dataValue) && dataValue.hasOwnProperty(index)) {\n          dataValue.splice(index, 1);\n          this.dataValue = dataValue;\n          this.triggerChange();\n        }\n      }\n    }\n  }, {\n    key: \"unset\",\n    value: function unset() {\n      _lodash.default.unset(this._data, this.key);\n    }\n    /**\n     * Deletes the value of the component.\n     */\n\n  }, {\n    key: \"deleteValue\",\n    value: function deleteValue() {\n      this.setValue(null, {\n        noUpdateEvent: true,\n        noDefault: true\n      });\n      this.unset();\n    }\n  }, {\n    key: \"defaultValue\",\n    get: function get() {\n      var _this15 = this;\n\n      var defaultValue = this.emptyValue;\n\n      if (this.component.defaultValue) {\n        defaultValue = this.component.defaultValue;\n      }\n\n      if (this.component.customDefaultValue && !this.options.preview) {\n        defaultValue = this.evaluate(this.component.customDefaultValue, {\n          value: ''\n        }, 'value');\n      }\n\n      var checkMask = function checkMask(value) {\n        if (typeof value === 'string') {\n          var placeholderChar = _this15.placeholderChar;\n          value = (0, _vanillaTextMask.conformToMask)(value, _this15.defaultMask, {\n            placeholderChar: placeholderChar\n          }).conformedValue;\n\n          if (!FormioUtils.matchInputMask(value, _this15.defaultMask)) {\n            value = '';\n          }\n        } else {\n          value = '';\n        }\n\n        return value;\n      };\n\n      if (this.defaultMask) {\n        if (Array.isArray(defaultValue)) {\n          defaultValue = defaultValue.map(checkMask);\n        } else {\n          defaultValue = checkMask(defaultValue);\n        }\n      } // Clone so that it creates a new instance.\n\n\n      return _lodash.default.cloneDeep(defaultValue);\n    }\n    /**\n     * Get the input value of this component.\n     *\n     * @return {*}\n     */\n\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (!this.hasInput || this.viewOnly || !this.refs.input || !this.refs.input.length) {\n        return this.dataValue;\n      }\n\n      var values = [];\n\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          if (!this.component.multiple) {\n            return this.getValueAt(i);\n          }\n\n          values.push(this.getValueAt(i));\n        }\n      }\n\n      if (values.length === 0 && !this.component.multiple) {\n        return '';\n      }\n\n      return values;\n    }\n    /**\n     * Get the value at a specific index.\n     *\n     * @param index\n     * @returns {*}\n     */\n\n  }, {\n    key: \"getValueAt\",\n    value: function getValueAt(index) {\n      var input = this.performInputMapping(this.refs.input[index]);\n      return input ? input.value : undefined;\n    }\n    /**\n     * Set the value of this component.\n     *\n     * @param value\n     * @param flags\n     *\n     * @return {boolean} - If the value changed.\n     */\n\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      value = this.dataValue;\n\n      if (!this.hasInput) {\n        return changed;\n      }\n\n      var isArray = Array.isArray(value);\n\n      if (isArray && Array.isArray(this.defaultValue) && this.refs.hasOwnProperty('input') && this.refs.input && this.refs.input.length !== value.length && this.visible) {\n        this.redraw();\n      }\n\n      if (this.isHtmlRenderMode() && flags && flags.fromSubmission && changed) {\n        this.redraw();\n        return changed;\n      }\n\n      for (var i in this.refs.input) {\n        if (this.refs.input.hasOwnProperty(i)) {\n          this.setValueAt(i, isArray ? value[i] : value, flags);\n        }\n      }\n\n      return changed;\n    }\n    /**\n     * Set the value at a specific index.\n     *\n     * @param index\n     * @param value\n     */\n\n  }, {\n    key: \"setValueAt\",\n    value: function setValueAt(index, value) {\n      var flags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!flags.noDefault && (value === null || value === undefined) && !this.component.multiple) {\n        value = this.defaultValue;\n      }\n\n      var input = this.performInputMapping(this.refs.input[index]);\n\n      if (input.mask) {\n        input.mask.textMaskInputElement.update(value);\n      } else if (input.widget && input.widget.setValue) {\n        input.widget.setValue(value);\n      } else {\n        input.value = value;\n      }\n    }\n  }, {\n    key: \"hasSetValue\",\n    get: function get() {\n      return this.hasValue() && !this.isEmpty(this.dataValue);\n    }\n  }, {\n    key: \"setDefaultValue\",\n    value: function setDefaultValue() {\n      if (this.defaultValue) {\n        var defaultValue = this.component.multiple && !this.dataValue.length ? [] : this.defaultValue;\n        this.setValue(defaultValue, {\n          noUpdateEvent: true\n        });\n      }\n    }\n    /**\n     * Restore the value of a control.\n     */\n\n  }, {\n    key: \"restoreValue\",\n    value: function restoreValue() {\n      if (this.hasSetValue) {\n        this.setValue(this.dataValue, {\n          noUpdateEvent: true\n        });\n      } else {\n        this.setDefaultValue();\n      }\n    }\n    /**\n     * Normalize values coming into updateValue.\n     *\n     * @param value\n     * @return {*}\n     */\n\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(value) {\n      if (this.component.multiple && !Array.isArray(value)) {\n        value = value ? [value] : [];\n      }\n\n      return value;\n    }\n    /**\n     * Update a value of this component.\n     *\n     * @param flags\n     */\n\n  }, {\n    key: \"updateComponentValue\",\n    value: function updateComponentValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var newValue = !flags.resetValue && (value === undefined || value === null) ? this.getValue() : value;\n      newValue = this.normalizeValue(newValue, flags);\n      var changed = newValue !== undefined ? this.hasChanged(newValue, this.dataValue) : false;\n\n      if (changed) {\n        this.dataValue = newValue;\n        this.updateOnChange(flags, changed);\n      }\n\n      if (this.componentModal && flags && flags.fromSubmission) {\n        this.componentModal.setValue(value);\n      }\n\n      return changed;\n    }\n    /**\n     * Updates the value of this component plus all sub-components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"updateValue\",\n    value: function updateValue() {\n      return this.updateComponentValue.apply(this, arguments);\n    }\n  }, {\n    key: \"getIcon\",\n    value: function getIcon(name, content, styles) {\n      var ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'icon';\n      return this.renderTemplate('icon', {\n        className: this.iconClass(name),\n        ref: ref,\n        styles: styles,\n        content: content\n      });\n    }\n    /**\n     * Resets the value of this component.\n     */\n\n  }, {\n    key: \"resetValue\",\n    value: function resetValue() {\n      this.unset();\n      this.setValue(this.emptyValue, {\n        noUpdateEvent: true,\n        noValidate: true,\n        resetValue: true\n      });\n    }\n    /**\n     * Determine if the value of this component has changed.\n     *\n     * @param newValue\n     * @param oldValue\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"hasChanged\",\n    value: function hasChanged(newValue, oldValue) {\n      if ((newValue === undefined || newValue === null) && (oldValue === undefined || oldValue === null || this.isEmpty(oldValue))) {\n        return false;\n      } // If we do not have a value and are getting set to anything other than undefined or null, then we changed.\n\n\n      if (newValue !== undefined && newValue !== null && this.allowData && !this.hasValue()) {\n        return true;\n      }\n\n      return !_lodash.default.isEqual(newValue, oldValue);\n    }\n    /**\n     * Update the value on change.\n     *\n     * @param flags\n     */\n\n  }, {\n    key: \"updateOnChange\",\n    value: function updateOnChange() {\n      var flags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var changed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!flags.noUpdateEvent && changed) {\n        this.triggerChange(flags);\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Perform a calculated value operation.\n     *\n     * @param data - The global data object.\n     *\n     * @return {boolean} - If the value changed during calculation.\n     */\n\n  }, {\n    key: \"convertNumberOrBoolToString\",\n    value: function convertNumberOrBoolToString(value) {\n      if (typeof value === 'number' || typeof value === 'boolean') {\n        return value.toString();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"calculateComponentValue\",\n    value: function calculateComponentValue(data, flags, row) {\n      // If no calculated value or\n      // hidden and set to clearOnHide (Don't calculate a value for a hidden field set to clear when hidden)\n      var _this$component = this.component,\n          hidden = _this$component.hidden,\n          clearOnHide = _this$component.clearOnHide;\n      var shouldBeCleared = (!this.visible || hidden) && clearOnHide && !this.rootPristine; // Handle all cases when calculated values should not fire.\n\n      if (this.options.readOnly && !this.options.pdf || !this.component.calculateValue || shouldBeCleared || this.options.server && !this.component.calculateServer || flags.dataSourceInitialLoading) {\n        return false;\n      }\n\n      var dataValue = this.dataValue;\n      var calculatedValue = this.evaluate(this.component.calculateValue, {\n        value: dataValue,\n        data: data,\n        row: row || this.data\n      }, 'value');\n\n      if (_lodash.default.isNil(calculatedValue)) {\n        calculatedValue = this.emptyValue;\n      }\n\n      var changed = !_lodash.default.isEqual(dataValue, calculatedValue);\n\n      if (flags.fromSubmission && this.component.persistent === true) {\n        // If we set value from submission and it differs from calculated one, set the calculated value to prevent overriding dataValue in the next pass\n        this.calculatedValue = calculatedValue;\n        return false;\n      } // Do not override calculations on server if they have calculateServer set.\n\n\n      if (this.component.allowCalculateOverride) {\n        var firstPass = this.calculatedValue === undefined;\n\n        if (firstPass) {\n          this.calculatedValue = null;\n        }\n\n        var newCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(calculatedValue));\n        var previousCalculatedValue = this.normalizeValue(this.convertNumberOrBoolToString(this.calculatedValue));\n        var calculationChanged = !_lodash.default.isEqual(previousCalculatedValue, newCalculatedValue);\n        var previousChanged = !_lodash.default.isEqual(dataValue, previousCalculatedValue); // Check to ensure that the calculated value is different than the previously calculated value.\n\n        if (previousCalculatedValue && previousChanged && !calculationChanged) {\n          return false;\n        }\n\n        if (flags.isReordered || !calculationChanged) {\n          return false;\n        } // If this is the firstPass, and the dataValue is different than to the calculatedValue.\n\n\n        if (firstPass && !this.isEmpty(dataValue) && changed && calculationChanged) {\n          // Return that we have a change so it will perform another pass.\n          return true;\n        }\n      }\n\n      this.calculatedValue = calculatedValue;\n      return changed ? this.setValue(calculatedValue, flags) : false;\n    }\n    /**\n     * Performs calculations in this component plus any child components.\n     *\n     * @param args\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"calculateValue\",\n    value: function calculateValue(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data;\n      return this.calculateComponentValue(data, flags, row);\n    }\n    /**\n     * Get this component's label text.\n     *\n     */\n\n  }, {\n    key: \"label\",\n    get: function get() {\n      return this.component.label;\n    }\n    /**\n     * Set this component's label text and render it.\n     *\n     * @param value - The new label text.\n     */\n    ,\n    set: function set(value) {\n      this.component.label = value;\n\n      if (this.labelElement) {\n        this.labelElement.innerText = value;\n      }\n    }\n    /**\n     * Get FormioForm element at the root of this component tree.\n     *\n     */\n\n  }, {\n    key: \"getRoot\",\n    value: function getRoot() {\n      return this.root;\n    }\n    /**\n     * Returns the invalid message, or empty string if the component is valid.\n     *\n     * @param data\n     * @param dirty\n     * @return {*}\n     */\n\n  }, {\n    key: \"invalidMessage\",\n    value: function invalidMessage(data, dirty, ignoreCondition, row) {\n      if (!ignoreCondition && !this.checkCondition(row, data)) {\n        return '';\n      } // See if this is forced invalid.\n\n\n      if (this.invalid) {\n        return this.invalid;\n      } // No need to check for errors if there is no input or if it is pristine.\n\n\n      if (!this.hasInput || !dirty && this.pristine) {\n        return '';\n      }\n\n      return _lodash.default.map(_Validator.default.checkComponent(this, data), 'message').join('\\n\\n');\n    }\n    /**\n     * Returns if the component is valid or not.\n     *\n     * @param data\n     * @param dirty\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function isValid(data, dirty) {\n      return !this.invalidMessage(data, dirty);\n    }\n  }, {\n    key: \"setComponentValidity\",\n    value: function setComponentValidity(messages, dirty, silentCheck) {\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error' && !message.fromServer;\n      }).length;\n\n      if (messages.length && (!silentCheck || this.error) && (dirty || !this.pristine)) {\n        this.setCustomValidity(messages, dirty);\n      } else if (!silentCheck) {\n        this.setCustomValidity('');\n      }\n\n      return !hasErrors;\n    }\n    /**\n     * Checks the validity of this component and sets the error message if it is invalid.\n     *\n     * @param data\n     * @param dirty\n     * @param row\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"checkComponentValidity\",\n    value: function checkComponentValidity(data, dirty, row) {\n      var _this$serverErrors,\n          _this16 = this;\n\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      data = data || this.rootValue;\n      row = row || this.data;\n      var _options$async = options.async,\n          async = _options$async === void 0 ? false : _options$async,\n          _options$silentCheck = options.silentCheck,\n          silentCheck = _options$silentCheck === void 0 ? false : _options$silentCheck;\n\n      if (this.shouldSkipValidation(data, dirty, row)) {\n        this.setCustomValidity('');\n        return async ? _nativePromiseOnly.default.resolve(true) : true;\n      }\n\n      var check = _Validator.default.checkComponent(this, data, row, true, async);\n\n      var validations = check;\n\n      if ((_this$serverErrors = this.serverErrors) !== null && _this$serverErrors !== void 0 && _this$serverErrors.length) {\n        validations = check.concat(this.serverErrors);\n      }\n\n      return async ? validations.then(function (messages) {\n        return _this16.setComponentValidity(messages, dirty, silentCheck);\n      }) : this.setComponentValidity(validations, dirty, silentCheck);\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty, row, silentCheck) {\n      data = data || this.rootValue;\n      row = row || this.data;\n      var isValid = this.checkComponentValidity(data, dirty, row, {\n        silentCheck: silentCheck\n      });\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkAsyncValidity\",\n    value: function checkAsyncValidity(data, dirty, row, silentCheck) {\n      return _nativePromiseOnly.default.resolve(this.checkComponentValidity(data, dirty, row, {\n        async: true,\n        silentCheck: silentCheck\n      }));\n    }\n    /**\n     * Check the conditions, calculations, and validity of a single component and triggers an update if\n     * something changed.\n     *\n     * @param data - The root data of the change event.\n     * @param flags - The flags from this change event.\n     *\n     * @return boolean - If component is valid or not.\n     */\n\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      data = data || this.rootValue;\n      flags = flags || {};\n      row = row || this.data; // Do not trigger refresh if change was triggered on blur event since components with Refresh on Blur have their own listeners\n\n      if (!flags.fromBlur) {\n        this.checkRefreshOn(flags.changes, flags);\n      }\n\n      if (flags.noCheck) {\n        return true;\n      }\n\n      this.calculateComponentValue(data, flags, row);\n      this.checkComponentConditions(data, flags, row);\n\n      if (flags.noValidate && !flags.validateOnInit && !flags.fromIframe) {\n        if (flags.fromSubmission && this.rootPristine && this.pristine && this.error && flags.changed) {\n          this.checkComponentValidity(data, !!this.options.alwaysDirty, row, true);\n        }\n\n        return true;\n      }\n\n      var isDirty = false; // We need to set dirty if they explicitly set noValidate to false.\n\n      if (this.options.alwaysDirty || flags.dirty) {\n        isDirty = true;\n      } // See if they explicitely set the values with setSubmission.\n\n\n      if (flags.fromSubmission && this.hasValue(data)) {\n        isDirty = true;\n      }\n\n      this.setDirty(isDirty);\n\n      if (this.component.validateOn === 'blur' && flags.fromSubmission) {\n        return true;\n      }\n\n      var isValid = this.checkComponentValidity(data, isDirty, row, flags);\n      this.checkModal();\n      return isValid;\n    }\n  }, {\n    key: \"checkModal\",\n    value: function checkModal() {\n      if (!this.component.modalEdit || !this.componentModal) {\n        return;\n      }\n    }\n  }, {\n    key: \"validationValue\",\n    get: function get() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.dataValue;\n      var isEmptyArray = _lodash.default.isArray(value) && value.length === 1 ? _lodash.default.isEqual(value[0], this.emptyValue) : false;\n      return value == null || value.length === 0 || _lodash.default.isEqual(value, this.emptyValue) || isEmptyArray;\n    }\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(valueA) {\n      var valueB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.dataValue;\n      return this.isEmpty(valueA) && this.isEmpty(valueB) || _lodash.default.isEqual(valueA, valueB);\n    }\n    /**\n     * Check if a component is eligible for multiple validation\n     *\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"validateMultiple\",\n    value: function validateMultiple() {\n      return true;\n    }\n  }, {\n    key: \"errors\",\n    get: function get() {\n      return this.error ? [this.error] : [];\n    }\n  }, {\n    key: \"clearErrorClasses\",\n    value: function clearErrorClasses() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n      this.removeClass(element, this.options.componentErrorClass);\n      this.removeClass(element, 'alert alert-danger');\n      this.removeClass(element, 'has-error');\n      this.removeClass(element, 'has-message');\n    }\n  }, {\n    key: \"setInputWidgetErrorClasses\",\n    value: function setInputWidgetErrorClasses(inputRefs, hasErrors) {\n      if (!this.isInputComponent || !this.component.widget || !(inputRefs !== null && inputRefs !== void 0 && inputRefs.length)) {\n        return;\n      }\n\n      inputRefs.forEach(function (input) {\n        if (input !== null && input !== void 0 && input.widget && input.widget.setErrorClasses) {\n          input.widget.setErrorClasses(hasErrors);\n        }\n      });\n    }\n  }, {\n    key: \"setCustomValidity\",\n    value: function setCustomValidity(messages, dirty, external) {\n      var inputRefs = this.isInputComponent ? this.refs.input || [] : null;\n\n      if (typeof messages === 'string' && messages) {\n        messages = {\n          level: 'error',\n          message: messages\n        };\n      }\n\n      if (!Array.isArray(messages)) {\n        if (messages) {\n          messages = [messages];\n        } else {\n          messages = [];\n        }\n      }\n\n      var hasErrors = !!messages.filter(function (message) {\n        return message.level === 'error';\n      }).length;\n\n      if (messages.length) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n\n        this.error = {\n          component: this.component,\n          message: messages[0].message,\n          messages: messages,\n          external: !!external\n        };\n        this.emit('componentError', this.error);\n        this.addMessages(messages, dirty, inputRefs);\n\n        if (inputRefs) {\n          this.setErrorClasses(inputRefs, dirty, hasErrors, !!messages.length);\n        }\n      } else if (this.error && this.error.external === !!external) {\n        if (this.refs.messageContainer) {\n          this.empty(this.refs.messageContainer);\n        }\n\n        if (this.refs.modalMessageContainer) {\n          this.empty(this.refs.modalMessageContainer);\n        }\n\n        this.error = null;\n\n        if (inputRefs) {\n          this.setErrorClasses(inputRefs, dirty, hasErrors, !!messages.length);\n        }\n\n        this.clearErrorClasses();\n      } // if (!this.refs.input) {\n      //   return;\n      // }\n      // this.refs.input.forEach(input => {\n      //   input = this.performInputMapping(input);\n      //   if (typeof input.setCustomValidity === 'function') {\n      //     input.setCustomValidity(message, dirty);\n      //   }\n      // });\n\n    }\n    /**\n     * Determines if the value of this component is hidden from the user as if it is coming from the server, but is\n     * protected.\n     *\n     * @return {boolean|*}\n     */\n\n  }, {\n    key: \"isValueHidden\",\n    value: function isValueHidden() {\n      if (!this.root || !this.root.hasOwnProperty('editing')) {\n        return false;\n      }\n\n      if (!this.root || !this.root.editing) {\n        return false;\n      }\n\n      return this.component.protected || !this.component.persistent || this.component.persistent === 'client-only';\n    }\n  }, {\n    key: \"shouldSkipValidation\",\n    value: function shouldSkipValidation(data, dirty, row) {\n      var _this17 = this;\n\n      var rules = [// Force valid if component is read-only\n      function () {\n        return _this17.options.readOnly;\n      }, // Check to see if we are editing and if so, check component persistence.\n      function () {\n        return _this17.isValueHidden();\n      }, // Force valid if component is hidden.\n      function () {\n        return !_this17.visible;\n      }, // Force valid if component is conditionally hidden.\n      function () {\n        return !_this17.checkCondition(row, data);\n      }];\n      return rules.some(function (pred) {\n        return pred();\n      });\n    } // Maintain reverse compatibility.\n\n  }, {\n    key: \"whenReady\",\n    value: function whenReady() {\n      console.warn('The whenReady() method has been deprecated. Please use the dataReady property instead.');\n      return this.dataReady;\n    }\n  }, {\n    key: \"dataReady\",\n    get: function get() {\n      return _nativePromiseOnly.default.resolve();\n    }\n    /**\n     * Prints out the value of this component as a string value.\n     */\n\n  }, {\n    key: \"asString\",\n    value: function asString(value) {\n      value = value || this.getValue();\n      return (Array.isArray(value) ? value : [value]).map(_lodash.default.toString).join(', ');\n    }\n    /**\n     * Return if the component is disabled.\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return this._disabled || this.parentDisabled;\n    }\n    /**\n     * Disable this component.\n     *\n     * @param {boolean} disabled\n     */\n    ,\n    set: function set(disabled) {\n      this._disabled = disabled;\n    }\n  }, {\n    key: \"setDisabled\",\n    value: function setDisabled(element, disabled) {\n      if (!element) {\n        return;\n      }\n\n      element.disabled = disabled;\n\n      if (disabled) {\n        element.setAttribute('disabled', 'disabled');\n      } else {\n        element.removeAttribute('disabled');\n      }\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(element, loading) {\n      if (!element || element.loading === loading) {\n        return;\n      }\n\n      element.loading = loading;\n\n      if (!element.loader && loading) {\n        element.loader = this.ce('i', {\n          class: \"\".concat(this.iconClass('refresh', true), \" button-icon-right\")\n        });\n      }\n\n      if (element.loader) {\n        if (loading) {\n          this.appendTo(element.loader, element);\n        } else {\n          this.removeChildFrom(element.loader, element);\n        }\n      }\n    }\n  }, {\n    key: \"selectOptions\",\n    value: function selectOptions(select, tag, options, defaultValue) {\n      var _this18 = this;\n\n      _lodash.default.each(options, function (option) {\n        var attrs = {\n          value: option.value\n        };\n\n        if (defaultValue !== undefined && option.value === defaultValue) {\n          attrs.selected = 'selected';\n        }\n\n        var optionElement = _this18.ce('option', attrs);\n\n        optionElement.appendChild(_this18.text(option.label));\n        select.appendChild(optionElement);\n      });\n    }\n  }, {\n    key: \"setSelectValue\",\n    value: function setSelectValue(select, value) {\n      var options = select.querySelectorAll('option');\n\n      _lodash.default.each(options, function (option) {\n        if (option.value === value) {\n          option.setAttribute('selected', 'selected');\n        } else {\n          option.removeAttribute('selected');\n        }\n      });\n\n      if (select.onchange) {\n        select.onchange();\n      }\n\n      if (select.onselect) {\n        select.onselect();\n      }\n    }\n  }, {\n    key: \"getRelativePath\",\n    value: function getRelativePath(path) {\n      var keyPart = \".\".concat(this.key);\n      var thisPath = this.isInputComponent ? this.path : this.path.slice(0).replace(keyPart, '');\n      return path.replace(thisPath, '');\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.detach();\n      this.empty(this.getElement());\n    }\n  }, {\n    key: \"append\",\n    value: function append(element) {\n      this.appendTo(element, this.element);\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend(element) {\n      this.prependTo(element, this.element);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(element) {\n      this.removeChildFrom(element, this.element);\n    }\n  }, {\n    key: \"detachLogic\",\n    value: function detachLogic() {\n      var _this19 = this;\n\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this19.interpolate(logic.trigger.event);\n\n          _this19.off(event); // only applies to callbacks on this component\n\n        }\n      });\n    }\n  }, {\n    key: \"attachLogic\",\n    value: function attachLogic() {\n      var _this20 = this;\n\n      // Do not attach logic during builder mode.\n      if (this.builderMode) {\n        return;\n      }\n\n      this.logic.forEach(function (logic) {\n        if (logic.trigger.type === 'event') {\n          var event = _this20.interpolate(logic.trigger.event);\n\n          _this20.on(event, function () {\n            var newComponent = (0, FormioUtils.fastCloneDeep)(_this20.originalComponent);\n\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              args[_key4] = arguments[_key4];\n            }\n\n            if (_this20.applyActions(newComponent, logic.actions, args)) {\n              // If component definition changed, replace it.\n              if (!_lodash.default.isEqual(_this20.component, newComponent)) {\n                _this20.component = newComponent;\n\n                var visible = _this20.conditionallyVisible(null, null);\n\n                var disabled = _this20.shouldDisabled; // Change states which won't be recalculated during redrawing\n\n                if (_this20.visible !== visible) {\n                  _this20.visible = visible;\n                }\n\n                if (_this20.disabled !== disabled) {\n                  _this20.disabled = disabled;\n                }\n\n                _this20.redraw();\n              }\n            }\n          }, true);\n        }\n      });\n    }\n    /**\n     * Get the element information.\n     */\n\n  }, {\n    key: \"elementInfo\",\n    value: function elementInfo() {\n      var attributes = {\n        name: this.options.name,\n        type: this.component.inputType || 'text',\n        class: 'form-control',\n        lang: this.options.language\n      };\n\n      if (this.component.placeholder) {\n        attributes.placeholder = this.t(this.component.placeholder, {\n          _userInput: true\n        });\n      }\n\n      if (this.component.tabindex) {\n        attributes.tabindex = this.component.tabindex;\n      }\n\n      if (this.disabled) {\n        attributes.disabled = 'disabled';\n      }\n\n      _lodash.default.defaults(attributes, this.component.attributes);\n\n      return {\n        type: 'input',\n        component: this.component,\n        changeEvent: 'change',\n        attr: attributes\n      };\n    }\n  }, {\n    key: \"autofocus\",\n    value: function autofocus() {\n      var _this21 = this;\n\n      var hasAutofocus = this.component.autofocus && !this.builderMode && !this.options.preview;\n\n      if (hasAutofocus) {\n        this.on('render', function () {\n          return _this21.focus();\n        }, true);\n      }\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView() {\n      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n\n      if (!element) {\n        return;\n      }\n\n      var _element$getBoundingC = element.getBoundingClientRect(),\n          left = _element$getBoundingC.left,\n          top = _element$getBoundingC.top;\n\n      window.scrollTo(left + window.scrollX, top + window.scrollY);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus(index) {\n      var _this$refs$input2;\n\n      if ('beforeFocus' in this.parent) {\n        this.parent.beforeFocus(this);\n      }\n\n      if ((_this$refs$input2 = this.refs.input) !== null && _this$refs$input2 !== void 0 && _this$refs$input2.length) {\n        var _this$component$widge;\n\n        var focusingInput = typeof index === 'number' && this.refs.input[index] ? this.refs.input[index] : this.refs.input[this.refs.input.length - 1];\n\n        if (((_this$component$widge = this.component.widget) === null || _this$component$widge === void 0 ? void 0 : _this$component$widge.type) === 'calendar') {\n          var sibling = focusingInput.nextSibling;\n\n          if (sibling) {\n            sibling.focus();\n          }\n        } else {\n          focusingInput.focus();\n        }\n      }\n\n      if (this.refs.openModal) {\n        this.refs.openModal.focus();\n      }\n\n      if (this.parent.refs.openModal) {\n        this.parent.refs.openModal.focus();\n      }\n    }\n    /**\n     * Get `Formio` instance for working with files\n     */\n\n  }, {\n    key: \"fileService\",\n    get: function get() {\n      if (this.options.fileService) {\n        return this.options.fileService;\n      }\n\n      if (this.options.formio) {\n        return this.options.formio;\n      }\n\n      if (this.root && this.root.formio) {\n        return this.root.formio;\n      }\n\n      var formio = new _Formio.default(); // If a form is loaded, then make sure to set the correct formUrl.\n\n      if (this.root && this.root._form && this.root._form._id) {\n        formio.formUrl = \"\".concat(formio.projectUrl, \"/form/\").concat(this.root._form._id);\n      }\n\n      return formio;\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len5 = arguments.length, sources = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        sources[_key5] = arguments[_key5];\n      }\n\n      return _lodash.default.merge.apply(_lodash.default, [{\n        /**\n         * Determines if this component provides an input.\n         */\n        input: true,\n\n        /**\n         * The data key for this component (how the data is stored in the database).\n         */\n        key: '',\n\n        /**\n         * The input placeholder for this component.\n         */\n        placeholder: '',\n\n        /**\n         * The input prefix\n         */\n        prefix: '',\n\n        /**\n         * The custom CSS class to provide to this component.\n         */\n        customClass: '',\n\n        /**\n         * The input suffix.\n         */\n        suffix: '',\n\n        /**\n         * If this component should allow an array of values to be captured.\n         */\n        multiple: false,\n\n        /**\n         * The default value of this compoennt.\n         */\n        defaultValue: null,\n\n        /**\n         * If the data of this component should be protected (no GET api requests can see the data)\n         */\n        protected: false,\n\n        /**\n         * Validate if the value of this component should be unique within the form.\n         */\n        unique: false,\n\n        /**\n         * If the value of this component should be persisted within the backend api database.\n         */\n        persistent: true,\n\n        /**\n         * Determines if the component should be within the form, but not visible.\n         */\n        hidden: false,\n\n        /**\n         * If the component should be cleared when hidden.\n         */\n        clearOnHide: true,\n\n        /**\n         * This will refresh this component options when this field changes.\n         */\n        refreshOn: '',\n\n        /**\n         * This will redraw the component when this field changes.\n         */\n        redrawOn: '',\n\n        /**\n         * If this component should be included as a column within a submission table.\n         */\n        tableView: false,\n\n        /**\n         * If this component should be rendering in modal.\n         */\n        modalEdit: false,\n\n        /**\n         * The input label provided to this component.\n         */\n        label: '',\n        dataGridLabel: false,\n        labelPosition: 'top',\n        description: '',\n        errorLabel: '',\n        tooltip: '',\n        hideLabel: false,\n        tabindex: '',\n        disabled: false,\n        autofocus: false,\n        dbIndex: false,\n        customDefaultValue: '',\n        calculateValue: '',\n        calculateServer: false,\n        widget: null,\n\n        /**\n         * Attributes that will be assigned to the input elements of this component.\n         */\n        attributes: {},\n\n        /**\n         * This will perform the validation on either \"change\" or \"blur\" of the input element.\n         */\n        validateOn: 'change',\n\n        /**\n         * The validation criteria for this component.\n         */\n        validate: {\n          /**\n           * If this component is required.\n           */\n          required: false,\n\n          /**\n           * Custom JavaScript validation.\n           */\n          custom: '',\n\n          /**\n           * If the custom validation should remain private (only the backend will see it and execute it).\n           */\n          customPrivate: false,\n\n          /**\n           * If this component should implement a strict date validation if the Calendar widget is implemented.\n           */\n          strictDateValidation: false,\n          multiple: false,\n          unique: false\n        },\n\n        /**\n         * The simple conditional settings for a component.\n         */\n        conditional: {\n          show: null,\n          when: null,\n          eq: ''\n        },\n        overlay: {\n          style: '',\n          left: '',\n          top: '',\n          width: '',\n          height: ''\n        },\n        allowCalculateOverride: false,\n        encrypted: false,\n        showCharCount: false,\n        showWordCount: false,\n        properties: {},\n        allowMultipleMasks: false\n      }].concat(sources));\n    }\n    /**\n     * Return the validator as part of the component.\n     *\n     * @return {ValidationChecker}\n     * @constructor\n     */\n\n  }, {\n    key: \"Validator\",\n    get: function get() {\n      return _Validator.default;\n    }\n    /**\n     * Provides a table view for this component. Override if you wish to do something different than using getView\n     * method of your instance.\n     *\n     * @param value\n     * @param options\n     */\n\n    /* eslint-disable no-unused-vars */\n\n  }, {\n    key: \"tableView\",\n    value: function tableView(value, options) {}\n  }]);\n\n  return Component;\n}(_Element2.default);\n\nexports.default = Component;\nComponent.externalLibraries = {};\n\nComponent.requireLibrary = function (name, property, src, polling) {\n  if (!Component.externalLibraries.hasOwnProperty(name)) {\n    Component.externalLibraries[name] = {};\n    Component.externalLibraries[name].ready = new _nativePromiseOnly.default(function (resolve, reject) {\n      Component.externalLibraries[name].resolve = resolve;\n      Component.externalLibraries[name].reject = reject;\n    });\n    var callbackName = \"\".concat(name, \"Callback\");\n\n    if (!polling && !window[callbackName]) {\n      window[callbackName] = function () {\n        this.resolve();\n      }.bind(Component.externalLibraries[name]);\n    } // See if the plugin already exists.\n\n\n    var plugin = _lodash.default.get(window, property);\n\n    if (plugin) {\n      Component.externalLibraries[name].resolve(plugin);\n    } else {\n      src = Array.isArray(src) ? src : [src];\n      src.forEach(function (lib) {\n        var attrs = {};\n        var elementType = '';\n\n        if (typeof lib === 'string') {\n          lib = {\n            type: 'script',\n            src: lib\n          };\n        }\n\n        switch (lib.type) {\n          case 'script':\n            elementType = 'script';\n            attrs = {\n              src: lib.src,\n              type: 'text/javascript',\n              defer: true,\n              async: true\n            };\n            break;\n\n          case 'styles':\n            elementType = 'link';\n            attrs = {\n              href: lib.src,\n              rel: 'stylesheet'\n            };\n            break;\n        } // Add the script to the top page.\n\n\n        var script = document.createElement(elementType);\n\n        for (var attr in attrs) {\n          script.setAttribute(attr, attrs[attr]);\n        }\n\n        document.getElementsByTagName('head')[0].appendChild(script);\n      }); // if no callback is provided, then check periodically for the script.\n\n      if (polling) {\n        setTimeout(function checkLibrary() {\n          var plugin = _lodash.default.get(window, property);\n\n          if (plugin) {\n            Component.externalLibraries[name].resolve(plugin);\n          } else {\n            // check again after 200 ms.\n            setTimeout(checkLibrary, 200);\n          }\n        }, 200);\n      }\n    }\n  }\n\n  return Component.externalLibraries[name].ready;\n};\n\nComponent.libraryReady = function (name) {\n  if (Component.externalLibraries.hasOwnProperty(name) && Component.externalLibraries[name].ready) {\n    return Component.externalLibraries[name].ready;\n  }\n\n  return _nativePromiseOnly.default.reject(\"\".concat(name, \" library was not required.\"));\n};"]},"metadata":{},"sourceType":"script"}