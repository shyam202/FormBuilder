{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Component = _interopRequireDefault(require(\"../_classes/component/Component\"));\n\nvar _Components = _interopRequireDefault(require(\"../Components\"));\n\nvar _NestedComponent2 = _interopRequireDefault(require(\"../_classes/nested/NestedComponent\"));\n\nvar _Node = _interopRequireDefault(require(\"./Node\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar TreeComponent = /*#__PURE__*/function (_NestedComponent) {\n  _inherits(TreeComponent, _NestedComponent);\n\n  var _super = _createSuper(TreeComponent);\n\n  function TreeComponent() {\n    var _this;\n\n    _classCallCheck(this, TreeComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.type = 'tree';\n    return _this;\n  }\n\n  _createClass(TreeComponent, [{\n    key: \"emptyValue\",\n    get: function get() {\n      return {};\n    }\n  }, {\n    key: \"viewComponents\",\n    get: function get() {\n      if (!this.viewComponentsInstantiated) {\n        this.viewComponentsInstantiated = true;\n        this._viewComponents = this.createComponents({});\n      }\n\n      return this._viewComponents;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"init\", this).call(this);\n      }\n\n      this.components = [];\n      this.componentOptions = _objectSpread(_objectSpread({}, this.options), {}, {\n        parent: this,\n        root: this.root || this\n      });\n      this.disabled = this.shouldDisabled;\n      this.setRoot();\n      this.viewComponentsInstantiated = false;\n      this._viewComponents = [];\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"disabled\", this);\n    },\n    set: function set(disabled) {\n      _set(_getPrototypeOf(TreeComponent.prototype), \"disabled\", disabled, this, true);\n\n      this.viewComponents.forEach(function (component) {\n        return component.parentDisabled = disabled;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(TreeComponent.prototype), \"destroy\", this).call(this);\n\n      if (!this.builderMode) {\n        this.removeComponents(this._viewComponents);\n      }\n    }\n  }, {\n    key: \"createComponents\",\n    value: function createComponents(data, node) {\n      var _this2 = this;\n\n      var components = this.componentComponents.map(function (component) {\n        var componentInstance = _Components.default.create(component, _this2.componentOptions, data);\n\n        componentInstance.init();\n        componentInstance.parentDisabled = _this2.disabled;\n        return componentInstance;\n      });\n\n      if (node) {\n        this.checkNode(this.data, node);\n      }\n\n      return components;\n    }\n  }, {\n    key: \"removeComponents\",\n    value: function removeComponents(components) {\n      return components.map(function (component) {\n        return component.destroy();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this);\n      }\n\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this, this.renderTree(this.treeRoot));\n    }\n  }, {\n    key: \"renderTree\",\n    value: function renderTree() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var odd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var childNodes = node.hasChildren && !node.collapsed ? this.renderChildNodes(node.children, !odd) : [];\n      var content = node.changing ? this.renderEdit(node) : this.renderView(node);\n      return this.renderTemplate('tree', {\n        odd: odd,\n        childNodes: childNodes,\n        content: content,\n        node: node\n      });\n    }\n  }, {\n    key: \"renderChildNodes\",\n    value: function renderChildNodes() {\n      var _this3 = this;\n\n      var nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var odd = arguments.length > 1 ? arguments[1] : undefined;\n      return nodes.map(function (node) {\n        return _this3.renderTree(node, odd);\n      });\n    }\n  }, {\n    key: \"renderEdit\",\n    value: function renderEdit() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeEdit', {\n        children: this.renderComponents(node.components),\n        node: node\n      });\n    }\n  }, {\n    key: \"renderView\",\n    value: function renderView() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeView', {\n        values: this.viewComponents.map(function (component) {\n          component.data = node.data;\n          component.checkComponentConditions(node.data);\n          return component.getView(component.dataValue);\n        }),\n        nodeData: node.data,\n        node: node\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element);\n      }\n\n      this.loadRefs(element, {\n        root: 'single'\n      });\n      return _nativePromiseOnly.default.all([_get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element), this.attachNode(this.refs.root, this.treeRoot)]);\n    }\n  }, {\n    key: \"attachNode\",\n    value: function attachNode(element, node) {\n      if (!element) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      var componentsPromise = _nativePromiseOnly.default.resolve();\n\n      var childrenPromise = _nativePromiseOnly.default.resolve();\n\n      node.refs = _lodash.default.reduce(element.children, function (refs, child) {\n        return child.hasAttribute('ref') ? _objectSpread(_objectSpread({}, refs), {}, _defineProperty({}, child.getAttribute('ref'), child)) : refs;\n      }, {});\n\n      if (node.refs.content) {\n        this.attachActions(node);\n        componentsPromise = this.attachComponents(node);\n      }\n\n      if (node.refs.childNodes) {\n        childrenPromise = this.attachChildren(node);\n      }\n\n      return _nativePromiseOnly.default.all([componentsPromise, childrenPromise]);\n    }\n  }, {\n    key: \"attachActions\",\n    value: function attachActions(node) {\n      var _node$refs$content$ch,\n          _this4 = this;\n\n      if (!node.editing) {\n        this.loadRefs.call(node, node.refs.content, {\n          addChild: 'single',\n          editNode: 'single',\n          removeNode: 'single',\n          revertNode: 'single',\n          toggleNode: 'single'\n        });\n      } //load refs correctly (if there is nested tree)\n\n\n      this.loadRefs.call(node, ((_node$refs$content$ch = node.refs.content.children[0]) === null || _node$refs$content$ch === void 0 ? void 0 : _node$refs$content$ch.children[1]) || node.refs.content, {\n        cancelNode: 'single',\n        saveNode: 'single'\n      });\n\n      if (node.refs.addChild) {\n        this.addEventListener(node.refs.addChild, 'click', function () {\n          _this4.addChild(node);\n        });\n      }\n\n      if (node.refs.cancelNode) {\n        this.addEventListener(node.refs.cancelNode, 'click', function () {\n          _this4.cancelNode(node);\n        });\n      }\n\n      if (node.refs.editNode) {\n        this.addEventListener(node.refs.editNode, 'click', function () {\n          _this4.editNode(node);\n        });\n      }\n\n      if (node.refs.removeNode) {\n        this.addEventListener(node.refs.removeNode, 'click', function () {\n          _this4.removeNode(node);\n        });\n      }\n\n      if (node.refs.revertNode) {\n        this.addEventListener(node.refs.revertNode, 'click', function () {\n          _this4.revertNode(node);\n        });\n      }\n\n      if (node.refs.saveNode) {\n        this.addEventListener(node.refs.saveNode, 'click', function () {\n          _this4.saveNode(node);\n        });\n      }\n\n      if (node.refs.toggleNode) {\n        this.addEventListener(node.refs.toggleNode, 'click', function () {\n          _this4.toggleNode(node);\n        });\n      }\n    }\n  }, {\n    key: \"attachComponents\",\n    value: function attachComponents(node) {\n      if (this.builderMode) {\n        var _get2;\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        return (_get2 = _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this)).call.apply(_get2, [this, node].concat(args));\n      }\n\n      this.loadRefs.call(node, node.refs.content, {\n        nodeEdit: 'single'\n      });\n      return node.refs.nodeEdit ? _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this).call(this, node.refs.nodeEdit, node.components) : _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"attachChildren\",\n    value: function attachChildren(node) {\n      var _this5 = this;\n\n      var childElements = node.refs.childNodes.children;\n      return _nativePromiseOnly.default.all(_lodash.default.map(childElements, function (childElement, index) {\n        return _this5.attachNode(childElement, node.children[index]);\n      }));\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      this.setRoot();\n      return changed;\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild(parent) {\n      var _this6 = this;\n\n      if (this.options.readOnly || parent.new) {\n        return;\n      }\n\n      this.hook('tree.addChild', {\n        parent: parent,\n        component: this\n      }, function () {\n        var child = parent.addChild();\n\n        _this6.redraw();\n\n        return child;\n      });\n    }\n  }, {\n    key: \"cancelNode\",\n    value: function cancelNode(node) {\n      var _this7 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.cancelNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          _this7.removeRoot();\n        } else {\n          node.cancel();\n\n          _this7.redraw();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"editNode\",\n    value: function editNode(node) {\n      var _this8 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.editNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.edit();\n\n        _this8.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeNode\",\n    value: function removeNode(node) {\n      var _this9 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.removeNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          _this9.removeRoot();\n        } else {\n          node.remove();\n\n          _this9.updateTree();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"revertNode\",\n    value: function revertNode(node) {\n      var _this10 = this;\n\n      if (this.options.readOnly || !node.revertAvailable) {\n        return;\n      }\n\n      this.hook('tree.revertNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.revert();\n\n        _this10.updateTree();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"saveNode\",\n    value: function saveNode(node) {\n      var _this11 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.saveNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.save();\n\n        _this11.updateTree();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"toggleNode\",\n    value: function toggleNode(node) {\n      var _this12 = this;\n\n      this.hook('tree.toggleNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.collapsed = !node.collapsed;\n\n        _this12.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeRoot\",\n    value: function removeRoot() {\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.dataValue = this.defaultValue;\n      this.setRoot();\n      this.redraw();\n    }\n  }, {\n    key: \"setRoot\",\n    value: function setRoot() {\n      var value = this.dataValue;\n      this.treeRoot = new _Node.default(null, value, {\n        isNew: !value.data,\n        createComponents: this.createComponents.bind(this),\n        checkNode: this.checkNode.bind(this, this.data),\n        removeComponents: this.removeComponents\n      });\n      this.hook('tree.setRoot', {\n        root: this.treeRoot,\n        component: this\n      });\n      this.redraw();\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"updateTree\",\n    value: function updateTree() {\n      this.updateValue(this.treeRoot.value);\n      this.redraw();\n    }\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      return this.checkNode(data, this.treeRoot, flags, row);\n    }\n  }, {\n    key: \"checkNode\",\n    value: function checkNode(data, node, flags, row) {\n      var _this13 = this;\n\n      return node.children.reduce(function (result, child) {\n        return _this13.checkNode(data, child, flags, row) && result;\n      }, _get(_getPrototypeOf(TreeComponent.prototype), \"checkData\", this).call(this, data, flags, node.data, node.components));\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len3 = arguments.length, extend = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        extend[_key3] = arguments[_key3];\n      }\n\n      return _NestedComponent2.default.schema.apply(_NestedComponent2.default, [{\n        label: 'Tree',\n        key: 'tree',\n        type: 'tree',\n        clearOnHide: true,\n        input: true,\n        tree: true,\n        components: []\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Tree',\n        icon: 'indent',\n        group: 'data',\n        weight: 40,\n        schema: TreeComponent.schema()\n      };\n    }\n  }]);\n\n  return TreeComponent;\n}(_NestedComponent2.default);\n\nexports.default = TreeComponent;\nTreeComponent.prototype.hasChanged = _Component.default.prototype.hasChanged;\nTreeComponent.prototype.updateValue = _Component.default.prototype.updateValue;","map":{"version":3,"sources":["C:/Users/ShyamLakhani/Desktop/my-app/node_modules/formiojs/components/tree/Tree.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","default","_lodash","_interopRequireDefault","require","_Component","_Components","_NestedComponent2","_Node","_nativePromiseOnly","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","set","property","receiver","Reflect","base","_superPropBase","desc","call","_set","isStrict","s","Error","_get","get","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","TreeComponent","_NestedComponent","_super","_this","_len","args","Array","_key","concat","type","viewComponentsInstantiated","_viewComponents","createComponents","init","builderMode","components","componentOptions","options","parent","root","disabled","shouldDisabled","setRoot","viewComponents","component","parentDisabled","destroy","removeComponents","data","node","_this2","componentComponents","map","componentInstance","checkNode","render","renderTree","treeRoot","undefined","odd","childNodes","hasChildren","collapsed","renderChildNodes","children","content","changing","renderEdit","renderView","renderTemplate","_this3","nodes","renderComponents","values","checkComponentConditions","getView","dataValue","nodeData","attach","element","loadRefs","all","attachNode","refs","resolve","componentsPromise","childrenPromise","reduce","child","hasAttribute","getAttribute","attachActions","attachComponents","attachChildren","_node$refs$content$ch","_this4","editing","addChild","editNode","removeNode","revertNode","toggleNode","cancelNode","saveNode","addEventListener","_get2","_len2","_key2","nodeEdit","_this5","childElements","childElement","index","setValue","flags","changed","updateValue","_this6","readOnly","new","hook","redraw","_this7","isRoot","removeRoot","cancel","_this8","edit","_this9","remove","updateTree","_this10","revertAvailable","revert","_this11","save","_this12","defaultValue","isNew","bind","getValue","checkData","row","_this13","schema","_len3","extend","_key3","label","clearOnHide","input","tree","title","icon","group","weight","hasChanged"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.reflect.set.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Component = _interopRequireDefault(require(\"../_classes/component/Component\"));\n\nvar _Components = _interopRequireDefault(require(\"../Components\"));\n\nvar _NestedComponent2 = _interopRequireDefault(require(\"../_classes/nested/NestedComponent\"));\n\nvar _Node = _interopRequireDefault(require(\"./Node\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction set(target, property, value, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.set) { set = Reflect.set; } else { set = function set(target, property, value, receiver) { var base = _superPropBase(target, property); var desc; if (base) { desc = Object.getOwnPropertyDescriptor(base, property); if (desc.set) { desc.set.call(receiver, value); return true; } else if (!desc.writable) { return false; } } desc = Object.getOwnPropertyDescriptor(receiver, property); if (desc) { if (!desc.writable) { return false; } desc.value = value; Object.defineProperty(receiver, property, desc); } else { _defineProperty(receiver, property, value); } return true; }; } return set(target, property, value, receiver); }\n\nfunction _set(target, property, value, receiver, isStrict) { var s = set(target, property, value, receiver || target); if (!s && isStrict) { throw new Error('failed to set property'); } return value; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar TreeComponent = /*#__PURE__*/function (_NestedComponent) {\n  _inherits(TreeComponent, _NestedComponent);\n\n  var _super = _createSuper(TreeComponent);\n\n  function TreeComponent() {\n    var _this;\n\n    _classCallCheck(this, TreeComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.type = 'tree';\n    return _this;\n  }\n\n  _createClass(TreeComponent, [{\n    key: \"emptyValue\",\n    get: function get() {\n      return {};\n    }\n  }, {\n    key: \"viewComponents\",\n    get: function get() {\n      if (!this.viewComponentsInstantiated) {\n        this.viewComponentsInstantiated = true;\n        this._viewComponents = this.createComponents({});\n      }\n\n      return this._viewComponents;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"init\", this).call(this);\n      }\n\n      this.components = [];\n      this.componentOptions = _objectSpread(_objectSpread({}, this.options), {}, {\n        parent: this,\n        root: this.root || this\n      });\n      this.disabled = this.shouldDisabled;\n      this.setRoot();\n      this.viewComponentsInstantiated = false;\n      this._viewComponents = [];\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"disabled\", this);\n    },\n    set: function set(disabled) {\n      _set(_getPrototypeOf(TreeComponent.prototype), \"disabled\", disabled, this, true);\n\n      this.viewComponents.forEach(function (component) {\n        return component.parentDisabled = disabled;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(TreeComponent.prototype), \"destroy\", this).call(this);\n\n      if (!this.builderMode) {\n        this.removeComponents(this._viewComponents);\n      }\n    }\n  }, {\n    key: \"createComponents\",\n    value: function createComponents(data, node) {\n      var _this2 = this;\n\n      var components = this.componentComponents.map(function (component) {\n        var componentInstance = _Components.default.create(component, _this2.componentOptions, data);\n\n        componentInstance.init();\n        componentInstance.parentDisabled = _this2.disabled;\n        return componentInstance;\n      });\n\n      if (node) {\n        this.checkNode(this.data, node);\n      }\n\n      return components;\n    }\n  }, {\n    key: \"removeComponents\",\n    value: function removeComponents(components) {\n      return components.map(function (component) {\n        return component.destroy();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this);\n      }\n\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this, this.renderTree(this.treeRoot));\n    }\n  }, {\n    key: \"renderTree\",\n    value: function renderTree() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var odd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var childNodes = node.hasChildren && !node.collapsed ? this.renderChildNodes(node.children, !odd) : [];\n      var content = node.changing ? this.renderEdit(node) : this.renderView(node);\n      return this.renderTemplate('tree', {\n        odd: odd,\n        childNodes: childNodes,\n        content: content,\n        node: node\n      });\n    }\n  }, {\n    key: \"renderChildNodes\",\n    value: function renderChildNodes() {\n      var _this3 = this;\n\n      var nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var odd = arguments.length > 1 ? arguments[1] : undefined;\n      return nodes.map(function (node) {\n        return _this3.renderTree(node, odd);\n      });\n    }\n  }, {\n    key: \"renderEdit\",\n    value: function renderEdit() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeEdit', {\n        children: this.renderComponents(node.components),\n        node: node\n      });\n    }\n  }, {\n    key: \"renderView\",\n    value: function renderView() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeView', {\n        values: this.viewComponents.map(function (component) {\n          component.data = node.data;\n          component.checkComponentConditions(node.data);\n          return component.getView(component.dataValue);\n        }),\n        nodeData: node.data,\n        node: node\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element);\n      }\n\n      this.loadRefs(element, {\n        root: 'single'\n      });\n      return _nativePromiseOnly.default.all([_get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element), this.attachNode(this.refs.root, this.treeRoot)]);\n    }\n  }, {\n    key: \"attachNode\",\n    value: function attachNode(element, node) {\n      if (!element) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      var componentsPromise = _nativePromiseOnly.default.resolve();\n\n      var childrenPromise = _nativePromiseOnly.default.resolve();\n\n      node.refs = _lodash.default.reduce(element.children, function (refs, child) {\n        return child.hasAttribute('ref') ? _objectSpread(_objectSpread({}, refs), {}, _defineProperty({}, child.getAttribute('ref'), child)) : refs;\n      }, {});\n\n      if (node.refs.content) {\n        this.attachActions(node);\n        componentsPromise = this.attachComponents(node);\n      }\n\n      if (node.refs.childNodes) {\n        childrenPromise = this.attachChildren(node);\n      }\n\n      return _nativePromiseOnly.default.all([componentsPromise, childrenPromise]);\n    }\n  }, {\n    key: \"attachActions\",\n    value: function attachActions(node) {\n      var _node$refs$content$ch,\n          _this4 = this;\n\n      if (!node.editing) {\n        this.loadRefs.call(node, node.refs.content, {\n          addChild: 'single',\n          editNode: 'single',\n          removeNode: 'single',\n          revertNode: 'single',\n          toggleNode: 'single'\n        });\n      } //load refs correctly (if there is nested tree)\n\n\n      this.loadRefs.call(node, ((_node$refs$content$ch = node.refs.content.children[0]) === null || _node$refs$content$ch === void 0 ? void 0 : _node$refs$content$ch.children[1]) || node.refs.content, {\n        cancelNode: 'single',\n        saveNode: 'single'\n      });\n\n      if (node.refs.addChild) {\n        this.addEventListener(node.refs.addChild, 'click', function () {\n          _this4.addChild(node);\n        });\n      }\n\n      if (node.refs.cancelNode) {\n        this.addEventListener(node.refs.cancelNode, 'click', function () {\n          _this4.cancelNode(node);\n        });\n      }\n\n      if (node.refs.editNode) {\n        this.addEventListener(node.refs.editNode, 'click', function () {\n          _this4.editNode(node);\n        });\n      }\n\n      if (node.refs.removeNode) {\n        this.addEventListener(node.refs.removeNode, 'click', function () {\n          _this4.removeNode(node);\n        });\n      }\n\n      if (node.refs.revertNode) {\n        this.addEventListener(node.refs.revertNode, 'click', function () {\n          _this4.revertNode(node);\n        });\n      }\n\n      if (node.refs.saveNode) {\n        this.addEventListener(node.refs.saveNode, 'click', function () {\n          _this4.saveNode(node);\n        });\n      }\n\n      if (node.refs.toggleNode) {\n        this.addEventListener(node.refs.toggleNode, 'click', function () {\n          _this4.toggleNode(node);\n        });\n      }\n    }\n  }, {\n    key: \"attachComponents\",\n    value: function attachComponents(node) {\n      if (this.builderMode) {\n        var _get2;\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        return (_get2 = _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this)).call.apply(_get2, [this, node].concat(args));\n      }\n\n      this.loadRefs.call(node, node.refs.content, {\n        nodeEdit: 'single'\n      });\n      return node.refs.nodeEdit ? _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this).call(this, node.refs.nodeEdit, node.components) : _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"attachChildren\",\n    value: function attachChildren(node) {\n      var _this5 = this;\n\n      var childElements = node.refs.childNodes.children;\n      return _nativePromiseOnly.default.all(_lodash.default.map(childElements, function (childElement, index) {\n        return _this5.attachNode(childElement, node.children[index]);\n      }));\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      this.setRoot();\n      return changed;\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild(parent) {\n      var _this6 = this;\n\n      if (this.options.readOnly || parent.new) {\n        return;\n      }\n\n      this.hook('tree.addChild', {\n        parent: parent,\n        component: this\n      }, function () {\n        var child = parent.addChild();\n\n        _this6.redraw();\n\n        return child;\n      });\n    }\n  }, {\n    key: \"cancelNode\",\n    value: function cancelNode(node) {\n      var _this7 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.cancelNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          _this7.removeRoot();\n        } else {\n          node.cancel();\n\n          _this7.redraw();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"editNode\",\n    value: function editNode(node) {\n      var _this8 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.editNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.edit();\n\n        _this8.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeNode\",\n    value: function removeNode(node) {\n      var _this9 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.removeNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          _this9.removeRoot();\n        } else {\n          node.remove();\n\n          _this9.updateTree();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"revertNode\",\n    value: function revertNode(node) {\n      var _this10 = this;\n\n      if (this.options.readOnly || !node.revertAvailable) {\n        return;\n      }\n\n      this.hook('tree.revertNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.revert();\n\n        _this10.updateTree();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"saveNode\",\n    value: function saveNode(node) {\n      var _this11 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.saveNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.save();\n\n        _this11.updateTree();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"toggleNode\",\n    value: function toggleNode(node) {\n      var _this12 = this;\n\n      this.hook('tree.toggleNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.collapsed = !node.collapsed;\n\n        _this12.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeRoot\",\n    value: function removeRoot() {\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.dataValue = this.defaultValue;\n      this.setRoot();\n      this.redraw();\n    }\n  }, {\n    key: \"setRoot\",\n    value: function setRoot() {\n      var value = this.dataValue;\n      this.treeRoot = new _Node.default(null, value, {\n        isNew: !value.data,\n        createComponents: this.createComponents.bind(this),\n        checkNode: this.checkNode.bind(this, this.data),\n        removeComponents: this.removeComponents\n      });\n      this.hook('tree.setRoot', {\n        root: this.treeRoot,\n        component: this\n      });\n      this.redraw();\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.dataValue;\n    }\n  }, {\n    key: \"updateTree\",\n    value: function updateTree() {\n      this.updateValue(this.treeRoot.value);\n      this.redraw();\n    }\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      return this.checkNode(data, this.treeRoot, flags, row);\n    }\n  }, {\n    key: \"checkNode\",\n    value: function checkNode(data, node, flags, row) {\n      var _this13 = this;\n\n      return node.children.reduce(function (result, child) {\n        return _this13.checkNode(data, child, flags, row) && result;\n      }, _get(_getPrototypeOf(TreeComponent.prototype), \"checkData\", this).call(this, data, flags, node.data, node.components));\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len3 = arguments.length, extend = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        extend[_key3] = arguments[_key3];\n      }\n\n      return _NestedComponent2.default.schema.apply(_NestedComponent2.default, [{\n        label: 'Tree',\n        key: 'tree',\n        type: 'tree',\n        clearOnHide: true,\n        input: true,\n        tree: true,\n        components: []\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Tree',\n        icon: 'indent',\n        group: 'data',\n        weight: 40,\n        schema: TreeComponent.schema()\n      };\n    }\n  }]);\n\n  return TreeComponent;\n}(_NestedComponent2.default);\n\nexports.default = TreeComponent;\nTreeComponent.prototype.hasChanged = _Component.default.prototype.hasChanged;\nTreeComponent.prototype.updateValue = _Component.default.prototype.updateValue;"]},"metadata":{},"sourceType":"script"}