{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar Node = /*#__PURE__*/function () {\n  function Node(parent) {\n    var _this = this;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$data = _ref.data,\n        data = _ref$data === void 0 ? {} : _ref$data,\n        _ref$children = _ref.children,\n        children = _ref$children === void 0 ? [] : _ref$children;\n\n    var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        checkNode = _ref2.checkNode,\n        createComponents = _ref2.createComponents,\n        _ref2$isNew = _ref2.isNew,\n        isNew = _ref2$isNew === void 0 ? true : _ref2$isNew,\n        removeComponents = _ref2.removeComponents;\n\n    _classCallCheck(this, Node);\n\n    this.parent = parent;\n    this.previousData = {};\n    this.persistentData = _lodash.default.cloneDeep(data);\n    this.new = isNew;\n    this.createComponents = createComponents;\n    this.checkNode = checkNode;\n    this.removeComponents = removeComponents;\n    this.revertAvailable = false;\n    this.editing = false;\n    this.collapsed = false;\n    this.components = [];\n    this.children = [];\n    this.resetData();\n    this.children = children.map(function (child) {\n      return new Node(_this, child, {\n        checkNode: checkNode,\n        createComponents: createComponents,\n        isNew: false,\n        removeComponents: removeComponents\n      });\n    });\n  }\n\n  _createClass(Node, [{\n    key: \"value\",\n    get: function get() {\n      return this.new ? null // Check the special case for empty root node.\n      : {\n        data: _lodash.default.cloneDeep(this.persistentData),\n        children: this.children.filter(function (child) {\n          return !child.new;\n        }).map(function (child) {\n          return child.value;\n        })\n      };\n    }\n  }, {\n    key: \"isRoot\",\n    get: function get() {\n      return this.parent === null;\n    }\n  }, {\n    key: \"changing\",\n    get: function get() {\n      return this.new || this.editing;\n    }\n  }, {\n    key: \"hasChangingChildren\",\n    get: function get() {\n      return this.changin || this.children.some(function (child) {\n        return child.hasChangingChildren;\n      });\n    }\n  }, {\n    key: \"hasData\",\n    get: function get() {\n      return !_lodash.default.isEmpty(this.persistentData);\n    }\n  }, {\n    key: \"hasChildren\",\n    get: function get() {\n      return Array.isArray(this.children) && this.children.length > 0;\n    }\n  }, {\n    key: \"eachChild\",\n    value: function eachChild(iteratee) {\n      iteratee(this);\n      this.children.forEach(function (child) {\n        return child.eachChild(iteratee);\n      });\n      return this;\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.children.reduce(function (components, child) {\n        return components.concat(child.getComponents());\n      }, this.components);\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild() {\n      if (this.new) {\n        return null;\n      }\n\n      var child = new Node(this, {}, {\n        checkNode: this.checkNode,\n        createComponents: this.createComponents,\n        isNew: true,\n        removeComponents: this.removeComponents\n      });\n      this.children = this.children.concat(child);\n      return child;\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(childToRemove) {\n      if (!this.new) {\n        this.children = this.children.filter(function (child) {\n          return child !== childToRemove;\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"edit\",\n    value: function edit() {\n      if (this.new) {\n        return this;\n      }\n\n      this.editing = true;\n      return this.resetData();\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      if (this.changing) {\n        if (this.new) {\n          this.new = false;\n        } else {\n          this.editing = false;\n          this.revertAvailable = true;\n        }\n\n        this.commitData();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this.new) {\n        this.remove();\n      } else if (this.editing) {\n        this.editing = false;\n        this.resetData();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      this.parent.removeChild(this);\n      this.parent = null;\n      this.clearComponents();\n      return this;\n    }\n  }, {\n    key: \"revert\",\n    value: function revert() {\n      if (!this.revertAvailable) {\n        return this;\n      }\n\n      this.data = this.previousData;\n      return this.commitData();\n    }\n  }, {\n    key: \"commitData\",\n    value: function commitData() {\n      this.previousData = this.persistentData;\n      this.persistentData = _lodash.default.cloneDeep(this.data);\n      this.clearComponents();\n      return this;\n    }\n  }, {\n    key: \"resetData\",\n    value: function resetData() {\n      this.data = _lodash.default.cloneDeep(this.persistentData);\n      this.updateComponentsContext();\n      return this;\n    }\n  }, {\n    key: \"updateComponentsContext\",\n    value: function updateComponentsContext() {\n      if (this.changing) {\n        this.instantiateComponents();\n      } else {\n        this.clearComponents();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"instantiateComponents\",\n    value: function instantiateComponents() {\n      this.components = this.createComponents(this.data, this);\n      this.checkNode(this);\n    }\n  }, {\n    key: \"clearComponents\",\n    value: function clearComponents() {\n      this.removeComponents(this.components);\n      this.components = [];\n    }\n  }]);\n\n  return Node;\n}();\n\nexports.default = Node;","map":{"version":3,"sources":["C:/Users/ShyamLakhani/Desktop/my-app/node_modules/formiojs/components/tree/Node.js"],"names":["Object","defineProperty","exports","value","default","_lodash","_interopRequireDefault","require","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","Node","parent","_this","_ref","arguments","undefined","_ref$data","data","_ref$children","children","_ref2","checkNode","createComponents","_ref2$isNew","isNew","removeComponents","previousData","persistentData","cloneDeep","new","revertAvailable","editing","collapsed","components","resetData","map","child","get","filter","changin","some","hasChangingChildren","isEmpty","Array","isArray","eachChild","iteratee","forEach","getComponents","reduce","concat","addChild","removeChild","childToRemove","edit","save","changing","commitData","cancel","remove","clearComponents","revert","updateComponentsContext","instantiateComponents"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Node = /*#__PURE__*/function () {\n  function Node(parent) {\n    var _this = this;\n\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$data = _ref.data,\n        data = _ref$data === void 0 ? {} : _ref$data,\n        _ref$children = _ref.children,\n        children = _ref$children === void 0 ? [] : _ref$children;\n\n    var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        checkNode = _ref2.checkNode,\n        createComponents = _ref2.createComponents,\n        _ref2$isNew = _ref2.isNew,\n        isNew = _ref2$isNew === void 0 ? true : _ref2$isNew,\n        removeComponents = _ref2.removeComponents;\n\n    _classCallCheck(this, Node);\n\n    this.parent = parent;\n    this.previousData = {};\n    this.persistentData = _lodash.default.cloneDeep(data);\n    this.new = isNew;\n    this.createComponents = createComponents;\n    this.checkNode = checkNode;\n    this.removeComponents = removeComponents;\n    this.revertAvailable = false;\n    this.editing = false;\n    this.collapsed = false;\n    this.components = [];\n    this.children = [];\n    this.resetData();\n    this.children = children.map(function (child) {\n      return new Node(_this, child, {\n        checkNode: checkNode,\n        createComponents: createComponents,\n        isNew: false,\n        removeComponents: removeComponents\n      });\n    });\n  }\n\n  _createClass(Node, [{\n    key: \"value\",\n    get: function get() {\n      return this.new ? null // Check the special case for empty root node.\n      : {\n        data: _lodash.default.cloneDeep(this.persistentData),\n        children: this.children.filter(function (child) {\n          return !child.new;\n        }).map(function (child) {\n          return child.value;\n        })\n      };\n    }\n  }, {\n    key: \"isRoot\",\n    get: function get() {\n      return this.parent === null;\n    }\n  }, {\n    key: \"changing\",\n    get: function get() {\n      return this.new || this.editing;\n    }\n  }, {\n    key: \"hasChangingChildren\",\n    get: function get() {\n      return this.changin || this.children.some(function (child) {\n        return child.hasChangingChildren;\n      });\n    }\n  }, {\n    key: \"hasData\",\n    get: function get() {\n      return !_lodash.default.isEmpty(this.persistentData);\n    }\n  }, {\n    key: \"hasChildren\",\n    get: function get() {\n      return Array.isArray(this.children) && this.children.length > 0;\n    }\n  }, {\n    key: \"eachChild\",\n    value: function eachChild(iteratee) {\n      iteratee(this);\n      this.children.forEach(function (child) {\n        return child.eachChild(iteratee);\n      });\n      return this;\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.children.reduce(function (components, child) {\n        return components.concat(child.getComponents());\n      }, this.components);\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild() {\n      if (this.new) {\n        return null;\n      }\n\n      var child = new Node(this, {}, {\n        checkNode: this.checkNode,\n        createComponents: this.createComponents,\n        isNew: true,\n        removeComponents: this.removeComponents\n      });\n      this.children = this.children.concat(child);\n      return child;\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(childToRemove) {\n      if (!this.new) {\n        this.children = this.children.filter(function (child) {\n          return child !== childToRemove;\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"edit\",\n    value: function edit() {\n      if (this.new) {\n        return this;\n      }\n\n      this.editing = true;\n      return this.resetData();\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      if (this.changing) {\n        if (this.new) {\n          this.new = false;\n        } else {\n          this.editing = false;\n          this.revertAvailable = true;\n        }\n\n        this.commitData();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this.new) {\n        this.remove();\n      } else if (this.editing) {\n        this.editing = false;\n        this.resetData();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      this.parent.removeChild(this);\n      this.parent = null;\n      this.clearComponents();\n      return this;\n    }\n  }, {\n    key: \"revert\",\n    value: function revert() {\n      if (!this.revertAvailable) {\n        return this;\n      }\n\n      this.data = this.previousData;\n      return this.commitData();\n    }\n  }, {\n    key: \"commitData\",\n    value: function commitData() {\n      this.previousData = this.persistentData;\n      this.persistentData = _lodash.default.cloneDeep(this.data);\n      this.clearComponents();\n      return this;\n    }\n  }, {\n    key: \"resetData\",\n    value: function resetData() {\n      this.data = _lodash.default.cloneDeep(this.persistentData);\n      this.updateComponentsContext();\n      return this;\n    }\n  }, {\n    key: \"updateComponentsContext\",\n    value: function updateComponentsContext() {\n      if (this.changing) {\n        this.instantiateComponents();\n      } else {\n        this.clearComponents();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"instantiateComponents\",\n    value: function instantiateComponents() {\n      this.components = this.createComponents(this.data, this);\n      this.checkNode(this);\n    }\n  }, {\n    key: \"clearComponents\",\n    value: function clearComponents() {\n      this.removeComponents(this.components);\n      this.components = [];\n    }\n  }]);\n\n  return Node;\n}();\n\nexports.default = Node;"]},"metadata":{},"sourceType":"script"}