{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.auth = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _constants = require('./constants');\n\nvar type = _interopRequireWildcard(_constants);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar initialState = {\n  init: false,\n  isActive: false,\n  user: null,\n  authenticated: false,\n  submissionAccess: {},\n  formAccess: {},\n  projectAccess: {},\n  roles: {},\n  is: {},\n  error: ''\n};\n\nfunction mapProjectRolesToUserRoles(projectRoles, userRoles) {\n  return Object.entries(projectRoles).reduce(function (result, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        name = _ref2[0],\n        role = _ref2[1];\n\n    return _extends({}, result, _defineProperty({}, name, userRoles.includes(role._id)));\n  }, {});\n}\n\nfunction getUserRoles(projectRoles) {\n  return Object.keys(projectRoles).reduce(function (result, name) {\n    return _extends({}, result, _defineProperty({}, name, name === 'anonymous'));\n  }, {});\n}\n\nvar auth = exports.auth = function auth(config) {\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n      case type.USER_REQUEST:\n        return _extends({}, state, {\n          init: true,\n          submissionAccess: false,\n          isActive: true\n        });\n\n      case type.USER_REQUEST_SUCCESS:\n        return _extends({}, state, {\n          isActive: false,\n          user: action.user,\n          authenticated: true,\n          is: mapProjectRolesToUserRoles(state.roles, action.user.roles),\n          error: ''\n        });\n\n      case type.USER_REQUEST_FAILURE:\n        return _extends({}, state, {\n          isActive: false,\n          is: getUserRoles(state.roles),\n          error: action.error\n        });\n\n      case type.USER_LOGOUT:\n        return _extends({}, state, {\n          user: null,\n          isActive: false,\n          authenticated: false,\n          is: getUserRoles(state.roles),\n          error: ''\n        });\n\n      case type.USER_SUBMISSION_ACCESS:\n        return _extends({}, state, {\n          submissionAccess: action.submissionAccess\n        });\n\n      case type.USER_FORM_ACCESS:\n        return _extends({}, state, {\n          formAccess: action.formAccess\n        });\n\n      case type.USER_PROJECT_ACCESS:\n        return _extends({}, state, {\n          projectAccess: action.projectAccess\n        });\n\n      case type.USER_ROLES:\n        return _extends({}, state, {\n          roles: action.roles\n        });\n\n      default:\n        return state;\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/ShyamLakhani/Desktop/my-app/node_modules/react-formio/lib/modules/auth/reducers.js"],"names":["Object","defineProperty","exports","value","auth","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","_constants","require","type","_interopRequireWildcard","obj","__esModule","newObj","default","_defineProperty","enumerable","configurable","writable","initialState","init","isActive","user","authenticated","submissionAccess","formAccess","projectAccess","roles","is","error","mapProjectRolesToUserRoles","projectRoles","userRoles","entries","reduce","result","_ref","_ref2","name","role","includes","_id","getUserRoles","keys","config","state","action","USER_REQUEST","USER_REQUEST_SUCCESS","USER_REQUEST_FAILURE","USER_LOGOUT","USER_SUBMISSION_ACCESS","USER_FORM_ACCESS","USER_PROJECT_ACCESS","USER_ROLES"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.auth = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _constants = require('./constants');\n\nvar type = _interopRequireWildcard(_constants);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar initialState = {\n  init: false,\n  isActive: false,\n  user: null,\n  authenticated: false,\n  submissionAccess: {},\n  formAccess: {},\n  projectAccess: {},\n  roles: {},\n  is: {},\n  error: ''\n};\n\nfunction mapProjectRolesToUserRoles(projectRoles, userRoles) {\n  return Object.entries(projectRoles).reduce(function (result, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        name = _ref2[0],\n        role = _ref2[1];\n\n    return _extends({}, result, _defineProperty({}, name, userRoles.includes(role._id)));\n  }, {});\n}\n\nfunction getUserRoles(projectRoles) {\n  return Object.keys(projectRoles).reduce(function (result, name) {\n    return _extends({}, result, _defineProperty({}, name, name === 'anonymous'));\n  }, {});\n}\n\nvar auth = exports.auth = function auth(config) {\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n      case type.USER_REQUEST:\n        return _extends({}, state, {\n          init: true,\n          submissionAccess: false,\n          isActive: true\n        });\n      case type.USER_REQUEST_SUCCESS:\n        return _extends({}, state, {\n          isActive: false,\n          user: action.user,\n          authenticated: true,\n          is: mapProjectRolesToUserRoles(state.roles, action.user.roles),\n          error: ''\n        });\n      case type.USER_REQUEST_FAILURE:\n        return _extends({}, state, {\n          isActive: false,\n          is: getUserRoles(state.roles),\n          error: action.error\n        });\n      case type.USER_LOGOUT:\n        return _extends({}, state, {\n          user: null,\n          isActive: false,\n          authenticated: false,\n          is: getUserRoles(state.roles),\n          error: ''\n        });\n      case type.USER_SUBMISSION_ACCESS:\n        return _extends({}, state, {\n          submissionAccess: action.submissionAccess\n        });\n      case type.USER_FORM_ACCESS:\n        return _extends({}, state, {\n          formAccess: action.formAccess\n        });\n      case type.USER_PROJECT_ACCESS:\n        return _extends({}, state, {\n          projectAccess: action.projectAccess\n        });\n      case type.USER_ROLES:\n        return _extends({}, state, {\n          roles: action.roles\n        });\n      default:\n        return state;\n    }\n  };\n};"]},"metadata":{},"sourceType":"script"}